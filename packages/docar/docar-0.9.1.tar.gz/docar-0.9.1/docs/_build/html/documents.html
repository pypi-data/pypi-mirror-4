

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Documents &mdash; python-docar 0.5 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="python-docar 0.5 documentation" href="index.html" />
    <link rel="next" title="Fields" href="fields.html" />
    <link rel="prev" title="Welcome to python-docar’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to python-docar’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">python-docar 0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="documents">
<h1>Documents<a class="headerlink" href="#documents" title="Permalink to this headline">¶</a></h1>
<div class="highlight-python"><pre>                  +----------+
                  | Backends | &lt;- apply map fields
                  +----------+ -+
                       |        |   +------+
                    - fetch     +-- | From | &lt;- fetch/apply fetch fields
                    - save      |   | Dict |
                    - delete    |   +------+
                       |        |
+--------+        +----------+  |   +------+
|fetch   |-+----&gt; |          | -+-- |  To  | -&gt; render/apply render fields
|update  |-+      | Document |      | Dict | -&gt; save/apply save fields
|save    |-+      |          |      +------+
|delete  |-+      +----------+
|render  |-+
|validate|-+
|uri     |-+
+--------+</pre>
</div>
<dl class="class">
<dt id="docar.Document">
<em class="property">class </em><tt class="descclassname">docar.</tt><tt class="descname">Document</tt><a class="headerlink" href="#docar.Document" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>All documents inherit from the <a class="reference internal" href="#docar.Document" title="docar.Document"><tt class="xref py py-class docutils literal"><span class="pre">docar.Document</span></tt></a> class. A resource maps
to a backend, see the section about <a href="#id1"><span class="problematic" id="id2">`Backends`_</span></a> for more information. Each
attribute of the document maps to a field of the resource in the backend. See
the section about <a href="#id3"><span class="problematic" id="id4">`Fields`_</span></a> for more informations</p>
<div class="section" id="document-methods">
<h2>Document methods<a class="headerlink" href="#document-methods" title="Permalink to this headline">¶</a></h2>
<p>A document exposes a simple API:</p>
<dl class="method">
<dt id="Document.fetch">
<tt class="descclassname">Document.</tt><tt class="descname">fetch</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Document.fetch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Fetch the resource from the backend and bind the document to this resource.</p>
<dl class="method">
<dt id="Document.save">
<tt class="descclassname">Document.</tt><tt class="descname">save</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Document.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>If the document does not exist on the backend, create it. Otherwise update the
existing backend with information stored in the current document.</p>
<dl class="method">
<dt id="Document.delete">
<tt class="descclassname">Document.</tt><tt class="descname">delete</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Document.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Delete the current resource from the backend.</p>
<dl class="method">
<dt id="Document.update">
<tt class="descclassname">Document.</tt><tt class="descname">update</tt><big>(</big><em>changes</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Document.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Update a document from a dictionary.</p>
<dl class="method">
<dt id="Document.uri">
<tt class="descclassname">Document.</tt><tt class="descname">uri</tt><big>(</big><big>)</big><a class="headerlink" href="#Document.uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The <a class="reference internal" href="#Document.uri" title="Document.uri"><tt class="xref py py-meth docutils literal"><span class="pre">uri()</span></tt></a> method returns the resource identifier of this
resource. This method needs to be implemented by the user. It is used to
render the link to itself. The return value of this method should always be the
full location of the resource as a string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">NumberField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">uri</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;http://location/articles/</span><span class="si">%s</span><span class="s">/&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
</pre></div>
</div>
<dl class="method">
<dt id="Document.validate">
<tt class="descclassname">Document.</tt><tt class="descname">validate</tt><big>(</big><big>)</big><a class="headerlink" href="#Document.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Validate the fields of the document. It validates the correct datatypes of the
fields. You can also attach validator functions to a fields that can validate
additional aspects of the field.</p>
</div>
<div class="section" id="meta">
<h2><tt class="docutils literal"><span class="pre">Meta</span></tt><a class="headerlink" href="#meta" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Meta">
<em class="property">class </em><tt class="descname">Meta</tt><a class="headerlink" href="#Meta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The behaviour of the document can be controlled by setting attributes on the
document&#8217;s <a class="reference internal" href="#Meta" title="Meta"><tt class="xref py py-class docutils literal"><span class="pre">Meta</span></tt></a> class.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">NumberField</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">identifier</span> <span class="o">=</span> <span class="s">&#39;id&#39;</span>
</pre></div>
</div>
<p>There are only a few options available at the moment:</p>
<dl class="attribute">
<dt id="Meta.identifier">
<tt class="descclassname">Meta.</tt><tt class="descname">identifier</tt><a class="headerlink" href="#Meta.identifier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Specify the field name, that serves as an unique identifier for this document.
The field is specified as a simple string. If you want to use more than one
field as identifiers, write them as a list of strings:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Every document needs to specify an identifer. Every resource should be uniquely
selectable by the value of those fields. The default identifier is named <tt class="docutils literal"><span class="pre">id</span></tt>.</p>
<dl class="attribute">
<dt id="Meta.backend_type">
<tt class="descclassname">Meta.</tt><tt class="descname">backend_type</tt><a class="headerlink" href="#Meta.backend_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Choose the backend this document should connect to. See the section about
<a href="#id5"><span class="problematic" id="id6">`Backends`_</span></a> below for details. The default backend is the <a href="#id7"><span class="problematic" id="id8">`Django backend`_</span></a>.</p>
<dl class="attribute">
<dt id="Meta.model">
<tt class="descclassname">Meta.</tt><tt class="descname">model</tt><a class="headerlink" href="#Meta.model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This option is only useful for documents connecting to the <a href="#id9"><span class="problematic" id="id10">`Django Backend`_</span></a>.
It takes a class as argument and specifies which django model use. The argument
must be a class and <strong>can&#8217;t</strong> be a string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">djangoapp.models</span> <span class="kn">import</span> <span class="n">ArticleModel</span>

<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">NumberField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">ArticleModel</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="Meta.context">
<tt class="descclassname">Meta.</tt><tt class="descname">context</tt><a class="headerlink" href="#Meta.context" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>A list of strings that specify which additional context variables are used by
this document. See the sections about <a href="#id11"><span class="problematic" id="id12">`Document Context`_</span></a> for more information.</p>
</div>
</div>
<div class="section" id="collections">
<h1>Collections<a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h1>
<div class="highlight-python"><pre>                                             +-&gt; Document
                                             |
                         +--&gt; collection_set +-&gt; Document
                         |    -------------- |
                         |                   +-&gt; Document
                         |
+-------+      +------------+     +------+
|add    |-+--&gt; |            | --&gt; |  To  | -&gt; render
|del    |-+    | Collection |     | Dict |
|render |-+    |            |     +------+
+-------+      +------------+</pre>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Documents</a><ul>
<li><a class="reference internal" href="#document-methods">Document methods</a></li>
<li><a class="reference internal" href="#meta"><tt class="docutils literal"><span class="pre">Meta</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#collections">Collections</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to python-docar&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fields.html"
                        title="next chapter">Fields</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/documents.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to python-docar’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">python-docar 0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Christo Buschek.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>