

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Manipulating Tabular Arrays &mdash; tabular v0.0.8 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="tabular v0.0.8 documentation" href="../index.html" />
    <link rel="next" title="Column hierarchies and the coloring attribute" href="hierarchical.html" />
    <link rel="prev" title="Input and Output" href="io.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="hierarchical.html" title="Column hierarchies and the coloring attribute"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="io.html" title="Input and Output"
             accesskey="P">previous</a> |</li>
    
        <li><a href="../index.html">tabular</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="manipulating-tabular-arrays">
<span id="operations"></span><h1>Manipulating Tabular Arrays<a class="headerlink" href="#manipulating-tabular-arrays" title="Permalink to this headline">¶</a></h1>
<p>There are lots of things you might want to do with data in a tabarray, including indexing, filtering, reassignment, sort, mathematical operations, record and column addition/deletion/renaming, concatenation, and various spreadsheet manipulations.    To follow the examples below, start by importing Tabular and constructing a tabarray.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tabular</span> <span class="kn">as</span> <span class="nn">tb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Recs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;North&#39;</span><span class="p">,</span> <span class="s">&#39;Service&#39;</span><span class="p">,</span> <span class="mf">44.497368897699261</span><span class="p">,</span> <span class="mi">85937</span><span class="p">),</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305),</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 46.304921839816174, 90568),</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 12.428147250824761, 52493),</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 7.3632321953949864, 85280),</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578),</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 53.272407154429423, 11823),</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 56.68070233253686, 32669),</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 5.9745703176360525, 81417),</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229),</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 78.067752261015244, 62454),</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 19.703894654017773, 63346),</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 32.015715993438917, 72732),</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 10.914876835171071, 23455),</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 41.714531295305711, 85876),</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 81.458571751676629, 43660)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">records</span> <span class="o">=</span> <span class="n">Recs</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="section" id="indexing-and-filtering">
<span id="id1"></span><h2>Indexing and Filtering<a class="headerlink" href="#indexing-and-filtering" title="Permalink to this headline">¶</a></h2>
<p>In general, indexing, filtering, and assignment work as they do for regular NumPy ndarrays (see <a class="reference external" href="http://docs.scipy.org/doc/numpy/user/basics.indexing.html">Numpy Indexing</a>).</p>
<p>Individual columns or groups of columns can be selected:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span>                                                 <span class="c">#select &#39;Amount&#39; column</span>
<span class="go">array([ 44.4973689 ,  88.75254966,  46.30492184,  12.42814725,</span>
<span class="go">         7.3632322 ,   2.35086846,  53.27240715,  56.68070233,</span>
<span class="go">         5.97457032,  93.84094262,  78.06775226,  19.70389465,</span>
<span class="go">        32.01571599,  10.91487684,  41.7145313 ,  81.45857175])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[[</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">]]</span>                                  <span class="c">#select both &#39;Amount&#39; and &#39;Population&#39; columns</span>
<span class="go">tabarray([(44.497368897699261, 85937), (88.752549661587452, 305), (46.304921839816174, 90568),</span>
<span class="go">       .  .  .</span>
<span class="go">       (32.015715993438917, 72732), (10.914876835171071, 23455),</span>
<span class="go">       (41.714531295305711, 85876), (81.458571751676629, 43660)],</span>
<span class="go">      dtype=[(&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Population&#39;, &#39;&lt;i4&#39;)])</span>
</pre></div>
</div>
<p>Individual rows or sets of rows can be selected:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                                                        <span class="c">#select row 0</span>
<span class="go"> (&#39;North&#39;, &#39;Service&#39;, 44.497368897699261, 85937)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span>                                                      <span class="c">#select rows 4 through 8</span>
<span class="go">[(&#39;South&#39;, &#39;Service&#39;, 7.3632321953949864, 85280)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 53.272407154429423, 11823)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 56.68070233253686, 32669)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 5.9745703176360525, 81417)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">14</span><span class="p">]]</span>                                               <span class="c">#select rows 1,5,9,and 14</span>
<span class="go">[(&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229)</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 41.714531295305711, 85876)]</span>
</pre></div>
</div>
<p>Rich, row-by-row comparisons can be made for columns, returning boolean arrays.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Manufacturing&#39;</span>                              <span class="c">#compare to a scalar constant value</span>
<span class="go">array([False,  True, False, False, False,  True, False, False, False,</span>
<span class="go">        True, False, False, False,  True, False, False], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">.</span><span class="mo">0001</span><span class="o">*</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Population&#39;</span><span class="p">]</span>                         <span class="c">#compare one column to another array of the same length</span>
<span class="go">array([ True,  True,  True,  True, False, False,  True,  True, False,</span>
<span class="go">        True,  True,  True,  True,  True,  True,  True], dtype=bool)</span>
</pre></div>
</div>
<p>The resulting boolean arrays can be used to <cite>select</cite> rows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">X</span><span class="p">[</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Manufacturing&#39;</span><span class="p">]</span>                     <span class="c">#get rows where &quot;Sector&quot; entry is &quot;Manufacturing&quot;</span>
<span class="go">[(&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 10.914876835171071, 23455)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">X</span><span class="p">[</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">]</span>                                   <span class="c">#get rows where &quot;Amount&quot; entry exceeds 50</span>
<span class="go">[(&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 53.272407154429423, 11823)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 56.68070233253686, 32669)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229)</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 78.067752261015244, 62454)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 81.458571751676629, 43660)]</span>
</pre></div>
</div>
<p>Logical connectives &#8216;AND&#8217; (&amp;) and &#8216;OR&#8217; (|) can be used to combine boolean arrays for more sophisticated filtering:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[(</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Manufacturing&#39;</span><span class="p">)]</span>    <span class="c">#select rows where &quot;Amount&quot; &gt; 50 and &quot;Sector&quot; = &quot;Manufacturing&quot;</span>
<span class="go">[(&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[((</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Manufacturing&#39;</span><span class="p">))</span> <span class="o">|</span> <span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Population&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">90000</span><span class="p">)]</span>
<span class="go">[(&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 46.304921839816174, 90568)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229)]</span>
</pre></div>
</div>
<p>The contents of a tabarray can be changed by assignment, both for individual values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">44.497</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">51.004</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span>
<span class="go">51.004</span>
</pre></div>
</div>
<p>as well as whole columns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span>
<span class="go">array([  61.004     ,   98.75254966,   56.30492184,   22.42814725,</span>
<span class="go">         17.3632322 ,   12.35086846,   63.27240715,   66.68070233,</span>
<span class="go">         15.97457032,  103.84094262,   88.06775226,   29.70389465,</span>
<span class="go">         42.01571599,   20.91487684,   51.7145313 ,   91.45857175])</span>
</pre></div>
</div>
<p>Row and column selection features can be combined:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">][</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Manufacturing&#39;</span><span class="p">]</span>                 <span class="c">#get &quot;Amount&quot; entries for rows where &quot;Sector&quot; entry is &quot;Manufacturing&quot;</span>
<span class="go">array([  98.75254966,   12.35086846,  103.84094262,   20.91487684])</span>
</pre></div>
</div>
<p>and also combined with assignments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">][</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Manufacturing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">][</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Manufacturing&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">10</span>              <span class="c">#add 10 to all values selected above</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span>
<span class="go">array([ 61.004     ,  88.75254966,  56.30492184,  22.42814725,</span>
<span class="go">        17.3632322 ,   2.35086846,  63.27240715,  66.68070233,</span>
<span class="go">        15.97457032,  93.84094262,  88.06775226,  29.70389465,</span>
<span class="go">        42.01571599,  10.91487684,  51.7145313 ,  91.45857175])</span>
</pre></div>
</div>
</div>
<div class="section" id="sorting">
<span id="id2"></span><h2>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h2>
<p>The <cite>sort</cite> method is also inherited from the NumPy sort method for ndarrays with structured dtype.  This is an in-place method, and so modifies the original tabarray!  Use the <cite>copy</cite> method first if you do not want this to happen.  See the documentation for the equivalent <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.sort.html">numpy.sort</a> function.   The <cite>order</cite> argument determines the precedence order on which columns are sorted.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span>
<span class="go">[(&#39;East&#39;, &#39;Education&#39;, 23.097478581186881, 78073)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 10.52554515403321, 6751)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 87.72136064848614, 53744)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 54.896677290366689, 32747)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 57.60705040663634, 53327)</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 41.550376687594138, 7896)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 78.486819271428658, 39440)</span>
<span class="go"> (&#39;North&#39;, &#39;Service&#39;, 11.568675158203657, 80672)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 31.402298595542256, 39531)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 79.898317595005963, 70297)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 84.012379396498261, 77165)</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 62.1631456237237, 70377)</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 68.727826108077394, 30589)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 81.726623074753874, 63049)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 54.932402758880414, 84733)</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 55.281648099477955, 98990)]</span>
</pre></div>
</div>
</div>
<div class="section" id="matrix-math">
<h2>Matrix Math<a class="headerlink" href="#matrix-math" title="Permalink to this headline">¶</a></h2>
<p>Sets of colums of a uniform data type can be &#8220;extracted&#8221; into NumPy arrays, on which NumPy mathematical operations can be performed.   There are a huge number of mathematical operations provided by NumPy (see <a class="reference external" href="http://www.scipy.org/Numpy_Functions_by_Category">Numpy Functions</a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">[[</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">array([[  6.10040000e+01,   8.59370000e+04],</span>
<span class="go">       [  8.87525497e+01,   3.05000000e+02],</span>
<span class="go">       [  5.63049218e+01,   9.05680000e+04],</span>
<span class="go">       [  2.24281473e+01,   5.24930000e+04],</span>
<span class="go">       [  1.73632322e+01,   8.52800000e+04],</span>
<span class="go">       [  2.35086846e+00,   9.55780000e+04],</span>
<span class="go">       [  6.32724072e+01,   1.18230000e+04],</span>
<span class="go">       [  6.66807023e+01,   3.26690000e+04],</span>
<span class="go">       [  1.59745703e+01,   8.14170000e+04],</span>
<span class="go">       [  9.38409426e+01,   2.62290000e+04],</span>
<span class="go">       [  8.80677523e+01,   6.24540000e+04],</span>
<span class="go">       [  2.97038947e+01,   6.33460000e+04],</span>
<span class="go">       [  4.20157160e+01,   7.27320000e+04],</span>
<span class="go">       [  1.09148768e+01,   2.34550000e+04],</span>
<span class="go">       [  5.17145313e+01,   8.58760000e+04],</span>
<span class="go">       [  9.14585718e+01,   4.36600000e+04]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">X</span><span class="p">[[</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">[[ 0.82159043  0.8309893   0.95518941 -0.18455713 -0.89482426  0.83460974</span>
<span class="go">  -0.9637142  -0.83771545  0.92554653  0.20619182  0.41856689 -0.00612231</span>
<span class="go">   0.74354961  0.84467109 -0.28863192 -0.97360648]</span>
<span class="go"> [ 0.42620037 -0.91364508  0.92530249 -0.77420816  0.51045049  0.68178561</span>
<span class="go">  -0.19463748  0.76642354 -0.12236557 -0.85562501 -0.62837127 -0.76810546</span>
<span class="go">   0.06296234 -0.01048714  0.82463985 -0.37838302]]</span>
</pre></div>
</div>
</div>
<div class="section" id="row-and-column-operations">
<span id="id3"></span><h2>Row and Column Operations<a class="headerlink" href="#row-and-column-operations" title="Permalink to this headline">¶</a></h2>
<p><strong>Adding Records</strong></p>
<p>Add a list of records to a tabarray using the <cite>addrecords</cite> method.  This method produces a new tabarray.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">addrecords</span><span class="p">((</span><span class="s">&#39;West&#39;</span><span class="p">,</span><span class="s">&#39;Surfing&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10000</span><span class="p">))</span>               <span class="c">#create new array with additional row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Y</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
<span class="go">[(&#39;West&#39;, &#39;Healthcare&#39;, 91.458571751676629, 43660)</span>
<span class="go"> (&#39;West&#39;, &#39;Surfing&#39;, 10.0, 10000)]</span>
</pre></div>
</div>
<p><strong>Adding Columns</strong></p>
<p>To add a column to an existing tabarray, use the <cite>addcols</cite> method.  This method produces a new array:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Importance</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">addcols</span><span class="p">([</span><span class="n">Importance</span><span class="p">],</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Importance&#39;</span><span class="p">])</span>            <span class="c">#create new array with new &quot;Importance&quot; column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
<span class="go">(&#39;Region&#39;, &#39;Sector&#39;, &#39;Amount&#39;, &#39;Population&#39;, &#39;Importance&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="p">[</span><span class="s">&#39;Importance&#39;</span><span class="p">]</span>
<span class="go">array([3, 9, 1, 3, 4, 8, 0, 9, 1, 7, 6, 6, 7, 4, 3, 6])</span>
</pre></div>
</div>
<p><strong>Deleting Columns</strong></p>
<p>To delete a column or set of columns specified by column and/or coloring names, use the deletecols method.  Like <cite>addcols</cite>, this method produces a new array.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">deletecols</span><span class="p">([</span><span class="s">&#39;Population&#39;</span><span class="p">])</span>                            <span class="c">#create new array with &quot;Population&quot; column deleted</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span>
<span class="go">tabarray([(&#39;North&#39;, &#39;Service&#39;, 44.497368897699261),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452),</span>
<span class="go">       (&#39;North&#39;, &#39;Education&#39;, 46.304921839816174),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 12.428147250824761),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 7.3632321953949864),</span>
<span class="go">       (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782),</span>
<span class="go">       (&#39;South&#39;, &#39;Education&#39;, 53.272407154429423),</span>
<span class="go">       (&#39;South&#39;, &#39;Healthcare&#39;, 56.68070233253686),</span>
<span class="go">       (&#39;East&#39;, &#39;Service&#39;, 5.9745703176360525),</span>
<span class="go">       (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858),</span>
<span class="go">       (&#39;East&#39;, &#39;Education&#39;, 78.067752261015244),</span>
<span class="go">       (&#39;East&#39;, &#39;Healthcare&#39;, 19.703894654017773),</span>
<span class="go">       (&#39;West&#39;, &#39;Service&#39;, 32.015715993438917),</span>
<span class="go">       (&#39;West&#39;, &#39;Manufacturing&#39;, 10.914876835171071),</span>
<span class="go">       (&#39;West&#39;, &#39;Education&#39;, 41.714531295305711),</span>
<span class="go">       (&#39;West&#39;, &#39;Healthcare&#39;, 81.458571751676629)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>The <cite>deletecols</cite> method interacts with the <cite>coloring</cite> attribute of the tabarray, removing deleted column names from any colors that contained those names (and removing empty colors rendered empty).</p>
<p><strong>Renaming Columns</strong></p>
<p>To rename a column, use the <cite>renamecol</cite> method.   This method works in-place.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="o">.</span><span class="n">renamecol</span><span class="p">(</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Industry&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span>
<span class="go">tabarray([(&#39;North&#39;, &#39;Service&#39;, 44.497368897699261, 85937),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305),</span>
<span class="go">       (&#39;North&#39;, &#39;Education&#39;, 46.304921839816174, 90568),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 12.428147250824761, 52493),</span>
<span class="go">       .  .  .</span>
<span class="go">       (&#39;West&#39;, &#39;Education&#39;, 41.714531295305711, 85876),</span>
<span class="go">       (&#39;West&#39;, &#39;Healthcare&#39;, 81.458571751676629, 43660)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Industry&#39;, &#39;|S13&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Population&#39;, &#39;&lt;i4&#39;)])</span>
</pre></div>
</div>
<p>The <cite>renamecol</cite> method modifies the <cite>coloring</cite> attribute to reflect the new name of the column in any colors that contain the original column.</p>
<p><strong>Row-wise Concatenation</strong></p>
<p>The &#8220;rowstack&#8221; method concatenates arrays with identical column names and data types along the &#8220;vertical&#8221; (row) axis.   For instance, suppose we have some more rows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Recs2</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;Australia&#39;</span><span class="p">,</span> <span class="s">&#39;Service&#39;</span><span class="p">,</span> <span class="mf">62.78911616553178</span><span class="p">,</span> <span class="mi">18909</span><span class="p">),</span>
<span class="go"> (&#39;Australia&#39;, &#39;Manufacturing&#39;, 43.237004162761536, 89819),</span>
<span class="go"> (&#39;Australia&#39;, &#39;Education&#39;, 7.3179911226685768, 80509),</span>
<span class="go"> (&#39;Australia&#39;, &#39;Healthcare&#39;, 43.786780196357846, 2538),</span>
<span class="go"> (&#39;Africa&#39;, &#39;Service&#39;, 80.145538085436243, 6139),</span>
<span class="go"> (&#39;Africa&#39;, &#39;Manufacturing&#39;, 75.418977039990594, 42248),</span>
<span class="go"> (&#39;Africa&#39;, &#39;Education&#39;, 44.568168511082121, 35601),</span>
<span class="go"> (&#39;Africa&#39;, &#39;Healthcare&#39;, 56.85900369948218, 53300),</span>
<span class="go"> (&#39;Asia&#39;, &#39;Service&#39;, 28.204920225419684, 68860),</span>
<span class="go"> (&#39;Asia&#39;, &#39;Manufacturing&#39;, 89.439637471772429, 52956),</span>
<span class="go"> (&#39;Asia&#39;, &#39;Education&#39;, 83.189892771508084, 65450),</span>
<span class="go"> (&#39;Asia&#39;, &#39;Healthcare&#39;, 44.137049956174444, 43584),</span>
<span class="go"> (&#39;Europe&#39;, &#39;Service&#39;, 28.416082788965149, 52706),</span>
<span class="go"> (&#39;Europe&#39;, &#39;Manufacturing&#39;, 77.983749310614229, 59061),</span>
<span class="go"> (&#39;Europe&#39;, &#39;Education&#39;, 80.596916611665861, 14617),</span>
<span class="go"> (&#39;Europe&#39;, &#39;Healthcare&#39;, 95.823135356930905, 2341)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">records</span> <span class="o">=</span> <span class="n">Recs2</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">X2</span><span class="p">)</span>
<span class="go">16</span>
</pre></div>
</div>
<p>Then, we can concatenate <cite>X</cite> and <cite>X2</cite> (row-wise) like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">rowstack</span><span class="p">(</span><span class="n">X2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>
<span class="go">32</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Y</span>
<span class="go">[(&#39;North&#39;, &#39;Service&#39;, 44.497368897699261, 85937)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 46.304921839816174, 90568)</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 12.428147250824761, 52493)</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 7.3632321953949864, 85280)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 53.272407154429423, 11823)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 56.68070233253686, 32669)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 5.9745703176360525, 81417)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229)</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 78.067752261015244, 62454)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 19.703894654017773, 63346)</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 32.015715993438917, 72732)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 10.914876835171071, 23455)</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 41.714531295305711, 85876)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 81.458571751676629, 43660)</span>
<span class="go"> (&#39;Australia&#39;, &#39;Service&#39;, 62.78911616553178, 18909)</span>
<span class="go"> (&#39;Australia&#39;, &#39;Manufacturing&#39;, 43.237004162761536, 89819)</span>
<span class="go"> (&#39;Australia&#39;, &#39;Education&#39;, 7.3179911226685768, 80509)</span>
<span class="go"> (&#39;Australia&#39;, &#39;Healthcare&#39;, 43.786780196357846, 2538)</span>
<span class="go"> (&#39;Africa&#39;, &#39;Service&#39;, 80.145538085436243, 6139)</span>
<span class="go"> (&#39;Africa&#39;, &#39;Manufacturing&#39;, 75.418977039990594, 42248)</span>
<span class="go"> (&#39;Africa&#39;, &#39;Education&#39;, 44.568168511082121, 35601)</span>
<span class="go"> (&#39;Africa&#39;, &#39;Healthcare&#39;, 56.85900369948218, 53300)</span>
<span class="go"> (&#39;Asia&#39;, &#39;Service&#39;, 28.204920225419684, 68860)</span>
<span class="go"> (&#39;Asia&#39;, &#39;Manufacturing&#39;, 89.439637471772429, 52956)</span>
<span class="go"> (&#39;Asia&#39;, &#39;Education&#39;, 83.189892771508084, 65450)</span>
<span class="go"> (&#39;Asia&#39;, &#39;Healthcare&#39;, 44.137049956174444, 43584)</span>
<span class="go"> (&#39;Europe&#39;, &#39;Service&#39;, 28.416082788965149, 52706)</span>
<span class="go"> (&#39;Europe&#39;, &#39;Manufacturing&#39;, 77.983749310614229, 59061)</span>
<span class="go"> (&#39;Europe&#39;, &#39;Education&#39;, 80.596916611665861, 14617)</span>
<span class="go"> (&#39;Europe&#39;, &#39;Healthcare&#39;, 95.823135356930905, 2341)]</span>
</pre></div>
</div>
<p>Multiple tabarrays can be stacked by listing them:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">rowstack</span><span class="p">([</span><span class="n">X</span><span class="p">,</span><span class="n">X2</span><span class="p">])</span>
</pre></div>
</div>
<p>produces a tabarray with two copies of <cite>X</cite> concatenated with a copy of <cite>X2</cite>.</p>
<p>The <cite>rowstack</cite> method can handle the case where there are differing column names in the tabarrays being concatenated by removing the non-common attributes, filling in with null values, or throwing an error (the behavior is selected as a function of the <cite>mode</cite> parameter).  See <a class="reference internal" href="../modules/tabular.spreadsheet.html#tabular.spreadsheet.rowstack" title="tabular.spreadsheet.rowstack"><tt class="xref py py-func docutils literal"><span class="pre">tabular.spreadsheet.rowstack()</span></tt></a> for more detailed information.   The <cite>rowstack</cite> method interacts properly with the <cite>coloring</cite> attribute by retaining whatever portions of the colorings of the original arrays still make sense for the resulting stacked array.</p>
<p><strong>Column-wise Concatenation</strong></p>
<p>The &#8220;colstack&#8221; method concatenates arrays with disjoint column names but identical lengths along the &#8220;horizontal&#8221; (column) axis.    For instance, suppose we&#8217;re given some additional columns of data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s">&#39;Yes&#39;</span><span class="p">,</span><span class="s">&#39;No&#39;</span><span class="p">])[</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,))]],</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Importance&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span>
<span class="go">tabarray([(0.42263974346204458, &#39;No&#39;), (0.35687607117324249, &#39;Yes&#39;),</span>
<span class="go">       (0.4972286192541584, &#39;No&#39;), (0.37761474850679355, &#39;No&#39;),</span>
<span class="go">       (0.9481374129174398, &#39;No&#39;), (0.22866203600097135, &#39;No&#39;),</span>
<span class="go">       (0.92050941713548973, &#39;No&#39;), (0.39013443361379574, &#39;Yes&#39;),</span>
<span class="go">       (0.62542365756991358, &#39;No&#39;), (0.082422464992163325, &#39;Yes&#39;),</span>
<span class="go">       (0.60083950050239943, &#39;No&#39;), (0.74672726077208473, &#39;Yes&#39;),</span>
<span class="go">       (0.38234622821972242, &#39;Yes&#39;), (0.88061266623705603, &#39;Yes&#39;),</span>
<span class="go">       (0.29046395700065586, &#39;No&#39;), (0.14818747463117454, &#39;No&#39;)],</span>
<span class="go">      dtype=[(&#39;Importance&#39;, &#39;&lt;f8&#39;), (&#39;Modernized&#39;, &#39;|S3&#39;)])</span>
</pre></div>
</div>
<p>Then we can concatenate <cite>X</cite> and <cite>Z</cite> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">colstack</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span>
<span class="go">tabarray([ (&#39;North&#39;, &#39;Service&#39;, 44.497368897699261, 85937, 0.42263974346204458, &#39;No&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305, 0.35687607117324249, &#39;Yes&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Education&#39;, 46.304921839816174, 90568, 0.4972286192541584, &#39;No&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 12.428147250824761, 52493, 0.37761474850679355, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 7.3632321953949864, 85280, 0.9481374129174398, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578, 0.22866203600097135, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Education&#39;, 53.272407154429423, 11823, 0.92050941713548973, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Healthcare&#39;, 56.68070233253686, 32669, 0.39013443361379574, &#39;Yes&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Service&#39;, 5.9745703176360525, 81417, 0.62542365756991358, &#39;No&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229, 0.082422464992163325, &#39;Yes&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Education&#39;, 78.067752261015244, 62454, 0.60083950050239943, &#39;No&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Healthcare&#39;, 19.703894654017773, 63346, 0.74672726077208473, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Service&#39;, 32.015715993438917, 72732, 0.38234622821972242, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Manufacturing&#39;, 10.914876835171071, 23455, 0.88061266623705603, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Education&#39;, 41.714531295305711, 85876, 0.29046395700065586, &#39;No&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Healthcare&#39;, 81.458571751676629, 43660, 0.14818747463117454, &#39;No&#39;)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Population&#39;, &#39;&lt;i4&#39;), (&#39;Importance&#39;, &#39;&lt;f8&#39;), (&#39;Modernized&#39;, &#39;|S3&#39;)])</span>
</pre></div>
</div>
<p>Multiple tabarrays can be stacked by listing them in the argument to the <cite>colstack</cite> method, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="o">.</span><span class="n">colstack</span><span class="p">([</span><span class="n">Z1</span><span class="p">,</span><span class="n">Z2</span><span class="p">,</span><span class="n">Z3</span><span class="p">])</span>
</pre></div>
</div>
<p>The <cite>colstack</cite> method can handle the case where there are some common attributes in the column names of the tabarrays being concatenated,  by selecting the first instance of each common, removing all common columns, renaming all common columns according to a simple convention, or throwing an error (the behavior is selected as a function of the <cite>mode</cite> parameter).  See <a class="reference internal" href="../modules/tabular.spreadsheet.html#tabular.spreadsheet.colstack" title="tabular.spreadsheet.colstack"><tt class="xref py py-func docutils literal"><span class="pre">tabular.spreadsheet.colstack()</span></tt></a> for more detailed information.   The <cite>colstack</cite> method interacts properly with the <cite>coloring</cite> attribute by retaining whatever portions of the colorings of the original arrays still make sense for the resulting stacked array.</p>
</div>
<div class="section" id="replace">
<span id="id4"></span><h2>Replace<a class="headerlink" href="#replace" title="Permalink to this headline">¶</a></h2>
<p>Performs an in-place  &#8220;find and replace&#8221; operation.   The <cite>replace</cite> method is able to replace instances of numerical data types, as well as strings.    There are two modes for string replacement, &#8220;strict replacement&#8221;, with the parameter <cite>strict = True</cite> (this is the default), and &#8220;substring replacement&#8221;, with the paramter <cite>strict = False</cite>.</p>
<p><strong>Strict replacement</strong> (default)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;Education&#39;</span><span class="p">,</span><span class="s">&#39;Taxes&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Y</span>
<span class="go">[(&#39;North&#39;, &#39;Service&#39;, 44.497368897699261, 85937)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 88.752549661587452, 305)</span>
<span class="go"> (&#39;North&#39;, &#39;Taxes&#39;, 46.304921839816174, 90568)</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 12.428147250824761, 52493)</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 7.3632321953949864, 85280)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 2.35086845930782, 95578)</span>
<span class="go"> (&#39;South&#39;, &#39;Taxes&#39;, 53.272407154429423, 11823)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 56.68070233253686, 32669)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 5.9745703176360525, 81417)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 93.840942619447858, 26229)</span>
<span class="go"> (&#39;East&#39;, &#39;Taxes&#39;, 78.067752261015244, 62454)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 19.703894654017773, 63346)</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 32.015715993438917, 72732)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 10.914876835171071, 23455)</span>
<span class="go"> (&#39;West&#39;, &#39;Taxes&#39;, 41.714531295305711, 85876)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 81.458571751676629, 43660)]</span>
</pre></div>
</div>
<p><strong>Substring replacement</strong> (<cite>strict = False</cite>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Y</span>
<span class="go">[(&#39;North&#39;, &#39;SBrvicB&#39;, 17.705551782625339, 97606)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 0.032839567646336665, 81753)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 60.254477174682428, 71685)</span>
<span class="go"> (&#39;North&#39;, &#39;HBalthcarB&#39;, 16.166448331277937, 46748)</span>
<span class="go"> (&#39;South&#39;, &#39;SBrvicB&#39;, 8.9433677467666168, 65083)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 45.823559323609942, 20597)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 80.569583383167782, 73317)</span>
<span class="go"> (&#39;South&#39;, &#39;HBalthcarB&#39;, 58.683132072010615, 27098)</span>
<span class="go"> (&#39;East&#39;, &#39;SBrvicB&#39;, 77.821939745712882, 58469)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 42.098761562516188, 45922)</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 45.091344059180692, 14944)</span>
<span class="go"> (&#39;East&#39;, &#39;HBalthcarB&#39;, 32.469571128425443, 39130)</span>
<span class="go"> (&#39;WBst&#39;, &#39;SBrvicB&#39;, 1.8610008319782101, 30951)</span>
<span class="go"> (&#39;WBst&#39;, &#39;Manufacturing&#39;, 63.734884926329691, 18894)</span>
<span class="go"> (&#39;WBst&#39;, &#39;Education&#39;, 7.7587790567305586, 97876)</span>
<span class="go"> (&#39;WBst&#39;, &#39;HBalthcarB&#39;, 85.300210096855707, 78262)]</span>
</pre></div>
</div>
<p>The <cite>replace</cite> method also has two additional keyword arguments, <cite>rows</cite> and <cite>cols</cite>, which respectively restrict the rows and columns on which the replacement will be made.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">cols</span><span class="o">=</span><span class="s">&#39;Region&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Y</span>
<span class="go">[(&#39;North&#39;, &#39;Service&#39;, 17.705551782625339, 97606)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 0.032839567646336665, 81753)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 60.254477174682428, 71685)</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 16.166448331277937, 46748)</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 8.9433677467666168, 65083)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 45.823559323609942, 20597)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 80.569583383167782, 73317)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 58.683132072010615, 27098)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 77.821939745712882, 58469)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 42.098761562516188, 45922)</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 45.091344059180692, 14944)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 32.469571128425443, 39130)</span>
<span class="go"> (&#39;WBst&#39;, &#39;Service&#39;, 1.8610008319782101, 30951)</span>
<span class="go"> (&#39;WBst&#39;, &#39;Manufacturing&#39;, 63.734884926329691, 18894)</span>
<span class="go"> (&#39;WBst&#39;, &#39;Education&#39;, 7.7587790567305586, 97876)</span>
<span class="go"> (&#39;WBst&#39;, &#39;Healthcare&#39;, 85.300210096855707, 78262)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">X</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;North&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Y</span>
<span class="go">[(&#39;North&#39;, &#39;SBrvicB&#39;, 17.705551782625339, 97606)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 0.032839567646336665, 81753)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 60.254477174682428, 71685)</span>
<span class="go"> (&#39;North&#39;, &#39;HBalthcarB&#39;, 16.166448331277937, 46748)</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 8.9433677467666168, 65083)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 45.823559323609942, 20597)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 80.569583383167782, 73317)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 58.683132072010615, 27098)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 77.821939745712882, 58469)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 42.098761562516188, 45922)</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 45.091344059180692, 14944)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 32.469571128425443, 39130)</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 1.8610008319782101, 30951)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 63.734884926329691, 18894)</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 7.7587790567305586, 97876)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 85.300210096855707, 78262)]</span>
</pre></div>
</div>
<p>The <cite>replace</cite> method does not modify the <cite>coloring</cite> attribute.</p>
</div>
<div class="section" id="aggregation">
<span id="id5"></span><h2>Aggregation<a class="headerlink" href="#aggregation" title="Permalink to this headline">¶</a></h2>
<p><strong>Aggregate</strong></p>
<p>The <cite>aggregate</cite> method collapses a data set into unique values in specified columns, using specified aggregation functions along the other columns.</p>
<p>The columns on which to aggregate are specified by the <cite>On</cite> argument.  The aggregation functions for the other columns are specified by optional <cite>AggFunc</cite>  and <cite>AggFuncDict</cite> arguments.   <cite>AggFunc</cite> can be set to any callable Python object which takes a 1-D numpy array and returns string or numerical values;  if set, <cite>AggFunc</cite> will be applied as the aggregation function for all columns not listed in <cite>On</cite> argument.   <cite>AggFuncDict</cite> is a dictionary of such aggregation functions whose keys are column names not in <cite>On</cite>; if <cite>a</cite> is in <cite>AggFuncDict.keys()</cite>, then <cite>AggFuncDict[a]</cite> is applied as the aggregation function for values in column <cite>a</cite>, overriding the default and <cite>AggFunc</cite> setting.   If <cite>AggFunc</cite> is not set, then any columns not in <cite>On</cite> or <cite>AggFuncDict.keys()</cite> will be aggregated using the default aggregation functions, which are <tt class="docutils literal"><span class="pre">numpy.sum</span></tt> for numerically-typed columns, and <tt class="docutils literal"><span class="pre">''.join</span></tt> for string-typed columns.</p>
<p>The more factors listed in <cite>On</cite> argument, the &#8220;finer&#8221; is the aggregation,
the fewer factors, the &#8220;coarser&#8221; the aggregation.  For example, if:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">On</span> <span class="o">=</span> <span class="s">&#39;A&#39;</span>
</pre></div>
</div>
<p>the resulting tabarray will have one record for each unique value of a in
X[&#8216;A&#8217;], while if On = [&#8216;A&#8217;, &#8216;B&#8217;] then the resulting tabarray will have
one record for each unique (a, b) pair in X[[&#8216;A&#8217;, &#8216;B&#8217;]]</p>
<p>The <cite>AggFunc</cite> argument is a function that specifies how to aggregate the
factors _not_ listed in <cite>On</cite>, e.g. the so-called <cite>Off</cite> columns.  For
example.  For instance, if On = [&#8216;A&#8217;, &#8216;B&#8217;] and <cite>C</cite> is a third column, then</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">AggFunc</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">mean</span>
</pre></div>
</div>
<p>will result in a tabarray containing a <cite>C</cite> column whose values are the
average of the values from the original <cite>C</cite> columns corresponding to each
unique (a, b) pair.</p>
<p>If you want to specify a different aggreagtion method for each <cite>Off</cite> column,
use <cite>AggFuncDict</cite> instead of AggFunc.  <cite>AggFuncDict</cite> is a dictionary of
functions whose keys are column names.  AggFuncDict[C] will be applied to
the C column, AggFuncDict[D] to the D column, etc.   AggFunc and AggFuncDict
can be used simultaneously, with the elements of AggFuncDict overriding
AggFunc for the specified columns.</p>
<p>Using either AggFunc or AggFuncDict, the resulting tabarray has the same
columns as the original tabarray.  Sometimes you want to specify the ability
to create new aggregate columns not corresponding to one specific column in the
original tabarray, and taking data from several.  To achieve this, use the
AggList argument.   AggList is a list of three-element lists of the form:</p>
<blockquote>
<div>(name, func, col_names)</div></blockquote>
<p>where <cite>name</cite> specifies the resulting column name in the aggregated tabarray,
<cite>func</cite> specifies the aggregation function, and <cite>col_names</cite> specifies the
list of columns names from the original tabarray that will be needed to
compute the aggregate values.  (That is, for each unique tuple <cite>t</cite> in the <cite>On</cite>
columns, the subarray of X[col_names] for which X[On] == t is passed to
<cite>func</cite>.)</p>
<p>If an <cite>Off</cite> column is _not_ provided as a key in <cite>AggFuncDict</cite>,
a default aggregator function will be used:  the sum function
for numerical columns, concatenation for string columns.   For instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">On</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">])</span>
<span class="go">No aggregation function provided for [&#39;Amount&#39;, &#39;Population&#39;] so assuming &quot;sum&quot; by default.</span>
<span class="go">No aggregation function provided for [&#39;Sector&#39;] so assuming string concatenation by default.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Y</span>
<span class="go">[ (&#39;East&#39;, &#39;ServiceManufacturingEducationHealthcare&#39;, 197.48161649583523, 158465)</span>
<span class="go"> (&#39;North&#39;, &#39;ServiceManufacturingEducationHealthcare&#39;, 94.159316856232039, 297792)</span>
<span class="go"> (&#39;South&#39;, &#39;ServiceManufacturingEducationHealthcare&#39;, 194.01964252555496, 186095)</span>
<span class="go"> (&#39;West&#39;, &#39;ServiceManufacturingEducationHealthcare&#39;, 158.65487491189418, 225983)]</span>
</pre></div>
</div>
<p>Aggregation with <cite>Sector</cite> column aggregated to single value of &#8220;AllSectors&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">On</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">],</span> <span class="n">AggFuncDict</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;Sector&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="s">&#39;AllSectors&#39;</span><span class="p">})</span>
<span class="go">No aggregation function provided for [&#39;Amount&#39;, &#39;Population&#39;] so assuming &quot;sum&quot; by default.</span>
<span class="go">[(&#39;East&#39;, &#39;AllSectors&#39;, 278.57970406902308, 323710)</span>
<span class="go"> (&#39;North&#39;, &#39;AllSectors&#39;, 113.09165272461399, 194045)</span>
<span class="go"> (&#39;South&#39;, &#39;AllSectors&#39;, 329.83407710678244, 182472)</span>
<span class="go"> (&#39;West&#39;, &#39;AllSectors&#39;, 237.79258099725024, 277014)]</span>
</pre></div>
</div>
<p>Aggregation applying averaging instead of sum to <cite>Amount</cite> column:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">On</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">],</span> <span class="n">AggFuncDict</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;Sector&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="s">&#39;AllSectors&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">:</span><span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">})</span>
<span class="go"> No aggregation function provided for [&#39;Population&#39;] so assuming &quot;sum&quot; by default.</span>
<span class="go">tabarray([(&#39;East&#39;, &#39;AllSectors&#39;, 49.370404123958807, 158465),</span>
<span class="go">       (&#39;North&#39;, &#39;AllSectors&#39;, 23.53982921405801, 297792),</span>
<span class="go">       (&#39;South&#39;, &#39;AllSectors&#39;, 48.504910631388739, 186095),</span>
<span class="go">       (&#39;West&#39;, &#39;AllSectors&#39;, 39.663718727973546, 225983)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S10&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Population&#39;, &#39;&lt;i4&#39;)])</span>
</pre></div>
</div>
<p>Let&#8217;s make a more sophisticated dataset:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Recs2</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s">&#39;North&#39;</span><span class="p">,</span> <span class="s">&#39;Service&#39;</span><span class="p">,</span> <span class="mf">17.705551782625339</span><span class="p">,</span> <span class="mi">97606</span><span class="p">,</span> <span class="mf">0.35190576151889708</span><span class="p">,</span> <span class="s">&#39;Yes&#39;</span><span class="p">)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 0.032839567646336665, 81753, 0.36816843367086127, &#39;No&#39;)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 60.254477174682428, 71685, 0.9533195307298914, &#39;Yes&#39;)</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 16.166448331277937, 46748, 0.37423184119059572, &#39;No&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 8.9433677467666168, 65083, 0.9293990202100757, &#39;Yes&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 45.823559323609942, 20597, 0.9526252717172915, &#39;No&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 80.569583383167782, 73317, 0.8221424769128064, &#39;No&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 58.683132072010615, 27098, 0.64953131538067299, &#39;Yes&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 77.821939745712882, 58469, 0.013217627689902978, &#39;No&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 42.098761562516188, 45922, 0.97669338263308181, &#39;Yes&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 45.091344059180692, 14944, 0.52538935469394132, &#39;No&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 32.469571128425443, 39130, 0.22897697362708525, &#39;No&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 1.8610008319782101, 30951, 0.6173652881052909, &#39;No&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 63.734884926329691, 18894, 0.47942907520062583, &#39;Yes&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 7.7587790567305586, 97876, 0.13371649251748285, &#39;No&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 85.300210096855707, 78262, 0.32432950951279005, &#39;Yes&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">records</span> <span class="o">=</span> <span class="n">Recs2</span><span class="p">,</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">,</span><span class="s">&#39;Importance&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Now, this aggregation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="n">Y</span><span class="o">.</span><span class="n">aggregate</span><span class="p">([</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">],</span><span class="n">AggFunc</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span><span class="n">AggFuncDict</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;Sector&#39;</span><span class="p">:</span><span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">})</span>
</pre></div>
</div>
<p>makes a list of records containg the average values of &#8216;Amount&#8217;, &#8216;Population&#8217;, and &#8216;Importance&#8217;, for each region, separated by modernization status, and shows which sectors are modernized within each region.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Z</span><span class="p">[[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">]]</span>
<span class="go">[(&#39;East&#39;, &#39;Service, Healthcare, Education&#39;, &#39;No&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, &#39;Yes&#39;)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing, Healthcare&#39;, &#39;No&#39;)</span>
<span class="go"> (&#39;North&#39;, &#39;Service, Education&#39;, &#39;Yes&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Education, Manufacturing&#39;, &#39;No&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare, Service&#39;, &#39;Yes&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Service, Education&#39;, &#39;No&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare, Manufacturing&#39;, &#39;Yes&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">]]</span>
<span class="go">tabarray([(&#39;East&#39;, 51.794284977773003, &#39;No&#39;),</span>
<span class="go">       (&#39;East&#39;, 42.098761562516188, &#39;Yes&#39;),</span>
<span class="go">       (&#39;North&#39;, 8.0996439494621377, &#39;No&#39;),</span>
<span class="go">       (&#39;North&#39;, 38.980014478653885, &#39;Yes&#39;),</span>
<span class="go">       (&#39;South&#39;, 63.196571353388862, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, 33.813249909388617, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, 4.8098899443543841, &#39;No&#39;),</span>
<span class="go">       (&#39;West&#39;, 74.517547511592696, &#39;Yes&#39;)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Modernized&#39;, &#39;|S3&#39;)])</span>
</pre></div>
</div>
<p>The <cite>aggregate</cite> method retains the <cite>coloring</cite> attribute of the original tabarray.</p>
<p><strong>Aggregate_in</strong></p>
<p>The <cite>aggregate_in</cite> method takes the aggregate of data set on specified columns, then <em>adds</em> the
resulting rows back into data set to make a composite object
containing both original non-aggregate data rows as well as
the aggregate rows.  This way, you can see the original data as well as the aggregates all in the same dataset.
The rows of the resulting array that represent aggregated rows are distinguished from the non-aggregate rows
by the value in the additional <tt class="docutils literal"><span class="pre">'__aggregates__'</span></tt> column that is attached.</p>
<p>For instance, let <cite>Y</cite> be as constructed above in the examples of the use of <cite>aggregate</cite>.   Then:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="n">Y</span><span class="o">.</span><span class="n">aggregate_in</span><span class="p">([</span><span class="s">&#39;Region&#39;</span><span class="p">],</span><span class="n">AggFuncDict</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;Sector&#39;</span><span class="p">:</span><span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Z</span><span class="p">[[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">]][(</span><span class="n">Z</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;East&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">Z</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;West&#39;</span><span class="p">)]</span>
<span class="go">[(&#39;East&#39;, &#39;Education&#39;, 45.091344059180692)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 32.469571128425443)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 42.098761562516188)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 77.821939745712882)</span>
<span class="go"> (&#39;East&#39;, &#39;Service, Manufacturing, Education, Healthcare&#39;, 197.48161649583523)</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 7.7587790567305586)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 85.300210096855707)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 63.734884926329691)</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 1.8610008319782101)</span>
<span class="go"> (&#39;West&#39;, &#39;Service, Manufacturing, Education, Healthcare&#39;, 158.65487491189418)]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="n">Y</span><span class="o">.</span><span class="n">aggregate_in</span><span class="p">([],</span><span class="n">AggFuncDict</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;Sector&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="s">&#39;AllSectors&#39;</span><span class="p">,</span><span class="s">&#39;Region&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="s">&#39;AllRegions&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span> <span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="s">&#39; and &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tb</span><span class="o">.</span><span class="n">uniqify</span><span class="p">(</span><span class="n">x</span><span class="p">))})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Z</span><span class="p">[[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">]]</span>
<span class="go">[(&#39;North&#39;, &#39;Service&#39;, 17.705551782625339, 97606, &#39;Yes&#39;)</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 0.032839567646336665, 81753, &#39;No&#39;)</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 60.254477174682428, 71685, &#39;Yes&#39;)</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 16.166448331277937, 46748, &#39;No&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 8.9433677467666168, 65083, &#39;Yes&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Manufacturing&#39;, 45.823559323609942, 20597, &#39;No&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Education&#39;, 80.569583383167782, 73317, &#39;No&#39;)</span>
<span class="go"> (&#39;South&#39;, &#39;Healthcare&#39;, 58.683132072010615, 27098, &#39;Yes&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Service&#39;, 77.821939745712882, 58469, &#39;No&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Manufacturing&#39;, 42.098761562516188, 45922, &#39;Yes&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Education&#39;, 45.091344059180692, 14944, &#39;No&#39;)</span>
<span class="go"> (&#39;East&#39;, &#39;Healthcare&#39;, 32.469571128425443, 39130, &#39;No&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Service&#39;, 1.8610008319782101, 30951, &#39;No&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Manufacturing&#39;, 63.734884926329691, 18894, &#39;Yes&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Education&#39;, 7.7587790567305586, 97876, &#39;No&#39;)</span>
<span class="go"> (&#39;West&#39;, &#39;Healthcare&#39;, 85.300210096855707, 78262, &#39;Yes&#39;)</span>
<span class="go"> (&#39;AllRegions&#39;, &#39;AllSectors&#39;, 644.31545078951638, 868335, &#39;Yes and No&#39;)]</span>
</pre></div>
</div>
<p><strong>Further comments</strong></p>
<p>The <cite>aggregate_in</cite> function supports <strong>multiple aggregation</strong>, meaning that
one can first aggregate on one set of factors, then repeat
aggregation on the result for another set of factors, without
the results of the first aggregation interfering the second.  To
achieve this, the method adds (or augments, if already
present), a column called <tt class="docutils literal"><span class="pre">'__aggregates__'</span></tt> specifying on which factors the
rows that are aggregate rows were aggregated.  Rows added
by aggregating on factor <cite>A</cite> (a column in the original data
set) will have <cite>A</cite> in the <tt class="docutils literal"><span class="pre">'__aggregates__'</span></tt> column.  When multiple factors <cite>A1</cite>, <cite>A2</cite> , ... are
aggregated on, the notation is a comma-separated list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;A1,A2,...&#39;</span>
</pre></div>
</div>
<p>This way, when you call <tt class="xref py py-func docutils literal"><span class="pre">tabular.utils.aggregate_in()</span></tt>
again, the function only aggregates on the columns that have
the empty char &#8216;&#8217; in their <tt class="docutils literal"><span class="pre">'__aggregates__'</span></tt> column.</p>
<p>The function also adds (or adds rows to) a &#8216;__color__&#8217; column,
specifying Gray-Scale colors for aggregated
rows that can be used by data viewers for colorizing the  data.   When there are multiple
levels of aggregation, the coarser aggregate groups (e.g. on
fewer factors) get darker gray color then those on finer
aggregate groups (e.g. more factors).</p>
<p>Like the <cite>aggregate</cite> method, the <cite>aggregate_in</cite> method retains the <cite>coloring</cite> attribute of the original tabarray.</p>
</div>
<div class="section" id="pivot">
<span id="id6"></span><h2>Pivot<a class="headerlink" href="#pivot" title="Permalink to this headline">¶</a></h2>
<p>The <cite>pivot</cite> method produces a pivot table of a tabular array.   Intuitively speaking, suppose you have a tabular data set  with two &#8220;reference columns&#8221; such that the records in the data set are uniquely tagged by pairs of values of the two reference columns, and that most (or all) possible pairs of values are present.  This is just like the <cite>Region</cite> and <cite>Sector</cite> columns in the data set <cite>X</cite> above, where all records are tagged by a unique <cite>Region</cite> and <cite>Sector</cite> value, and all 16 possible combinations of the values of <cite>Region</cite> and <cite>Sector</cite> are present.   The  pivoting of the tabular data on the reference columns produces a two-dimensional array with one axis for the first reference column, and the second axis for the other reference column &#8211; filled in at position [x,y] with the data associated with record tagged with (x,y).   The values of the first reference column remain just where they are, in a single column &#8211; but the values of the second reference column are &#8220;transposed&#8221; into column headings.    (See <a class="reference external" href="http://en.wikipedia.org/wiki/Pivot_table">the wikipedia page on pivot tables</a> for more information about pivot tables.)</p>
<p>For example, the pivot of <cite>X</cite> relative to the reference columns <cite>Region</cite> and <cite>Sector</cite> is produced by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The columns in the resulting data set include the first reference column (&#8216;Region&#8217;), together with columns for each value in the original <cite>Sector</cite> and each original (non-reference) attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
<span class="go">(&#39;Region&#39;,</span>
<span class="go"> &#39;Education_Amount&#39;,</span>
<span class="go"> &#39;Healthcare_Amount&#39;,</span>
<span class="go"> &#39;Manufacturing_Amount&#39;,</span>
<span class="go"> &#39;Service_Amount&#39;,</span>
<span class="go"> &#39;Education_Population&#39;,</span>
<span class="go"> &#39;Healthcare_Population&#39;,</span>
<span class="go"> &#39;Manufacturing_Population&#39;,</span>
<span class="go"> &#39;Service_Population&#39;)</span>
</pre></div>
</div>
<p>You can use the pivot table to access information about related datapoints that would be cumbersome with the original dataset:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="p">[[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Healthcare_Amount&#39;</span><span class="p">,</span><span class="s">&#39;Healthcare_Population&#39;</span><span class="p">]]</span>
<span class="go">tabarray([(&#39;East&#39;, 32.469571128425443, 39130),</span>
<span class="go">       (&#39;North&#39;, 16.166448331277937, 46748),</span>
<span class="go">       (&#39;South&#39;, 58.683132072010615, 27098),</span>
<span class="go">       (&#39;West&#39;, 85.300210096855707, 78262)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Healthcare_Amount&#39;, &#39;&lt;f8&#39;), (&#39;Healthcare_Population&#39;, &#39;&lt;i4&#39;)])</span>
</pre></div>
</div>
<p>The <cite>pivot</cite> method uses the <cite>coloring</cite> attribute in a nontrivial way.   Specifically, it produces two orthogonal groupings of colorings, one for the sets of columns associated with each original attribute, and one for sets of columns associated with each value of the second reference column (the one that is &#8220;transposed&#8221;).    For instance, with the pivot table <cite>Y</cite> constructed above, we have:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">.</span><span class="n">coloring</span>
<span class="go">{&#39;Amount&#39;: [&#39;Region&#39;,</span>
<span class="go">            &#39;Education_Amount&#39;,</span>
<span class="go">            &#39;Healthcare_Amount&#39;,</span>
<span class="go">            &#39;Manufacturing_Amount&#39;,</span>
<span class="go">            &#39;Service_Amount&#39;],</span>
<span class="go"> &#39;Population&#39;: [&#39;Region&#39;,</span>
<span class="go">                &#39;Education_Population&#39;,</span>
<span class="go">                &#39;Healthcare_Population&#39;,</span>
<span class="go">                &#39;Manufacturing_Population&#39;,</span>
<span class="go">                &#39;Service_Population&#39;],</span>
<span class="go"> &#39;_Education&#39;: [&#39;Region&#39;, &#39;Education_Amount&#39;, &#39;Education_Population&#39;],</span>
<span class="go"> &#39;_Healthcare&#39;: [&#39;Region&#39;, &#39;Healthcare_Amount&#39;, &#39;Healthcare_Population&#39;],</span>
<span class="go"> &#39;_Manufacturing&#39;: [&#39;Region&#39;,</span>
<span class="go">                    &#39;Manufacturing_Amount&#39;,</span>
<span class="go">                    &#39;Manufacturing_Population&#39;],</span>
<span class="go"> &#39;_Service&#39;: [&#39;Region&#39;, &#39;Service_Amount&#39;, &#39;Service_Population&#39;]}</span>
</pre></div>
</div>
<p>Thus, it is easy to call up relevant subsets of the columns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="p">[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span>
<span class="go">tabarray([ (&#39;East&#39;, 45.091344059180692, 32.469571128425443, 42.098761562516188, 77.821939745712882),</span>
<span class="go">       (&#39;North&#39;, 60.254477174682428, 16.166448331277937, 0.032839567646336665, 17.705551782625339),</span>
<span class="go">       (&#39;South&#39;, 80.569583383167782, 58.683132072010615, 45.823559323609942, 8.9433677467666168),</span>
<span class="go">       (&#39;West&#39;, 7.7587790567305586, 85.300210096855707, 63.734884926329691, 1.8610008319782101)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Education_Amount&#39;, &#39;&lt;f8&#39;), (&#39;Healthcare_Amount&#39;, &#39;&lt;f8&#39;), (&#39;Manufacturing_Amount&#39;, &#39;&lt;f8&#39;), (&#39;Service_Amount&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span> <span class="n">Y</span><span class="p">[</span><span class="s">&#39;_Education&#39;</span><span class="p">]</span>
<span class="go">tabarray([(&#39;East&#39;, 45.091344059180692, 14944),</span>
<span class="go">       (&#39;North&#39;, 60.254477174682428, 71685),</span>
<span class="go">       (&#39;South&#39;, 80.569583383167782, 73317),</span>
<span class="go">       (&#39;West&#39;, 7.7587790567305586, 97876)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Education_Amount&#39;, &#39;&lt;f8&#39;), (&#39;Education_Population&#39;, &#39;&lt;i4&#39;)])</span>
</pre></div>
</div>
</div>
<div class="section" id="join">
<span id="id7"></span><h2>Join<a class="headerlink" href="#join" title="Permalink to this headline">¶</a></h2>
<p>The <cite>join</cite> method combines two or more tabarrays that share common &#8220;key&#8221; column(s).   For instance, let:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">X</span><span class="p">[[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">X</span><span class="p">[[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Population&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p><cite>X1</cite> and <cite>X2</cite> both share two columns, <cite>Region</cite> and <cite>Sector</cite>.    To join the two data sets along their common columns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">X2</span><span class="p">)</span>
<span class="go">Inferring keycols to be: [&#39;Region&#39;, &#39;Sector&#39;]</span>
<span class="go">tabarray([(&#39;East&#39;, &#39;Education&#39;, 27.300913534209194, 57645),</span>
<span class="go">       (&#39;East&#39;, &#39;Healthcare&#39;, 79.315579226927042, 78858),</span>
<span class="go">       (&#39;East&#39;, &#39;Manufacturing&#39;, 11.550256098748601, 55331),</span>
<span class="go">       (&#39;East&#39;, &#39;Service&#39;, 79.895071543085521, 47919),</span>
<span class="go">       (&#39;North&#39;, &#39;Education&#39;, 74.546045755282648, 79467),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 45.973679749219876, 15366),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 43.03577699412331, 46687),</span>
<span class="go">       (&#39;North&#39;, &#39;Service&#39;, 74.066922573923179, 41929),</span>
<span class="go">       (&#39;South&#39;, &#39;Education&#39;, 44.298421981780493, 8654),</span>
<span class="go">       (&#39;South&#39;, &#39;Healthcare&#39;, 2.5495475747373764, 9317),</span>
<span class="go">       (&#39;South&#39;, &#39;Manufacturing&#39;, 96.868543671291746, 72482),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 33.599182645022822, 25850),</span>
<span class="go">       (&#39;West&#39;, &#39;Education&#39;, 11.391185565781647, 62572),</span>
<span class="go">       (&#39;West&#39;, &#39;Healthcare&#39;, 56.204438615569586, 51704),</span>
<span class="go">       (&#39;West&#39;, &#39;Manufacturing&#39;, 67.868100963799833, 81922),</span>
<span class="go">       (&#39;West&#39;, &#39;Service&#39;, 48.381200406027581, 21577)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Population&#39;, &#39;&lt;i4&#39;)])</span>
</pre></div>
</div>
<p>More generally, the basic syntax for using <cite>join</cite> is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Result</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ToMerge</span><span class="p">,</span> <span class="n">keycols</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>where <cite>ToMerge</cite> is a list (or dictionary) of tabular arrays to merge with <cite>X</cite>, and <cite>keycols</cite> is a list of the names of the key columns along which to do the merging.    There are a few restrictions to make the join work:</p>
<ul>
<li><p class="first">each element of <cite>keycol</cite> must be a valid column name in <cite>X</cite> and each array in <cite>ToMerge</cite>, and all of the same data-type.</p>
</li>
<li><dl class="first docutils">
<dt>for each column <cite>col</cite>  in <cite>keycols</cite>, and each array <cite>A</cite> in <cite>ToMerge</cite>, the values in <cite>A[col]</cite> must be unique, e.g. no repeats of values &#8211; and same for <cite>X[col]</cite>.  (Actually this uniqueness doesn&#8217;t have to hold for the first tabarray</dt>
<dd><p class="first last">in L, that is, L[0], but must for all the subsequent ones.)</p>
</dd>
</dl>
</li>
<li><p class="first">the <em>non</em>-key-column column names in each of the arrays must be disjoint from each other &#8211; or disjoint after a renaming (see below).</p>
</li>
</ul>
<p>An error will be thrown if these conditions are not met.</p>
<p>If you don&#8217;t provide a value to <cite>keycols</cite>, the algorithm will attempt to infer which columns should be used by trying to find the largest set of common column names that contain unique values in each array and have the same data type.  An error will be thrown if no such inference can be made.</p>
<p><strong>Renaming of Overlapping Columns</strong></p>
<p>If the non-keycol column names of the arrays overlap, <cite>join</cite> will by default attempt to rename the columns by using a simple convention:  if <cite>ToMerge</cite> is a list, it will append the number in the list to the key associated with the array.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Recs1</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;North&#39;</span><span class="p">,</span> <span class="s">&#39;Service&#39;</span><span class="p">,</span> <span class="mf">80.818237828506838</span><span class="p">),</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 67.065114829789664),</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 31.043641435185123),</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 14.196823211749276),</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 2.3583798234914521)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Recs2</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;North&#39;</span><span class="p">,</span> <span class="s">&#39;Service&#39;</span><span class="p">,</span> <span class="mf">33.069022471086903</span><span class="p">),</span>
<span class="go"> (&#39;North&#39;, &#39;Manufacturing&#39;, 63.155520758932305),</span>
<span class="go"> (&#39;North&#39;, &#39;Education&#39;, 70.80529023970098),</span>
<span class="go"> (&#39;North&#39;, &#39;Healthcare&#39;, 40.301231798570171),</span>
<span class="go"> (&#39;South&#39;, &#39;Service&#39;, 13.095729670745381)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">records</span> <span class="o">=</span> <span class="n">Recs1</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">records</span> <span class="o">=</span> <span class="n">Recs2</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">X2</span><span class="p">,</span><span class="n">keycols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">])</span>
<span class="go">tabarray([(&#39;North&#39;, &#39;Education&#39;, 33.89847350125865, 70.80529023970098),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 64.002383885977835, 40.301231798570171),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 37.952158786266644, 63.155520758932305),</span>
<span class="go">       (&#39;North&#39;, &#39;Service&#39;, 80.925415125696603, 33.069022471086903),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 99.959130671311101, 13.095729670745381)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount_0&#39;, &#39;&lt;f8&#39;), (&#39;Amount_1&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>If the &#8220;Names&#8221; argument is specified, associated a string with each array, the algorithm will append the string to the overlapping columns from that array:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span><span class="o">.</span><span class="n">spreadsheet</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">X1</span><span class="p">,</span><span class="n">X2</span><span class="p">],</span><span class="n">keycols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">],</span><span class="n">Names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;US&#39;</span><span class="p">,</span><span class="s">&#39;China&#39;</span><span class="p">])</span>
<span class="go">rec.array([(&#39;North&#39;, &#39;Education&#39;, 70.80529023970098, 33.89847350125865),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 40.301231798570171, 64.002383885977835),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 63.155520758932305, 37.952158786266644),</span>
<span class="go">       (&#39;North&#39;, &#39;Service&#39;, 33.069022471086903, 80.925415125696603),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 13.095729670745381, 99.959130671311101)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount_US&#39;, &#39;&lt;f8&#39;), (&#39;Amount_China&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>To call this syntax as tabarray method, simply put all the names (even the one for &#8220;self&#8221; array) into the Names argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">X2</span><span class="p">,</span><span class="n">keycols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">],</span><span class="n">Names</span> <span class="o">=</span><span class="p">[</span><span class="s">&#39;US&#39;</span><span class="p">,</span><span class="s">&#39;China&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>You can also pass ToMerge as a dictionary, in which the &#8220;Names&#8221; value is set using the keys of the dictionary:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span><span class="o">.</span><span class="n">spreadsheet</span><span class="o">.</span><span class="n">join</span><span class="p">({</span><span class="s">&#39;US&#39;</span><span class="p">:</span><span class="n">X1</span><span class="p">,</span><span class="s">&#39;China&#39;</span><span class="p">:</span><span class="n">X2</span><span class="p">},</span><span class="n">keycols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">])</span>
<span class="go">rec.array([(&#39;North&#39;, &#39;Education&#39;, 70.80529023970098, 33.89847350125865),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 40.301231798570171, 64.002383885977835),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 63.155520758932305, 37.952158786266644),</span>
<span class="go">       (&#39;North&#39;, &#39;Service&#39;, 33.069022471086903, 80.925415125696603),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 13.095729670745381, 99.959130671311101)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount_China&#39;, &#39;&lt;f8&#39;), (&#39;Amount_US&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>To call this syntax as tabarray method, use the &#8220;selfname&#8221; argument to specify the name of the &#8220;self&#8221; array:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span><span class="o">.</span><span class="n">join</span><span class="p">({</span><span class="s">&#39;China&#39;</span><span class="p">:</span><span class="n">X2</span><span class="p">},</span><span class="n">keycols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">],</span><span class="n">selfname</span><span class="o">=</span><span class="s">&#39;US&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can override the default renaming scheme using the <cite>renamer</cite> keyword:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Result</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ToMerge</span><span class="p">,</span> <span class="n">renamer</span><span class="o">=</span><span class="n">YOUR_RENAMER</span><span class="p">)</span>
</pre></div>
</div>
<p>See code documentation on the proper format of a &#8220;renamer&#8221; callable.</p>
<p><strong>Null values for key column differences</strong></p>
<p>If there are regions of the key columns that are not overlapping between merged arrays, <cite>join</cite> will fill in the relevant entries with null values chosen by default: &#8216;0&#8217; for integer columns, &#8216;0.0&#8217; for float columns, and the empty character (&#8216;&#8217;) for string columns.    To see an example of this, reproduce the six-column array with <cite>Importance</cite> and <cite>Modernized</cite> columns from before:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s">&#39;Yes&#39;</span><span class="p">,</span><span class="s">&#39;No&#39;</span><span class="p">])[</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,))]],</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Importance&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">colstack</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span>
<span class="go">tabarray([ (&#39;North&#39;, &#39;Service&#39;, 13.088778892711028, 67596, 0.18826707730244352, &#39;Yes&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 22.813364479211508, 63338, 0.65626563269756155, &#39;No&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Education&#39;, 81.156429421114566, 30761, 0.31479753652735576, &#39;Yes&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 86.244875598461718, 66485, 0.56735528100658272, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 76.068242217757344, 13494, 0.082452572534186253, &#39;Yes&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Manufacturing&#39;, 34.865213426711293, 60731, 0.61047628783694241, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Education&#39;, 13.819928108417944, 1920, 0.19526920849489482, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Healthcare&#39;, 78.717025896325481, 47973, 0.22455044846971817, &#39;No&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Service&#39;, 11.755228871282952, 48136, 0.61153851819983929, &#39;Yes&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Manufacturing&#39;, 30.665997848975923, 57223, 0.018454588984023856, &#39;Yes&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Education&#39;, 26.128868317404454, 98133, 0.97432988061836912, &#39;No&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Healthcare&#39;, 90.658902866225361, 8020, 0.26506671105041069, &#39;No&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Service&#39;, 26.092797661205747, 90900, 0.4007982236391423, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Manufacturing&#39;, 13.751410698077947, 53004, 0.340288299349086, &#39;No&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Education&#39;, 69.468106938165803, 78210, 0.6184587617606857, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Healthcare&#39;, 18.701554642792274, 90219, 0.8693245113578898, &#39;Yes&#39;)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Population&#39;, &#39;&lt;i4&#39;), (&#39;Importance&#39;, &#39;&lt;f8&#39;), (&#39;Modernized&#39;, &#39;|S3&#39;)])</span>
</pre></div>
</div>
<p>Now, let&#8217;s create non-overlapping sub-arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">X</span><span class="p">[:(</span><span class="mi">3</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span><span class="o">/</span><span class="mi">4</span><span class="p">][[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Amount&#39;</span><span class="p">]]</span> <span class="p">;</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span><span class="p">:][[</span><span class="s">&#39;Region&#39;</span><span class="p">,</span><span class="s">&#39;Sector&#39;</span><span class="p">,</span><span class="s">&#39;Modernized&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">X1</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">X2</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">X1</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">]</span>
<span class="go">[&#39;North&#39; &#39;North&#39; &#39;North&#39; &#39;North&#39; &#39;South&#39; &#39;South&#39; &#39;South&#39; &#39;South&#39; &#39;East&#39;</span>
<span class="go"> &#39;East&#39; &#39;East&#39; &#39;East&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">X2</span><span class="p">[</span><span class="s">&#39;Region&#39;</span><span class="p">]</span>
<span class="go">[&#39;South&#39; &#39;South&#39; &#39;South&#39; &#39;South&#39; &#39;East&#39; &#39;East&#39; &#39;East&#39; &#39;East&#39; &#39;West&#39; &#39;West&#39;</span>
<span class="go"> &#39;West&#39; &#39;West&#39;]</span>
</pre></div>
</div>
<p>And join them:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">X2</span><span class="p">)</span>
<span class="go">tabarray([(&#39;East&#39;, &#39;Education&#39;, 19.343004959799416, &#39;Yes&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Healthcare&#39;, 74.602493370043135, &#39;No&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Manufacturing&#39;, 33.072439090797758, &#39;Yes&#39;),</span>
<span class="go">       (&#39;East&#39;, &#39;Service&#39;, 38.658666249978815, &#39;No&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Education&#39;, 95.520147543817103, &#39;Yes&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Healthcare&#39;, 54.767060883838084, &#39;Yes&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Manufacturing&#39;, 62.18891309580804, &#39;Yes&#39;),</span>
<span class="go">       (&#39;South&#39;, &#39;Service&#39;, 69.998526628861569, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Education&#39;, 0.0, &#39;Yes&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Healthcare&#39;, 0.0, &#39;No&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Manufacturing&#39;, 0.0, &#39;No&#39;),</span>
<span class="go">       (&#39;West&#39;, &#39;Service&#39;, 0.0, &#39;No&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Education&#39;, 46.795409156298184, &#39;&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Healthcare&#39;, 79.47357040970833, &#39;&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Manufacturing&#39;, 21.96065279292241, &#39;&#39;),</span>
<span class="go">       (&#39;North&#39;, &#39;Service&#39;, 3.8287948285793294, &#39;&#39;)],</span>
<span class="go">      dtype=[(&#39;Region&#39;, &#39;|S5&#39;), (&#39;Sector&#39;, &#39;|S13&#39;), (&#39;Amount&#39;, &#39;&lt;f8&#39;), (&#39;Modernized&#39;, &#39;|S3&#39;)])</span>
</pre></div>
</div>
<p>To override the default choices for null values, you can specify the &#8220;nullvals&#8221; keyword argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Result</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ToMerge</span><span class="p">,</span> <span class="n">nullvals</span> <span class="o">=</span> <span class="n">YOUR_NULLVALS</span><span class="p">)</span>
</pre></div>
</div>
<p>See code documentaiton on the proper format for a &#8220;nulllvals&#8221; callable.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo"><a href="http://web.mit.edu/yamins/www/tabular">
  <img class="logo" src="../_static/tabularclear.png" alt="Logo"/>
</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Manipulating Tabular Arrays</a><ul>
<li><a class="reference internal" href="#indexing-and-filtering">Indexing and Filtering</a></li>
<li><a class="reference internal" href="#sorting">Sorting</a></li>
<li><a class="reference internal" href="#matrix-math">Matrix Math</a></li>
<li><a class="reference internal" href="#row-and-column-operations">Row and Column Operations</a></li>
<li><a class="reference internal" href="#replace">Replace</a></li>
<li><a class="reference internal" href="#aggregation">Aggregation</a></li>
<li><a class="reference internal" href="#pivot">Pivot</a></li>
<li><a class="reference internal" href="#join">Join</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="io.html"
                        title="previous chapter">Input and Output</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="hierarchical.html"
                        title="next chapter">Column hierarchies and the <cite>coloring</cite> attribute</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/reference/operations.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="hierarchical.html" title="Column hierarchies and the coloring attribute"
             >next</a> |</li>
        <li class="right" >
          <a href="io.html" title="Input and Output"
             >previous</a> |</li>
    
        <li><a href="../index.html">tabular</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Elaine Angelino and Daniel Yamins.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>