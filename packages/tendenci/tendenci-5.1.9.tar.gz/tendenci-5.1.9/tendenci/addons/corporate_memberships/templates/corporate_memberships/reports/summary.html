{% extends "corporate_memberships/base-wide.html" %}
{% load corporate_memberships_tags %}
{% load i18n %}


{% block extra_head %}
{{ block.super }}
<link rel="stylesheet" href="{{ STATIC_URL }}bootstrap/bootstrap.css">
<style>
    .summary-graph, .corp-stat-table{
        width: 500px;
    }
</style>
{% endblock %}

{% block body %}
<div class="t">
{% corpmemb_nav request.user %}
<h1>{% trans "Corporate Membership Summary" %}</h1>
<div class="corp-mems-wrap corp-stat-table">
    <table>
        <thead>
            <tr>
                <th>{% trans 'Type' %}</th>
                <th>{% trans 'Active' %}</th>
                <th>{% trans 'Pending' %}</th>
                <th>{% trans 'Expired' %}</th>
                <th>{% trans 'Total' %}</th>
            </tr>
        </thead>
        <tbody>
            {% for type in summary %}
            <tr>
                <td>{{ type.type.name }}</td>
                <td>{{ type.active }}</td>
                <td>{{ type.pending }}</td>
                <td>{{ type.expired }}</td>
                <td>{{ type.total }}</td>
            </tr>
            {% endfor %}
            <tr>
                <td>Total</td>
                <td>{{ total.total_active }}</td>
                <td>{{ total.total_pending }}</td>
                <td>{{ total.total_expired }}</td>
                <td>{{ total.total_total }}</td>
            </tr>
        </tbody>
    </table>
</div>
<table style="display: none;" class="highchart"  data-graph-yaxis-1-title-text="count"
data-graph-container=".. .. .highchart-container" data-graph-type="column"
data-graph-datalabels-enabled="1" data-graph-datalabels-color="white"
>
        <caption>Corporate Membership Count by Type</caption>
        <thead>
            <tr>
                <th></th>
                <th data-graph-stack-group="1">{% trans 'Active' %}</th>
                <th data-graph-stack-group="1" data-graph-datalabels-color="blue">{% trans 'Pending' %}</th>
                <th data-graph-stack-group="1" data-graph-datalabels-color="green">{% trans 'Expired' %}</th>
            </tr>
        </thead>
        <tbody>
            {% for type in summary %}
            <tr>
                <td>{{ type.type.name }}</td>
                <td>{{ type.active }}</td>
                <td>{{ type.pending }}</td>
                <td>{{ type.expired }}</td>
            </tr>
            {% endfor %}
            <tr>
                <td>Total</td>
                <td>{{ total.total_active }}</td>
                <td>{{ total.total_pending }}</td>
                <td>{{ total.total_expired }}</td>
            </tr>
        </tbody>
    </table>

<div class="summary-graph">
    <div class="highchart-container">
    </div>
</div>

</div>

{% endblock %}

{% block extra_body %}
    {{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}js/highcharts.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.highchartTable.js"></script>
<script>
   $(document).ready(function() {
  $('table.highchart').highchartTable();
});
</script>
{% endblock extra_body %}
