

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>featuremonkey Reference &mdash; featuremonkey 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="featuremonkey 0.1 documentation" href="index.html" />
    <link rel="prev" title="featuremonkey Tutorial" href="tutorial.html" />
<link href='http://fonts.googleapis.com/css?family=Oswald:400,700,300' rel='stylesheet' type='text/css'></link>
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'></link>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tutorial.html" title="featuremonkey Tutorial"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">featuremonkey 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="featuremonkey-reference">
<h1>featuremonkey Reference<a class="headerlink" href="#featuremonkey-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="feature-structure-trees">
<h2>Feature Structure Trees<a class="headerlink" href="#feature-structure-trees" title="Permalink to this headline">¶</a></h2>
<p>featuremonkey recognizes python packages, modules, classes, functions and methods as being part of the FST.</p>
</div>
<div class="section" id="fst-declaration">
<h2>FST Declaration<a class="headerlink" href="#fst-declaration" title="Permalink to this headline">¶</a></h2>
<p>FSTs are declared as modules or classes depending on the preference of the user. modules and classes can be mixed arbitrarily.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when using classes, please make sure to use new style classes. Old style classes are completely unsupported by featuremonkey - because they are old and are removed from the python language with 3.0. To create a new style class, simply inherit from <tt class="docutils literal"><span class="pre">object</span></tt> or another new style class explicitely.</p>
</div>
<p>FSTs specify introductions and refinements of structures contained in the global interpreter state.
This is done by defining specially crafted names inside the FST module/class.</p>
<div class="section" id="fst-introduction">
<h3>FST Introduction<a class="headerlink" href="#fst-introduction" title="Permalink to this headline">¶</a></h3>
<p>Introductions are useful to add new attributes to existing packages/modules/classes/instances.</p>
<p>An introduction is specified by creating a name starting with <tt class="docutils literal"><span class="pre">introduce_</span></tt> followed by the name to introduce directly inside the FST module/class.
The attribute value will be used like so to derive the value to introduce:</p>
<ul class="simple">
<li>If the FST attribute value is not callable, it is used as the value to introduce without further processing.</li>
<li>If it is a callable, it is called to obtain the value to introduce. The callable will be called without arguments and must return this value.</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">TestFST1</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c">#introduce name ``a`` with value ``7``</span>
    <span class="n">introduce_a</span> <span class="o">=</span> <span class="mi">7</span>

    <span class="c">#introduce name ``b`` with value ``6``</span>
    <span class="k">def</span> <span class="nf">introduce_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">6</span>

    <span class="c">#introduce method ``foo`` that returns ``42`` when called</span>
    <span class="k">def</span> <span class="nf">introduce_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">42</span>

        <span class="k">return</span> <span class="n">foo</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Names can only be introduced if they do not already exist in the current interpreter state.
Otherwise <tt class="docutils literal"><span class="pre">compose</span></tt> will raise a <tt class="docutils literal"><span class="pre">CompositionError</span></tt>. If that happens, the product may be in an
inconsistent state. Consider restarting the whole product!</p>
</div>
</div>
<div class="section" id="fst-refinement">
<h3>FST Refinement<a class="headerlink" href="#fst-refinement" title="Permalink to this headline">¶</a></h3>
<p>Refinements are used to refine existing attributes of packages/modules/classes/instances.</p>
<p>An introduction is specified much like an introduction.
It is done by creating a name starting with <tt class="docutils literal"><span class="pre">refine_</span></tt> followed by the name to refine directly inside the FST module/class.
The attribute value will be used like so to derive the value to introduce:</p>
<ul class="simple">
<li>If the FST attribute value is not callable, it is used as the refined value without further processing. <strong>This is a replacement</strong></li>
<li>If it is a callable e.g. a method, it is called to obtain the refined value. The callable will be called with the single argument <tt class="docutils literal"><span class="pre">original</span></tt> and must return this value. <tt class="docutils literal"><span class="pre">original</span></tt> is a reference to the current implementation of the name that is to be refined. It is analogous to <tt class="docutils literal"><span class="pre">super</span></tt> in OOP.</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">TestFST1</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c">#refine name ``a`` with value ``7``</span>
    <span class="n">refine_a</span> <span class="o">=</span> <span class="mi">7</span>

    <span class="c">#refine name ``b`` with value ``6``</span>
    <span class="k">def</span> <span class="nf">introduce_b</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">6</span>

    <span class="c">#refine method ``foo`` to make it return double the value of before.</span>
    <span class="k">def</span> <span class="nf">refine_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">orginal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>

        <span class="k">return</span> <span class="n">foo</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when calling <tt class="docutils literal"><span class="pre">original</span></tt> in a method refinement(for both classes and instances), you need to explicitely pass <tt class="docutils literal"><span class="pre">self</span></tt> as first parameter to <tt class="docutils literal"><span class="pre">original</span></tt>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Names can only be refined if they exist in the current interpreter state.
Otherwise <tt class="docutils literal"><span class="pre">compose</span></tt> will raise a <tt class="docutils literal"><span class="pre">CompositionError</span></tt>. If that happens, the product may be in an
inconsistent state. Consider restarting the whole product!</p>
</div>
</div>
</div>
<div class="section" id="fst-nesting">
<h2>FST nesting<a class="headerlink" href="#fst-nesting" title="Permalink to this headline">¶</a></h2>
<p>FSTs can be nested to refine nested structures of the interpreter state.
To create a child FST node, create a name starting with <tt class="docutils literal"><span class="pre">child_</span></tt> followed by the nested name.
The value must be either a FST class or instance or a FST module.
As an example, consider a refinement to the <tt class="docutils literal"><span class="pre">os</span></tt> module.
We want to introduce <tt class="docutils literal"><span class="pre">os.foo</span></tt> and also refine <tt class="docutils literal"><span class="pre">os.path.join</span></tt>.
We could do this by composing a FST on <tt class="docutils literal"><span class="pre">os</span></tt> to introduce <tt class="docutils literal"><span class="pre">foo</span></tt> and then composing another FST on <tt class="docutils literal"><span class="pre">os.path</span></tt> that refines <tt class="docutils literal"><span class="pre">join</span></tt>.
Alternatively, we can use FST nesting and specify it as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">os</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">introduce_foo</span> <span class="o">=</span> <span class="mi">123</span>
    <span class="k">class</span> <span class="nc">child_path</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">refine_join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="o">*</span><span class="n">elems</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">original</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">join</span>
</pre></div>
</div>
<p>Got it?</p>
</div>
<div class="section" id="fst-composition">
<h2>FST Composition<a class="headerlink" href="#fst-composition" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="featuremonkey.compose">
<tt class="descclassname">featuremonkey.</tt><tt class="descname">compose</tt><big>(</big><em>self</em>, <em>*things</em><big>)</big><a class="headerlink" href="#featuremonkey.compose" title="Permalink to this definition">¶</a></dt>
<dd><p>compose applies multiple fsts onto a base implementation.
Pass the base implementation as last parameter.
fsts are merged from RIGHT TO LEFT (like function application)
e.g.:</p>
<dl class="docutils">
<dt>class MyFST(object):</dt>
<dd>#place introductions and refinements here
introduce_foo = &#8216;bar&#8217;</dd>
</dl>
<p>compose(MyFST(), MyClass)</p>
</dd></dl>

<dl class="function">
<dt id="featuremonkey.compose_later">
<tt class="descclassname">featuremonkey.</tt><tt class="descname">compose_later</tt><big>(</big><em>self</em>, <em>*things</em><big>)</big><a class="headerlink" href="#featuremonkey.compose_later" title="Permalink to this definition">¶</a></dt>
<dd><p>register list of things for composition using compose()</p>
<p>compose_later takes a list of fsts.
The last element specifies the base module as string
things are composed directly after the base module
is imported by application code</p>
</dd></dl>

</div>
<div class="section" id="feature-layout">
<h2>Feature Layout<a class="headerlink" href="#feature-layout" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="product-selection">
<h2>Product Selection<a class="headerlink" href="#product-selection" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="featuremonkey.select">
<tt class="descclassname">featuremonkey.</tt><tt class="descname">select</tt><big>(</big><em>self</em>, <em>*features</em><big>)</big><a class="headerlink" href="#featuremonkey.select" title="Permalink to this definition">¶</a></dt>
<dd><p>selects the features given as string
e.g
passing &#8216;hello&#8217; and &#8216;world&#8217; will result in imports of
&#8216;hello&#8217; and &#8216;world&#8217;. Then, if possible &#8216;hello.feature&#8217;
and &#8216;world.feature&#8217; are imported and select is called
in each feature module.</p>
</dd></dl>

<dl class="function">
<dt id="featuremonkey.select_equation">
<tt class="descclassname">featuremonkey.</tt><tt class="descname">select_equation</tt><big>(</big><em>self</em>, <em>filename</em><big>)</big><a class="headerlink" href="#featuremonkey.select_equation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">featuremonkey Reference</a><ul>
<li><a class="reference internal" href="#feature-structure-trees">Feature Structure Trees</a></li>
<li><a class="reference internal" href="#fst-declaration">FST Declaration</a><ul>
<li><a class="reference internal" href="#fst-introduction">FST Introduction</a></li>
<li><a class="reference internal" href="#fst-refinement">FST Refinement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fst-nesting">FST nesting</a></li>
<li><a class="reference internal" href="#fst-composition">FST Composition</a></li>
<li><a class="reference internal" href="#feature-layout">Feature Layout</a></li>
<li><a class="reference internal" href="#product-selection">Product Selection</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">featuremonkey Tutorial</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/reference.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tutorial.html" title="featuremonkey Tutorial"
             >previous</a> |</li>
        <li><a href="index.html">featuremonkey 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="footer">
     featuremonkey is copyright © 2012, Hendrik Speidel - <a href="http://schnapptack.de/">schnapptack GbR</a>.<br/>
     The featuremonkey logo is copyright © 2012, Christian Hauser - <a href="http://iyomi.de/">IYOMI</a>.<br/>
     Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
</div>

  </body>
</html>