import os
import time

import pyll
from pyll import tmpl_context as c, session
from pyll.decorators import xml, xml_render, html, html_render, jsonify, authorize, \
    credential, authenticated, redirect

from ${package}.model import User
from base import ControllerBase


class Root(ControllerBase):

    @html('index.html')
    def home(self, *args, **kwargs):
        if 'user' in session:
            c.user = session['user']
            c.permissions = c.user.permissions
            return html_render(user=c.user)
        return html_render()

    @authorize(credential('admin'))
    @html('admin.html')
    def admin(self, *args, **kwargs):
        c.user = session['user']
        c.permissions = c.user.permissions
        return html_render(user=c.user)

