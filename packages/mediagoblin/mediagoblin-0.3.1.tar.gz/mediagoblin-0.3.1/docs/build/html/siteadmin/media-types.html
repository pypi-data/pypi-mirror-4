

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Media Types &mdash; GNU MediaGoblin 0.3.2.dev documentation</title>
    
    <link rel="stylesheet" href="../_static/mg.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.2.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="GNU MediaGoblin 0.3.2.dev documentation" href="../index.html" />
    <link rel="next" title="How to Get Help with MediaGoblin" href="help.html" />
    <link rel="prev" title="Configuring MediaGoblin" href="configuration.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="help.html" title="How to Get Help with MediaGoblin"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuring MediaGoblin"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">GNU MediaGoblin 0.3.2.dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="media-types">
<span id="media-types-chapter"></span><h1>Media Types<a class="headerlink" href="#media-types" title="Permalink to this headline">¶</a></h1>
<p>In the future, there will be all sorts of media types you can enable,
but in the meanwhile there are three additional media types: video, audio
and ascii art.</p>
<p>First, you should probably read &#8220;<a class="reference internal" href="configuration.html"><em>Configuring MediaGoblin</em></a>&#8221; to make sure
you know how to modify the mediagoblin config file.</p>
<div class="section" id="enabling-media-types">
<h2>Enabling Media Types<a class="headerlink" href="#enabling-media-types" title="Permalink to this headline">¶</a></h2>
<p>Media types are enabled in your mediagoblin configuration file, typically it is
created by copying <tt class="docutils literal"><span class="pre">mediagoblin.ini</span></tt> to <tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt> and then
applying your changes to <tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt>. If you don&#8217;t already have a
<tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt>, create one in the way described.</p>
<p>Most media types have additional dependencies that you will have to install.
You will find descriptions on how to satisfy the requirements of each media type
on this page.</p>
<p>To enable a media type, edit the <tt class="docutils literal"><span class="pre">media_types</span></tt> list in your
<tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt>. For example, if your system supported image and
video media types, then the list would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">media_types</span> <span class="o">=</span> <span class="n">mediagoblin</span><span class="o">.</span><span class="n">media_types</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">mediagoblin</span><span class="o">.</span><span class="n">media_types</span><span class="o">.</span><span class="n">video</span>
</pre></div>
</div>
<p>Note that after enabling new media types, you must run dbupdate like so:</p>
<div class="highlight-python"><pre>./bin/gmg dbupdate</pre>
</div>
<p>If you are running an active site, depending on your server
configuration, you may need to stop it first (and it&#8217;s certainly a
good idea to restart it after the update).</p>
</div>
<div class="section" id="how-does-mediagoblin-decide-which-media-type-to-use-for-a-file">
<h2>How does MediaGoblin decide which media type to use for a file?<a class="headerlink" href="#how-does-mediagoblin-decide-which-media-type-to-use-for-a-file" title="Permalink to this headline">¶</a></h2>
<p>MediaGoblin has two methods for finding the right media type for an uploaded
file. One is based on the file extension of the uploaded file; every media type
maintains a list of supported file extensions. The second is based on a sniffing
handler, where every media type may inspect the uploaded file and tell if it
will accept it.</p>
<p>The file-extension-based approach is used before the sniffing-based approach,
if the file-extension-based approach finds a match, the sniffing-based approach
will be skipped as it uses far more processing power.</p>
</div>
<div class="section" id="video">
<h2>Video<a class="headerlink" href="#video" title="Permalink to this headline">¶</a></h2>
<p>To enable video, first install gstreamer and the python-gstreamer
bindings (as well as whatever gstremaer extensions you want,
good/bad/ugly).  On Debianoid systems:</p>
<div class="highlight-python"><pre>sudo apt-get install python-gst0.10 gstreamer0.10-plugins-{base,bad,good,ugly} \
    gstreamer0.10-ffmpeg</pre>
</div>
<p>Add <tt class="docutils literal"><span class="pre">mediagoblin.media_types.video</span></tt> to the <tt class="docutils literal"><span class="pre">media_types</span></tt> list in your
<tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt> and restart MediaGoblin.</p>
<p>Run:</p>
<div class="highlight-python"><pre>./bin/gmg dbupdate</pre>
</div>
<p>Now you should be able to submit videos, and mediagoblin should
transcode them.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You almost certainly want to separate Celery from the normal
paste process or your users will probably find that their connections
time out as the video transcodes.  To set that up, check out the
&#8220;<a class="reference internal" href="production-deployments.html"><em>Considerations for Production Deployments</em></a>&#8221; section of this manual.</p>
</div>
</div>
<div class="section" id="audio">
<h2>Audio<a class="headerlink" href="#audio" title="Permalink to this headline">¶</a></h2>
<p>To enable audio, install the gstreamer and python-gstreamer bindings (as well
as whatever gstreamer plugins you want, good/bad/ugly), scipy and numpy are
also needed for the audio spectrograms.
To install these on Debianoid systems, run:</p>
<div class="highlight-python"><pre>sudo apt-get install python-gst0.10 gstreamer0.10-plugins-{base,bad,good,ugly} \
    gstreamer0.10-ffmpeg python-numpy python-scipy</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">scikits.audiolab</span></tt> package you will install in the next step depends on the
<tt class="docutils literal"><span class="pre">libsndfile1-dev</span></tt> package, so we should install it.
On Debianoid systems, run:</p>
<div class="highlight-python"><pre>sudo apt-get install libsndfile1-dev</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">scikits.audiolab will display a warning every time it&#8217;s imported if you do
not compile it with alsa support. Alsa support is not necessary for the GNU
MediaGoblin application but if you do not wish the alsa warnings from
audiolab you should also install <tt class="docutils literal"><span class="pre">libasound2-dev</span></tt> before installing
scikits.audiolab.</p>
</div>
<p>Then install <tt class="docutils literal"><span class="pre">scikits.audiolab</span></tt> for the spectrograms:</p>
<div class="highlight-python"><pre>./bin/pip install scikits.audiolab</pre>
</div>
<p>Add <tt class="docutils literal"><span class="pre">mediagoblin.media_types.audio</span></tt> to the <tt class="docutils literal"><span class="pre">media_types</span></tt> list in your
<tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt> and restart MediaGoblin.</p>
<p>Run:</p>
<div class="highlight-python"><pre>./bin/gmg dbupdate</pre>
</div>
<p>You should now be able to upload and listen to audio files!</p>
</div>
<div class="section" id="ascii-art">
<h2>Ascii art<a class="headerlink" href="#ascii-art" title="Permalink to this headline">¶</a></h2>
<p>To enable ascii art support, first install the
<a class="reference external" href="http://pypi.python.org/pypi/chardet">chardet</a>
library, which is necessary for creating thumbnails of ascii art:</p>
<div class="highlight-python"><pre>./bin/easy_install chardet</pre>
</div>
<p>Next, modify (and possibly copy over from <tt class="docutils literal"><span class="pre">mediagoblin.ini</span></tt>) your
<tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt>.  In the <tt class="docutils literal"><span class="pre">[mediagoblin]</span></tt> section, add
<tt class="docutils literal"><span class="pre">mediagoblin.media_types.ascii</span></tt> to the <tt class="docutils literal"><span class="pre">media_types</span></tt> list.</p>
<p>For example, if your system supported image and ascii art media types, then
the list would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">media_types</span> <span class="o">=</span> <span class="n">mediagoblin</span><span class="o">.</span><span class="n">media_types</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">mediagoblin</span><span class="o">.</span><span class="n">media_types</span><span class="o">.</span><span class="n">ascii</span>
</pre></div>
</div>
<p>Run:</p>
<div class="highlight-python"><pre>./bin/gmg dbupdate</pre>
</div>
<p>Now any .txt file you uploaded will be processed as ascii art!</p>
</div>
<div class="section" id="stl-3d-model-support">
<h2>STL / 3d model support<a class="headerlink" href="#stl-3d-model-support" title="Permalink to this headline">¶</a></h2>
<p>To enable the &#8220;STL&#8221; 3d model support plugin, first make sure you have
a recentish <a class="reference external" href="http://blender.org">Blender</a> installed and available on
your execution path.  This feature has been tested with Blender 2.63.
It may work on some earlier versions, but that is not guaranteed (and
is surely not to work prior to Blender 2.5X).</p>
<p>Add <tt class="docutils literal"><span class="pre">mediagoblin.media_types.stl</span></tt> to the <tt class="docutils literal"><span class="pre">media_types</span></tt> list in your
<tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt> and restart MediaGoblin.</p>
<p>Run:</p>
<div class="highlight-python"><pre>./bin/gmg dbupdate</pre>
</div>
<p>You should now be able to upload .obj and .stl files and MediaGoblin
will be able to present them to your wide audience of admirers!</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_docs.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Media Types</a><ul>
<li><a class="reference internal" href="#enabling-media-types">Enabling Media Types</a></li>
<li><a class="reference internal" href="#how-does-mediagoblin-decide-which-media-type-to-use-for-a-file">How does MediaGoblin decide which media type to use for a file?</a></li>
<li><a class="reference internal" href="#video">Video</a></li>
<li><a class="reference internal" href="#audio">Audio</a></li>
<li><a class="reference internal" href="#ascii-art">Ascii art</a></li>
<li><a class="reference internal" href="#stl-3d-model-support">STL / 3d model support</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="previous chapter">Configuring MediaGoblin</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="help.html"
                        title="next chapter">How to Get Help with MediaGoblin</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/siteadmin/media-types.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="help.html" title="How to Get Help with MediaGoblin"
             >next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuring MediaGoblin"
             >previous</a> |</li>
        <li><a href="../index.html">GNU MediaGoblin 0.3.2.dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <div>

MediaGoblin documentation released into the public domain via <a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
    </div>
  </body>
</html>