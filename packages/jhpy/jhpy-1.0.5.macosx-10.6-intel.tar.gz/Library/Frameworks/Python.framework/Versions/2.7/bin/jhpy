#!/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
import jhpy_clt as JHPY

VERSION = "1.0.5"
DESCRIPTION = "JHPY Command-Line Tool"

# Methods
def deploy():
  print "Deploying application..."
  JHPY.run("appcfg.py update .")

def new():
	print "Creating structure template..."
	# To-do: build this template

def quick():
	print "Creating quick template..."

def test(p):
	print "Testing at port %s..." % p
	JHPY.run("dev_appserver.py . --port=%s" % p)

def version():
	print VERSION
	# To-do: build this template

def default():
  print "Type `jhpy -h` to see all the options available."

# Console stuff
parser = JHPY.Parser(DESCRIPTION)

parser.add('-d', '--deploy',
           default=False,
           action="store_true",
           help="deploy your application to google")
parser.add('-n', '--new',
           default=False,
           action="store_true",
           help="create a new structure template")
parser.add('-q', '--quick',
           default=False,
           action="store_true",
           help="create a new quick template")
parser.add('-t', '--test',
           default=False,
           help="start localhost server on port TEST")
parser.add('-v', '--version',
           default=False,
           action="store_true",
           help="get the installed version of jhpy")

# Wrap up
args = parser.parse_args()

if args.deploy:
	deploy()
elif args.new:
	new()
elif args.quick:
	quick()
elif args.test:
	test(args.test)
elif args.version:
	version()
else:
  default()
