<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      tal:omit-tag="">
<style type="text/css" media="screen"
  tal:content="string:@import url(${view/site_url}/++resource++plone.formwidget.recurrence/integration.css);"></style>
<script type="text/javascript" charset="iso-8859-1"
  tal:attributes="src string:${view/site_url}/++resource++jquery.tmpl.js" ></script>
<script type="text/javascript" charset="iso-8859-1"
  tal:attributes="src string:${view/site_url}/++resource++plone.formwidget.recurrence/jquery.recurrenceinput.js" ></script>
<textarea
   tal:attributes="id view/id;
                   name view/name;
                   class view/klass;
                   style view/style;
                   title view/title;
                   lang view/lang;
                   onclick view/onclick;
                   ondblclick view/ondblclick;
                   onmousedown view/onmousedown;
                   onmouseup view/onmouseup;
                   onmouseover view/onmouseover;
                   onmousemove view/onmousemove;
                   onmouseout view/onmouseout;
                   onkeypress view/onkeypress;
                   onkeydown view/onkeydown;
                   onkeyup view/onkeyup;
                   disabled view/disabled;
                   tabindex view/tabindex;
                   onfocus view/onfocus;
                   onblur view/onblur;
                   onchange view/onchange;
                   cols view/cols;
                   rows view/rows;
                   readonly view/readonly;
                   accesskey view/accesskey;
                   onselect view/onselect"
   tal:content="view/value" />
<tal:block condition="python:view.read_only() == 'true'">
  <span style="display:none;" tal:attributes="id string:${view/id}-start;name string:${view/name}-start" tal:content="view/get_start_date"/>
</tal:block>
<script type="text/javascript"
        tal:define="portal_url context/@@plone_portal_state/portal_url;"
        tal:content="string: jQuery.tools.recurrenceinput.localize('${request/LANGUAGE}', ${view/translation});
                             jQuery('#${view/id}').recurrenceinput({
                                 lang: '${request/LANGUAGE}',
                                 readOnly: ${view/read_only},
                                 startField: '${view/get_start_field}',
                                 firstDay: ${view/first_day},
                                 ajaxURL: '${portal_url}/@@json_recurrence',
                                 ajaxContentType: 'application/x-www-form-urlencoded; charset=UTF-8'});">
</script>
</html>
