$(function(){var a=(function(e){if(e==""){return{}}var d={};for(var f=0;f<e.length;++f){var g=e[f].split("=");if(g.length!=2){continue}d[g[0]]=decodeURIComponent(g[1].replace(/\+/g," "))}return d})(window.location.search.substr(1).split("&"));window.gridbrowser=function(g,d,f){var e;loc=window.location;e=loc.protocol+"//"+loc.host+"/@@gridbrowser";if(e.indexOf("?")<0){e=e+"?type="+f}else{e=e+"&type="+f}window.document.getElementById("grid-fieldname").value=g;window.open(e,"Grid Browser","width=800,height=600,status=yes,scrollbars=yes,resizable=yes")};window.gridbrowserdialog={init:function(){return $("select[name=image_scale]").change(function(){var d;d=""+image_url+"/"+($(this).val());$("#gridbrowser_image_preview").attr("src",d);return $("input[name=url]").val(d)})},submit:function(d){var e=$("#gridbrowser_form input#url").val();var f=window.opener.document.getElementById("grid-fieldname").value;window.opener.document.getElementById(f).setAttribute("data-url",e);return window.close()}};function b(){var d=gridster.serialize();d=JSON.stringify(d,null,2);$.post("save-grid",{tiles:d,},function(e){if(!e===true){alert("Error while saving tiles: "+e)}})}$("#save-tiles").click(function(){b();$("#tiles-saved-alert").fadeIn().delay(1000).fadeOut("slow")});window.rm_tile=function(d){window.gridster.remove_widget(d);$("#tile-removed-alert").fadeIn().delay(1000).fadeOut("slow")};var c=undefined;$(".cpick").ColorPicker({onShow:function(d){c=$(this).parent().parent();$(d).fadeIn(500);return false},onChange:function(d,f,e){c.css("backgroundColor","#"+f)},});window.gridster=$(".gridster ul").gridster({widget_margins:[10,10],widget_base_dimensions:[150,150],serialize_params:function(e,d){return{id:d.el[0].id,col:d.col,row:d.row,size_x:d.size_x,size_y:d.size_y,"class":e.attr("class"),url:e.attr("data-url"),type:e.attr("data-type"),style:e.attr("style")}},}).data("gridster").disable()});