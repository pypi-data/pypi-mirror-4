/**
 * @license Highcharts JS v2.1.8 (2011-11-05)
 *
 * (c) 2009-2011 Torstein HÃ¸nsi
 *
 * License: www.highcharts.com/license
 */
var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/types/report/models",["backbone"],function(a){var b,c,d;return b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url=function(){var a;return a=b.__super__.url.apply(this,arguments),/\/$/.test(a)||(a+="/"),a},b.prototype.initialize=function(){return this.bind("change",function(){return App.hub.publish("report/change",this)})},b}(a.Model),c=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.url=App.endpoints.reports,c.prototype.model=b,c.prototype.comparator=function(a){return-Number(new Date(a.get("modified")))},c}(a.Collection),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url=App.endpoints.session.report,b.prototype.defaults={name:"click to give your report a name...",description:"click to give your report a description..."},b.prototype.initialize=function(){var a=this;return b.__super__.initialize.apply(this,arguments),App.hub.subscribe("report/clear",function(){return a.clear({silent:!0}),a.save(null,{success:function(){return window.location=App.endpoints.define}})}),App.hub.subscribe("report/change",function(b){if(b.id===a.get("reference_id"))return a.set(b.toJSON())})},b.prototype.push=function(){return this.save(null,{url:this.get("permalink"),success:function(){return App.hub.publish("report/push",this)}})},b.prototype.revert=function(){return this.save(null,{data:JSON.stringify({revert:!0}),contentType:"application/json",success:function(){return App.hub.publish("report/revert",this)}})},b}(a.Model),{Model:b,Collection:c,Session:d}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("common/views/collection",["backbone","common/utils"],function(a,b){var c,d,e;return c=function(b){function c(){return this.update=__bind(this.update,this),this.destroy=__bind(this.destroy,this),this.remove=__bind(this.remove,this),this.reset=__bind(this.reset,this),this.add=__bind(this.add,this),this.all=__bind(this.all,this),c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.viewClass=a.View,c.prototype.defaultContent=null,c.prototype.initialize=function(){this.childViews={},this.collection.bind("add",this.add),this.collection.bind("reset",this.reset),this.collection.bind("remove",this.remove),this.collection.bind("destroy",this.destroy),this.collection.bind("change",this.update);if(this.defaultContent)return this.collection.bind("all",this.all),this.defaultContent=this.$(this.defaultContent).detach(),this.el.append(this.defaultContent)},c.prototype.insertChild=function(a){return this.el.append(a.el)},c.prototype.all=function(){return this.collection.length?this.defaultContent.hide():this.defaultContent.show()},c.prototype.add=function(a){var b;return(b=this.childViews[a.id||a.cid])?clearTimeout(b._destroyTimer):(b=this.childViews[a.id||a.cid]=(new this.viewClass({model:a})).render(),this.insertChild(b)),b},c.prototype.reset=function(a,b){return a.each(this.add)},c.prototype.remove=function(a){var b,c=this;return b=this.childViews[a.id||a.cid],b.el.detach(),b._destroyTimer=setTimeout(function(){return c.destroy(a)},1e4)},c.prototype.destroy=function(a){return this.childViews[a.id||a.cid].el.remove()},c.prototype.update=function(a){var b;return b=this.childViews[a.id||a.cid],!b&&(b=this.childViews[a.cid])&&(this.childViews[a.id]=b,delete this.childViews[a.cid]),b.render()},c}(a.View),d={collapsedLength:5,getItems:function(){return this.el.children()},getHiddenItems:function(){return this.getItems().filter(":gt("+(this.collapsedLength-1)+")")},getExpanderText:function(){return"Show "+this.getHiddenItems().length+" more.."},renderExpander:function(){var a=this;return this.expander=this.$('<a class="expand-list" href="#">'+this.getExpanderText()+"</a>").bind("click",function(){return a.expand(),!1}),this.el.after(this.expander)},expand:function(){return this.getHiddenItems().show(),this.expander.remove()},collapse:function(){this.expander&&this.expander.remove();if(this.getItems().length>this.collapsedLength)return this.getHiddenItems().hide(),this.renderExpander()}},e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(a.View),b.include(e,d),{View:c,ExpandableListMixin:d,ExpandableList:e}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/types/report/views",["backbone","common/utils","common/views/collection"],function(a,b,c){var d,e,f,g,h;return d=function(a){function b(){return this.editHandler=__bind(this.editHandler,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el='<div id="report-editor">            <input type="text" name="name" placeholder="Name...">            <textarea name="description" placeholder="Description..."></textarea>            <div class="controls">                <button class="cancel">Cancel</button>                <button class="save">Save</button>            </div>        </div>',b.prototype.elements={"[name=name]":"name","[name=description]":"description",".save":"saveButton",".cancel":"cancelButton"},b.prototype.events={"click .save":"save","click .cancel":"cancel"},b.prototype.initialize=function(){return App.hub.subscribe("report/edit",this.editHandler),this.el.appendTo("body").dialog({dialogClass:"ui-dialog-simple",autoOpen:!1,modal:!0,resizable:!1,draggable:!0,position:["center",150],width:500})},b.prototype.editHandler=function(a){return this.name.val(a.get("name")),this.description.val(a.get("description")),this.activeModel=a,this.el.dialog("open")},b.prototype.save=function(){return this.activeModel.set({name:this.name.val(),description:this.description.val()}),this.activeModel.save(),this.activeModel.isNew()&&this.activeModel.collection.add(this.activeModel),delete this.activeModel,this.el.dialog("close")},b.prototype.cancel=function(){return delete this.activeModel,this.el.dialog("close")},b}(a.View),e={edit:function(a,b){return b==null&&(b=this.model),App.hub.publish("report/edit",b),!1}},f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el='<section class="report">                <strong><a role="name"></a></strong>                <span class="info">- <span role="unique-count"></span> unique <span role="verbose-name"></span></span>                <span class="info time" style="float: right">modified <span role="modified"></span><span role="timesince"></span></span>                <div role="description"></div>                <div class="controls">                    <button class="delete">Delete</button>                    <button class="edit">Edit</button>                    <button class="copy">Copy</button>                </div>            </section>',b.prototype.events={"click .time":"toggleTime","click .edit":"edit","click .copy":"copy","click .delete":"delete",mouseenter:"showControls",mouseleave:"hideControls"},b.prototype.elements={"[role=name]":"name","[role=unique-count]":"uniqueCount","[role=verbose-name]":"verboseName","[role=modified]":"modified","[role=timesince]":"timesince","[role=description]":"description",".controls":"controls"},b.prototype.render=function(){var a,b;return this.name.text(this.model.get("name")),this.name.attr("href",this.model.get("permalink")),this.modified.text(this.model.get("modified")),this.timesince.text(this.model.get("timesince")),(a=this.model.get("description"))?this.description.show().text(a):this.description.hide().text("No description provided"),this.uniqueCount.text(b=this.model.get("unique_count")),b===1?this.verboseName.text(this.model.get("model_name")):this.verboseName.text(this.model.get("model_name_plural")),this},b.prototype.toggleTime=function(a){return this.modified.toggle(),this.timesince.toggle(),a.stopPropagation()},b.prototype.showControls=function(a){var b=this;return this._controlsTimer=setTimeout(function(){return b.controls.slideDown(200)},700),!1},b.prototype.hideControls=function(a){return clearTimeout(this._controlsTimer),this.controls.slideUp(300),!1},b.prototype.copy=function(a){var b;return b=this.model.clone(),b.set("id",null),b.set("name",b.get("name")+" (copy)"),b.set("_id",this.model.id),b.collection=this.model.collection,this.edit(a,b),!1},b.prototype["delete"]=function(){return this.model.destroy()},b}(a.View),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#report-list",b.prototype.viewClass=f,b.prototype.defaultContent='<section class="info">You have no saved reports.</section>',b}(c.View),h=function(a){function b(){return this.render=__bind(this.render,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#report-name",b.prototype.events={click:"edit",mouseover:"hover",mouseout:"hover"},b.prototype.initialize=function(a){return this.model.bind("change:name",this.render),this.hoverText=this.$('<span class="info">click to edit</span>')},b.prototype.render=function(){var a;return this.el.text(""),(a=this.model.get("name"))?(this.el.removeClass("placeholder"),this.el.append(this.hoverText.hide())):(this.el.addClass("placeholder"),a=this.model.defaults.name,this.hoverText.detach()),this.el.prepend(a+" ")},b.prototype.hover=function(){return this.hoverText.toggle()},b}(a.View),b.include(f,e),b.include(g,c.ExpandableListMixin),b.include(h,e),{Name:h,Item:f,List:g,Editor:d}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/types/report/messages",["underscore","cilantro/utils/logging"],function(a,b){var c,d;return d={UnsavedReportTemplate:'<div class="message-block warning">                <div class="content">                    <strong role="name"><%= name %></strong> has unsaved changes                </div>                <button class="revert">Revert</button>                <button class="save">Save</button>            </div>'},c=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template=a.template(d.UnsavedReportTemplate),c.prototype.elements={"[role=name]":"name"},c.prototype.events={"click .save":"save","click .revert":"revert"},c.prototype.initialize=function(){var a=this;return this.render(),this.model.bind("change:name",function(b,c){return a.el.find("[role=name]").text(c)}),this.model.bind("change:has_changed",function(b,c){return c?App.hub.publish("log",a):App.hub.publish("dismiss",a)})},c.prototype.render=function(){return this.el=this.$(this.template(this.model.toJSON())),this.setLocalElements(),this.delegateEvents(),this},c.prototype.save=function(){return this.model.push()},c.prototype.revert=function(){return this.model.revert()},c}(b.MessageView),{UnsavedReport:c,templates:d}}),define("cilantro/types/report/main",["cilantro/types/report/models","cilantro/types/report/views","cilantro/types/report/messages"],function(a,b,c){return{Models:a,Views:b,Messages:c}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/types/scope/models",["backbone"],function(a){var b;return b=function(a){function b(){return this.revert=__bind(this.revert,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url=App.endpoints.session.scope,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),App.hub.subscribe("report/revert",this.revert)},b.prototype.revert=function(){return this.fetch()},b}(a.Model),{Session:b}}),define("cilantro/types/scope/main",["cilantro/types/scope/models"],function(a){return{Models:a}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("common/models/state",["backbone"],function(a){var b;return b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={_active:!1,_enabled:!0},b.prototype.initialize=function(){return this.bind("change:_active",this._changeActive),this.bind("change:_enabled",this._changeEnabled)},b.prototype.toJSON=function(){var a;return a=b.__super__.toJSON.apply(this,arguments),delete a._active,delete a._enabled,a},b.prototype._changeActive=function(a,b,c){var d;return d=b?"active":"inactive",this.trigger(d,this,c)},b.prototype._changeEnabled=function(a,b,c){var d;return d=b?"enabled":"disabled",this.trigger(d,this,c)},b.prototype.enable=function(a){var b;a==null&&(a={}),b=!this.get("_enabled"),this.set("_enabled",!0,a);if(a.reactivate&&b&&this.isActive())return this._changeActive(this,!0)},b.prototype.disable=function(a){return this.set("_enabled",!1,a)},b.prototype.activate=function(a){if(this.get("_enabled"))return this.set("_active",!0,a)},b.prototype.inactivate=function(a){if(this.get("_enabled"))return this.set("_active",!1,a)},b.prototype.isEnabled=function(){return this.get("_enabled")},b.prototype.isActive=function(){return this.get("_enabled")&&this.get("_active")},b}(a.Model),{Model:b}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("common/views/state",["backbone"],function(a){var b;return b=function(a){function b(){return this.disable=__bind(this.disable,this),this.enable=__bind(this.enable,this),this.inactivate=__bind(this.inactivate,this),this.activate=__bind(this.activate,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.initialize=function(){return this.model.bind("active",this.activate),this.model.bind("inactive",this.inactivate),this.model.bind("enabled",this.enable),this.model.bind("disabled",this.disable)},b.prototype.activate=function(){return this.el.addClass("active")},b.prototype.inactivate=function(){return this.el.removeClass("active")},b.prototype.enable=function(){return this.el.show()},b.prototype.disable=function(){return this.el.hide()},b}(a.View),{View:b}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/types/domain/views",["common/views/state","common/views/collection"],function(a,b){var c,d,e,f;return d=function(a){function b(){return this.click=__bind(this.click,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el='<span role="domain">                <div class="icon"></div><span role="name"></span>            </span>',b.prototype.elements={span:"name"},b.prototype.events={click:"click"},b.prototype.render=function(){var a;return a=this.model.get("name"),this.el.attr({id:"tab-"+a.toLowerCase()}),this.name.text(this.model.get("name")),this},b.prototype.click=function(a){return this.model.activate()},b}(a.View),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#domains",b.prototype.viewClass=d,b.prototype.reset=function(a,c){b.__super__.reset.apply(this,arguments);if(c.initial)return this.el.parent().fadeIn()},b}(b.View),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el='<span role="name"></span>',b.prototype.render=function(){return this.el.text(this.model.get("name")),this},b}(d),e=function(a){function b(){return this.toggleEnableByDomain=__bind(this.toggleEnableByDomain,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#subdomains",b.prototype.viewClass=f,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),App.hub.subscribe("domain/active",this.toggleEnableByDomain)},b.prototype.toggleEnableByDomain=function(a){if(!this.collection._byDomain[a]){if(!this.el.is(":hidden"))return this.el.slideUp("fast")}else if(this.el.is(":hidden"))return this.el.slideDown("fast")},b}(b.View),{DomainView:d,DomainCollectionView:c,SubdomainView:f,SubdomainCollectionView:e}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};define("cilantro/types/domain/models",["underscore","backbone","common/models/state","cilantro/types/domain/views"],function(a,b,c,d){var e,f,g,h;return e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(c.Model),f=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=e,c.prototype.url=App.endpoints.domains,c.prototype.initialize=function(){var a=this;return this.bind("active",this.activate),this.bind("inactive",this.inactivate),App.hub.subscribe("domain/request",function(b){var c,d;return c=a.get(b),c?c.activate():(d=a.subdomains.get(b),c=a.get(d.get("parent").id),c.activate(),d.activate())})},c.prototype.comparator=function(a){return a.get("order")},c.prototype.parse=function(b,c){var e,f,g,i,j;f=a.groupBy(b,function(a){var b;return((b=a["parent"])!=null?b.id:void 0)||null}),this.subdomains=new h,new d.SubdomainCollectionView({collection:this.subdomains}),e=f["null"],delete f["null"],j=a.flatten(a.values(f));for(i in f)g=parseInt(i),j.push({id:g,name:"All",parent:{id:g}});return this.subdomains.reset(j),e},c.prototype.activate=function(a){return App.hub.publish("domain/active",a.id),this.chain().without(a).map(function(a){return a.inactivate()})},c.prototype.inactivate=function(a){return App.hub.publish("domain/inactive",a.id)},c}(b.Collection),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),h=function(b){function c(){return this.toggleEnableByDomain=__bind(this.toggleEnableByDomain,this),c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=g,c.prototype.initialize=function(){return App.hub.subscribe("domain/active",this.toggleEnableByDomain),this.bind("reset",this.groupByDomain),this.bind("active",this.activate),this.bind("inactive",this.inactivate)},c.prototype.comparator=function(a){return a.get("order")},c.prototype.groupByDomain=function(){return this._byDomain=this.groupBy(function(a){return a.get("parent").id})},c.prototype.toggleEnableByDomain=function(a){var b,c=this;b=!1,this.map(function(c){if(c.get("parent").id!==a)return c.disable();c.enable({reactivate:!0});if(c.isActive())return b=!0});if(!b&&this._byDomain[a])return this.get(a).activate()},c.prototype.activate=function(b){return App.hub.publish("subdomain/active",b.id),a(this._byDomain[b.get("parent").id]).without(b).map(function(a){return a.inactivate()})},c.prototype.inactivate=function(a){return App.hub.publish("subdomain/inactive",a.id)},c}(f),{Model:e,Collection:f}}),define("cilantro/types/domain/main",["cilantro/types/domain/models","cilantro/types/domain/views"],function(a,b){return{Models:a,Views:b}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("cilantro/types/concept/models",["underscore","backbone","common/models/state"],function(a,b,c){var d,e;return d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url=function(){return b.__super__.url.apply(this,arguments)+"/"},b}(c.Model),e=function(b){function c(){return this.toggleEnableByDomain=__bind(this.toggleEnableByDomain,this),c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=d,c.prototype.url=App.endpoints.criteria,c.prototype.initialize=function(){var a=this;return App.hub.subscribe("domain/active",this.toggleEnableByDomain),App.hub.subscribe("subdomain/active",this.toggleEnableByDomain),this.bind("reset",this.groupByDomain),this.bind("active",this.activate),this.bind("inactive",this.inactivate),App.hub.subscribe("concept/request",function(b){var c;c=a.get(b);if(c)return App.hub.publish("domain/request",c.get("domain").id),c.activate()}),this._activeByDomain={},this._activeDomain=null},c.prototype.groupByDomain=function(){var a=this;return this._byDomain={},this._bySubdomain={},this.each(function(b){var c,d,e,f,g,h,i,j,k,l;return c=b.get("domain"),c.parent?(((j=(d=a._bySubdomain)[g=c.id])!=null?j:d[g]=[]).push(b),((k=(e=a._byDomain)[h=c.parent.id])!=null?k:e[h]=[]).push(b)):((l=(f=a._byDomain)[i=c.id])!=null?l:f[i]=[]).push(b)})},c.prototype.toggleEnableByDomain=function(a){var b,c;this._activeDomain=a,b=this._bySubdomain[a]||this._byDomain[a],this.map(function(a){return __indexOf.call(b,a)<0?a.disable():(a.enable(),a.inactivate())});if(c=this._activeByDomain[a])return c.activate()},c.prototype.activate=function(b){var c;return this._activeByDomain[this._activeDomain]=b,c=this._bySubdomain[this._activeDomain]||this._byDomain[this._activeDomain],a(c).without(b).map(function(a){return a.inactivate()})},c.prototype.inactivate=function(a){},c}(b.Collection),{Model:d,Collection:e}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("common/views/popover",["backbone"],function(a){var b,c;return c={right:function(a,b){var c,d,e,f;return f=b.outerHeight(),d=a.offset(),c=a.outerHeight(),e=a.outerWidth(),b.animate({top:d.top-(f-c)/2,left:d.left+e+5},300,"easeOutQuint")},left:function(a,b){var c,d,e,f;return e=b.outerHeight(),f=b.outerWidth(),d=a.offset(),c=a.outerHeight(),b.animate({top:d.top-(e-c)/2,left:d.left-f-5},300,"easeOutQuint")},above:function(a,b){var c,d,e,f;return e=b.outerHeight(),f=b.outerWidth(),c=a.offset(),d=a.outerWidth(),b.animate({top:c.top-e-5,left:c.left-(f-d)/2},300,"easeOutQuint")},below:function(a,b){var c,d,e,f;return f=b.outerWidth(),d=a.offset(),c=a.outerHeight(),e=a.outerWidth(),b.animate({top:d.top+c+5,left:d.left-(f-e)/2},300,"easeOutQuint")}},b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.location="right",b.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave"},b.prototype.elements={".title":"title",".content":"content"},b.prototype.update=function(a){},b.prototype.show=function(a,b){var d=this;return b==null&&(b=this.location),this.clear(),this.delay(function(){return d.update(a),d.el.removeClass("right left above below").addClass(b),c[b](a.el,d.el),d.el.fadeIn("fast")},300)},b.prototype.hide=function(a){var b=this;a==null&&(a=!1),this.clear();if(a)return this.el.hide();if(!this.entered)return this.delay(function(){return b.el.hide()},100)},b.prototype.mouseenter=function(){return this.entered=!0,this.clear()},b.prototype.mouseleave=function(){return this.entered=!1,this.hide()},b.prototype.delay=function(a,b){return this._hoverTimer=setTimeout(a,b)},b.prototype.clear=function(){return clearTimeout(this._hoverTimer),this.el.clearQueue()},b}(a.View),{Popover:b}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};define("cilantro/types/concept/views",["underscore","common/views/state","common/views/collection","common/views/popover"],function(a,b,c,d){var e,f,g;return g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template=a.template('<span class="name"><%= name %></span>            <span class="description"><%= description %></span>'),c.prototype.events={click:"click"},c.prototype.render=function(){return this.el.html(this.template(this.model.toJSON())),this.el.data({id:this.model.id}),this},c.prototype.click=function(){return this.model.activate({local:!0})},c}(b.View),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#concept-description",b.prototype.defaultContent='<span class="info">No description available</span>',b.prototype.update=function(a){return this.title.text(a.model.get("name")),this.content.html(a.model.get("description")||this.defaultContent)},b}(d.Popover),e=function(b){function c(){return this.activate=__bind(this.activate,this),this.scrollToConcept=__bind(this.scrollToConcept,this),c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.el="#criteria",c.prototype.viewClass=g,c.prototype.events={"mouseenter div":"mouseenter","mouseleave div":"mouseleave",click:"click"},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.collection.bind("active",this.activate),this.description=new f},c.prototype.reset=function(a,b){c.__super__.reset.apply(this,arguments);if(b.initial)return this.el.parent().fadeIn()},c.prototype.scrollToConcept=function(a){var b;return b=this.childViews[a.id],this.el.scrollTo(b.el,{duration:800,axis:"y",offset:{top:this.el.outerHeight()/-2},easing:"easeOutQuint"})},c.prototype.activate=function(b,c){return(c!=null?!c.local:!void 0)&&a.defer(this.scrollToConcept,b),App.hub.publish("concept/active",b)},c.prototype.mouseenter=function(a){var b,c;return b=this.$(a.currentTarget).data("id"),c=this.childViews[b],this.description.show(c,"right")},c.prototype.mouseleave=function(a){return this.description.hide()},c.prototype.click=function(){return this.description.hide(!0)},c}(c.View),{View:g,CollectionView:e}}),define("cilantro/types/concept/main",["cilantro/types/concept/models","cilantro/types/concept/views"],function(a,b){return{Models:a,Views:b}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},__bind=function(a,b){return function(){return a.apply(b,arguments)}};define("cilantro/utils/search",["jquery","backbone","common/views/collection","common/models/state","common/views/state"],function(a,b,c,d,e){var f,g,h,i;return g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(d.Model),h=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=g,c.prototype.query=function(b){var c=this;return a.get(this.url,{q:b},function(a){return c.each(function(b){var c;return(c=b.id,__indexOf.call(a,c)<0)?b.disable():b.enable()})})},c}(b.Collection),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.events={focus:"focus",blur:"blur",keyup:"keyup"},b.prototype.focus=function(){this.focused=!0;if(this.el.val()!=="")return this.results.show()},b.prototype.blur=function(){this.focused=!1;if(!this.results.entered)return this.results.hide()},b.prototype.keyup=function(){var a=this;return this.results.show(),clearTimeout(this._searchTimer),this._searchTimer=setTimeout(function(){return a.results.query(a.el.val())},200)},b}(b.View),i=function(a){function b(){return this.reposition=__bind(this.reposition,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.inputViewClass=f,b.prototype.defaultContent='<div class="info">No results found</div>',b.prototype.elements={".content":"content"},b.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave"},b.prototype.initialize=function(a){return this.input||(this.input=new this.inputViewClass,this.input.results=this,this.defaultContent=this.$(this.defaultContent)),this.render(),b.__super__.initialize.apply(this,arguments)},b.prototype.insertChild=function(a){return this.content.append(a.el)},b.prototype.render=function(){return this.el.appendTo("body"),this.$(window).bind("resize",this.reposition),this},b.prototype.reposition=function(){var a,b,c,d;return d=this.el.outerWidth(),b=this.input.el.offset(),a=this.input.el.outerHeight(),c=this.input.el.outerWidth(),this.el.css({top:b.top+a+5,left:b.left-(d-c)/2})},b.prototype.query=function(a){var b=this;return this.collection.query(a).success(function(a){return a.length?b.defaultContent.detach():b.defaultContent.show().prependTo(b.content)})},b.prototype.mouseenter=function(){return this.entered=!0},b.prototype.mouseleave=function(){this.entered=!1;if(!this.input.focused)return this.hide()},b.prototype.show=function(){return this.reposition(),this.el.fadeIn("fast")},b.prototype.hide=function(){return this.el.fadeOut("fast")},b}(c.View),{ResultModel:g,ResultCollection:h,ResultListView:i,InputView:f}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/pages/define/search",["underscore","common/views/state","cilantro/utils/search"],function(a,b,c){var d,e,f,g;return e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url=App.endpoints.criteria,b}(c.ResultCollection),f=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template=a.template('<span class="name"><%= name %></span>            <br><span class="info"><%= domain.name %></span>'),c.prototype.events={click:"click"},c.prototype.render=function(){return this.el.html(this.template(this.model.toJSON())),this},c.prototype.click=function(){return App.hub.publish("concept/request",this.model.id),!1},c}(b.View),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#concept-search",b}(c.InputView),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#concept-search-results",b.prototype.viewClass=f,b.prototype.inputViewClass=d,b}(c.ResultListView),{ResultCollection:e,ResultListView:g}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/pages/define/condition",["underscore","backbone","common/models/state","common/views/state","common/views/collection"],function(a,b,c,d,e){var f,g,h,i,j;return f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(c.Model),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.model=f,b.prototype.url=App.endpoints.session.scope,b.prototype.parse=function(a){return a.conditions},b}(b.Collection),j=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.events={click:"click","click .remove":"remove"},c.prototype.template=a.template('<div class="criterion clearfix">                <a href="#" class="remove-criterion"></a>                <a href="#" class="field-anchor">                <%= condition %>                </a>            </div>'),c.prototype.render=function(){return this.el.remove(),this.el=this.$(this.template(this.model.toJSON())),this.delegateEvents(),this},c.prototype.click=function(){return this.model.activate(),!1},c.prototype.remove=function(){return this.model.remove(),!1},c}(b.View),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#condition-list-pane",b.prototype.events={"click #clear-conditions":"click"},b.prototype.initialize=function(a){return this.list=a.list},b.prototype.click=function(){return this.list.collection.remove(this.list.collection.models)},b}(b.View),i=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.el="#condition-list",b.prototype.viewClass=j,b}(e.View),{Collection:g,ListView:i,ListPane:h}}),function(){function bq(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function br(a,b){return parseInt(a,b||10)}function bs(a){return typeof a=="string"}function bt(a){return typeof a=="object"}function bu(a){return Object.prototype.toString.call(a)==="[object Array]"}function bv(a){return typeof a=="number"}function bw(a){return c.log(a)/c.LN10}function bx(a){return c.pow(10,a)}function by(a,b){var c=a.length;while(c--)if(a[c]===b){a.splice(c,1);break}}function bz(a){return a!==F&&a!==null}function bA(a,b,c){var d,e="setAttribute",f;if(bs(b))bz(c)?a[e](b,c):a&&a.getAttribute&&(f=a.getAttribute(b));else if(bz(b)&&bt(b))for(d in b)a[e](d,b[d]);return f}function bB(a){return bu(a)?a:[a]}function bC(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++){c=a[b];if(typeof c!="undefined"&&c!==null)return c}}function bD(a,b){o&&b&&b.opacity!==F&&(b.filter="alpha(opacity="+b.opacity*100+")"),bq(a.style,b)}function bE(b,c,d,e,f){var g=a.createElement(b);return c&&bq(g,c),f&&bD(g,{padding:0,border:N,margin:0}),d&&bD(g,d),e&&e.appendChild(g),g}function bF(a,b){var c=function(){};return c.prototype=new a,bq(c.prototype,b),c}function bG(a,b,c,d){var e=B.lang,f=a,g=isNaN(b=i(b))?2:b,h=c===undefined?e.decimalPoint:c,j=d===undefined?e.thousandsSep:d,k=f<0?"-":"",l=String(br(f=i(+f||0).toFixed(g))),m=l.length>3?l.length%3:0;return k+(m?l.substr(0,m)+j:"")+l.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+j)+(g?h+i(f-l).toFixed(g).slice(2):"")}function bH(b){var c={left:b.offsetLeft,top:b.offsetTop};b=b.offsetParent;while(b)c.left+=b.offsetLeft,c.top+=b.offsetTop,b!==a.body&&b!==a.documentElement&&(c.left-=b.scrollLeft,c.top-=b.scrollTop),b=b.offsetParent;return c}function bI(){this.color=0,this.symbol=0}function bJ(a,b,c,d,e,f,g){var h=g.x,i=g.y,j=h-a+c-25,k=i-b+d+10,l;return j<7&&(j=c+h+15),j+a>c+e&&(j-=j+a-(c+e),k-=b,l=!0),k<5?(k=5,l&&i>=k&&i<=k+b&&(k=i+b-5)):k+b>d+f&&(k=d+f-b-5),{x:j,y:k}}function bK(a,b){var c=a.length,d;for(d=0;d<c;d++)a[d].ss_i=d;a.sort(function(a,c){var d=b(a,c);return d===0?a.ss_i-c.ss_i:d});for(d=0;d<c;d++)delete a[d].ss_i}function bL(a){var b;for(b in a)a[b]&&a[b].destroy&&a[b].destroy(),delete a[b]}function bM(a,b){D=bC(a,b.animation)}function bQ(){var a=B.global.useUTC;U=a?Date.UTC:function(a,b,c,d,e,f){return(new Date(a,b,bC(c,1),bC(d,0),bC(e,0),bC(f,0))).getTime()},V=a?"getUTCMinutes":"getMinutes",W=a?"getUTCHours":"getHours",X=a?"getUTCDay":"getDay",Y=a?"getUTCDate":"getDate",Z=a?"getUTCMonth":"getMonth",$=a?"getUTCFullYear":"getFullYear",_=a?"setUTCMinutes":"setMinutes",ba=a?"setUTCHours":"setHours",bb=a?"setUTCDate":"setDate",bc=a?"setUTCMonth":"setMonth",bd=a?"setUTCFullYear":"setFullYear"}function bR(a){return B=bj(B,a),bQ(),B}function bS(){return B}function bT(a){A||(A=bE(G)),a&&A.appendChild(a),A.innerHTML=""}function cc(){}function cg(j,k){function cU(a){function ch(a,b){var c=this;c.pos=a,c.minor=b,c.isNew=!0,b||c.addLabel()}function ci(a){var b=this;return a&&(b.options=a,b.id=a.id),b}function cj(a,b,c,d){var e=this;e.isNegative=b,e.options=a,e.x=c,e.stack=d,e.alignOptions={align:a.align||(cI?b?"left":"right":"center"),verticalAlign:a.verticalAlign||(cI?"middle":b?"bottom":"top"),y:bC(a.y,cI?4:b?14:-6),x:bC(a.x,cI?b?-6:6:0)},e.textAlign=a.textAlign||(cI?b?"right":"left":"center")}function cl(){var a=[],c=[],d;K=N=null,Q=[],bg(cH,function(e){d=!1,bg(["xAxis","yAxis"],function(a){e.isCartesian&&(a==="xAxis"&&b||a==="yAxis"&&!b)&&(e.options[a]===o.index||e.options[a]===F&&o.index===0)&&(e[a]=p,Q.push(e),d=!0)}),!e.visible&&l.ignoreHiddenSeries&&(d=!1);if(d){var f,g,h,i,j,k;b||(f=e.options.stacking,bt=f==="percent",f&&(j=e.options.stack,i=e.type+bC(j,""),k="-"+i,e.stackKey=i,g=a[i]||[],a[i]=g,h=c[k]||[],c[k]=h),bt&&(K=0,N=99));if(e.isCartesian){bg(e.data,function(a){var c=a.x,d=a.y,e=d<0,l=e?h:g,m=e?k:i,p,q;K===null&&(K=N=a[v]),b?c>N?N=c:c<K&&(K=c):bz(d)&&(f&&(l[c]=bz(l[c])?l[c]+d:d),p=l?l[c]:d,q=bC(a.low,p),bt||(p>N?N=p:q<K&&(K=q)),f&&(n[m]||(n[m]={}),n[m][c]||(n[m][c]=new cj(o.stackLabels,e,c,j)),n[m][c].setTotal(p)))});if(/(area|column|bar)/.test(e.type)&&!b){var m=0;K<m?N<m&&(N=m,bs=!0):(K=m,bp=!0)}}}})}function cm(a,b){var d,f;bH=b?1:c.pow(10,e(c.log(a)/c.LN10)),d=a/bH;if(!b){b=[1,2,2.5,5,10];if(o.allowDecimals===!1||t)bH===1?b=[1,2,5,10]:bH<=.1&&(b=[1/bH])}for(f=0;f<b.length;f++){a=b[f];if(d<=(b[f]+(b[f+1]||b[f]))/2)break}return a*=bH,a}function cn(){bI=[];var a,b=B.global.useUTC,c=1e3/z,d=6e4/z,f=36e5/z,g=864e5/z,h=6048e5/z,i=2592e6/z,j=31556952e3/z,k=[["second",c,[1,2,5,10,15,30]],["minute",d,[1,2,5,10,15,30]],["hour",f,[1,2,3,4,6,8,12]],["day",g,[1,2]],["week",h,[1,2]],["month",i,[1,2,3,4,6]],["year",j,null]],l=k[6],m=l[1],n=l[2];for(a=0;a<k.length;a++){l=k[a],m=l[1],n=l[2];if(k[a+1]){var p=(m*n[n.length-1]+k[a+1][1])/2;if(bD<=p)break}}m===j&&bD<5*m&&(n=[1,2,5]);var q=cm(bD/m,n),r,s=new Date(be*z);s.setMilliseconds(0),m>=c&&s.setSeconds(m<d?q*e(s.getSeconds()/q):0),m>=d&&s[_](m<f?q*e(s[V]()/q):0),m>=f&&s[ba](m<g?q*e(s[W]()/q):0),m>=g&&s[bb](m<i?q*e(s[Y]()/q):1),m>=i&&(s[bc](m<j?q*e(s[Z]()/q):0),r=s[$]()),m>=j&&(r-=r%q,s[bd](r)),m===h&&s[bb](s[Y]()-s[X]()+o.startOfWeek),a=1,r=s[$]();var t=s.getTime()/z,u=s[Z](),v=s[Y]();while(t<T&&a<cv)bI.push(t),m===j?t=U(r+a*q,0)/z:m===i?t=U(r,u+a*q)/z:!!b||m!==g&&m!==h?t+=m*q:t=U(r,u,v+a*q*(m===g?1:7)),a++;bI.push(t),bT=o.dateTimeLabelFormats[l[0]]}function co(a){var b,f=a;return bH=bC(bH,c.pow(10,e(c.log(bD)/c.LN10))),bH<1&&(b=d(1/bH)*10,f=d(a*b)/b),f}function cp(){var a,b=co(e(be/bD)*bD),c=co(f(T/bD)*bD);bI=[],a=co(b);while(a<=c)bI.push(a),a=co(a+bD)}function cq(){var a,c,d,e,f=o.tickInterval,i=o.tickPixelInterval,j=o.maxZoom||(b&&!bz(o.min)&&!bz(o.max)?h(ck.smallestInterval*5,N-K):null),l;w=k?cv:cu,bo?(d=ck[b?"xAxis":"yAxis"][o.linkedTo],e=d.getExtremes(),be=bC(e.min,e.dataMin),T=bC(e.max,e.dataMax)):(be=bC(R,o.min,K),T=bC(S,o.max,N)),t&&(be=bw(be),T=bw(T)),T-be<j&&(l=(j-T+be)/2,be=g(be-l,bC(o.min,be-l),K),T=h(be+j,bC(o.max,be+j),N)),!bU&&!bt&&!bo&&bz(be)&&bz(T)&&(a=T-be||1,!bz(o.min)&&!bz(R)&&bi&&(K<0||!bp)&&(be-=a*bi),!bz(o.max)&&!bz(S)&&bn&&(N>0||!bs)&&(T+=a*bn)),be===T?bD=1:bo&&!f&&i===d.options.tickPixelInterval?bD=d.tickInterval:bD=bC(f,bU?1:(T-be)*i/w),!s&&!bz(o.tickInterval)&&(bD=cm(bD)),p.tickInterval=bD,bE=o.minorTickInterval==="auto"&&bD?bD/5:o.minorTickInterval,s?cn():cp();if(!bo){if(bU||b&&ck.hasColumn){c=(bU?1:bD)*.5;if(bU||!bz(bC(o.min,R)))be-=c;if(bU||!bz(bC(o.max,S)))T+=c}var m=bI[0],n=bI[bI.length-1];o.startOnTick?be=m:be>m&&bI.shift(),o.endOnTick?T=n:T<n&&bI.pop(),cG||(cG={x:0,y:0}),!s&&bI.length>cG[v]&&(cG[v]=bI.length)}}function cr(){if(cG&&!s&&!bU&&!bo){var a=bQ,b=bI.length;bQ=cG[v];if(b<bQ){while(bI.length<bQ)bI.push(co(bI[bI.length-1]+bD));x*=(b-1)/(bQ-1),T=bI[bI.length-1]}bz(a)&&bQ!==a&&(p.isDirty=!0)}}function cs(){var a,c;bf=be,bh=T,cl(),cq(),y=x,x=w/(T-be||1);if(!b)for(a in n)for(c in n[a])n[a][c].cum=n[a][c].total;p.isDirty||(p.isDirty=be!==bf||T!==bh)}function ct(a,b,c,d){c=bC(c,!0),bm(p,"setExtremes",{min:a,max:b},function(){R=a,S=b,c&&ck.redraw(d)})}function cx(){return{min:be,max:T,dataMin:K,dataMax:N,userMin:R,userMax:S}}function cy(a){return be>a?a=be:T<a&&(a=T),D(a,0,1)}function cz(a){var b=(new ci(a)).render();return bB.push(b),b}function cA(){var a=Q.length&&bz(be)&&bz(T),b=0,c=0,d=o.title,e=o.labels,f=[-1,1,1,-1][m],h;G||(G=cJ.g("axis").attr({zIndex:7}).add(),H=cJ.g("grid").attr({zIndex:1}).add()),bR=0;if(a||bo)bg(bI,function(a){bJ[a]?bJ[a].addLabel():bJ[a]=new ch(a);if(m===0||m===2||{1:"left",3:"right"}[m]===e.align)bR=g(bJ[a].getLabelSize(),bR)}),ca&&(bR+=(ca-1)*16);else for(h in bJ)bJ[h].destroy(),delete bJ[h];d&&d.text&&(q||(q=p.axisTitle=cJ.text(d.text,0,0,d.useHTML).attr({zIndex:7,rotation:d.rotation||0,align:d.textAlign||{low:"left",middle:"center",high:"right"}[d.align]}).css(d.style).add(),q.isNew=!0),b=q.getBBox()[k?"height":"width"],c=bC(d.margin,k?5:10)),u=f*(o.offset||bP[m]),bS=bR+(m!==2&&bR&&f*o.labels[k?"y":"x"])+c,bP[m]=g(bP[m],bS+b+f*u)}function cB(){var a=o.title,b=o.stackLabels,c=o.alternateGridColor,d=o.lineWidth,e,f,g,h=ck.hasRendered,i=h&&bz(bf)&&!isNaN(bf),l=Q.length&&bz(be)&&bz(T);w=k?cv:cu,x=w/(T-be||1),A=k?bO:bN;if(l||bo){if(bE&&!bU){var r=be+(bI[0]-be)%bE;for(;r<=T;r+=bE)bK[r]||(bK[r]=new ch(r,!0)),i&&bK[r].isNew&&bK[r].render(null,!0),bK[r].isActive=!0,bK[r].render()}bg(bI,function(a,b){if(!bo||a>=be&&a<=T)i&&bJ[a].isNew&&bJ[a].render(b,!0),bJ[a].isActive=!0,bJ[a].render(b)}),c&&bg(bI,function(a,b){b%2===0&&a<T&&(bM[a]||(bM[a]=new ci),bM[a].options={from:a,to:bI[b+1]!==F?bI[b+1]:T,color:c},bM[a].render(),bM[a].isActive=!0)}),h||bg((o.plotLines||[]).concat(o.plotBands||[]),function(a){bB.push((new ci(a)).render())})}bg([bJ,bK,bM],function(a){var b;for(b in a)a[b].isActive?a[b].isActive=!1:(a[b].destroy(),delete a[b])}),d&&(e=bO+(j?cv:0)+u,f=cc-bN-(j?cu:0)+u,g=cJ.crispLine([O,k?bO:e,k?f:bv,P,k?cb-bF:e,k?f:cc-bN],d),I?I.animate({d:g}):I=cJ.path(g).attr({stroke:o.lineColor,"stroke-width":d,zIndex:7}).add());if(q){var s=k?bO:bv,t=br(a.style.fontSize||12),v={low:s+(k?0:w),middle:s+w/2,high:s+(k?w:0)}[a.align],y=(k?bv+cu:bO)+(k?1:-1)*(j?-1:1)*bS+(m===2?t:0);q[q.isNew?"attr":"animate"]({x:k?v:y+(j?cv:0)+u+(a.x||0),y:k?y-(j?cu:0)+u:v+(a.y||0)}),q.isNew=!1}if(b&&b.enabled){var z,B,C,D=p.stackTotalGroup;D||(p.stackTotalGroup=D=cJ.g("stack-labels").attr({visibility:L,zIndex:6}).translate(bO,bv).add());for(z in n){B=n[z];for(C in B)B[C].render(D)}}p.isDirty=!1}function cC(a){var b=bB.length;while(b--)bB[b].id===a&&bB[b].destroy()}function cD(){cw.resetTracker&&cw.resetTracker(),cB(),bg(bB,function(a){a.render()}),bg(Q,function(a){a.isDirty=!0})}function cE(b,c){p.categories=a.categories=bU=b,bg(Q,function(a){a.translate(),a.setTooltipPoints(!0)}),p.isDirty=!0,bC(c,!0)&&ck.redraw()}function cF(){var a;bl(p);for(a in n)bL(n[a]),n[a]=null;p.stackTotalGroup&&(p.stackTotalGroup=p.stackTotalGroup.destroy()),bg([bJ,bK,bM,bB],function(a){bL(a)}),bg([I,G,H,q],function(a){a&&a.destroy()}),I=G=H=q=null}var b=a.isX,j=a.opposite,k=cI?!b:b,m=k?j?0:2:j?1:3,n={},o=bj(b?bV:bW,[b$,bY,bZ,bX][m],a),p=this,q,r=o.type,s=r==="datetime",t=r==="logarithmic",u=o.offset||0,v=b?"x":"y",w,x,y,A=k?bO:bN,D,E,G,H,I,K,N,Q,R,S,T=null,be=null,bf,bh,bi=o.minPadding,bn=o.maxPadding,bo=bz(o.linkedTo),bp,bs,bt,bu=o.events,bA,bB=[],bD,bE,bH,bI,bJ={},bK={},bM={},bQ,bR,bS,bT,bU=o.categories,b_=o.labels.formatter||function(){var a=this.value,b;return bT?b=C(bT,a):bD%1e6===0?b=a/1e6+"M":bD%1e3===0?b=a/1e3+"k":!bU&&a>=1e3?b=bG(a,0):b=a,b},ca=k&&o.labels.staggerLines,cd=o.reversed,cg=bU&&o.tickmarkPlacement==="between"?.5:0;ch.prototype={addLabel:function(){var a=this.pos,b=o.labels,c,e=!(a===be&&!bC(o.showFirstLabel,1)||a===T&&!bC(o.showLastLabel,0)),f=bU&&k&&bU.length&&!b.step&&!b.staggerLines&&!b.rotation&&cv/bU.length||!k&&cv/2,h,i=bU&&bz(bU[a])?bU[a]:a,j=this.label;c=b_.call({isFirst:a===bI[0],isLast:a===bI[bI.length-1],dateTimeLabelFormat:bT,value:t?bx(i):i}),h=f&&{width:g(1,d(f-2*(b.padding||10)))+M},h=bq(h,b.style),j===F?this.label=bz(c)&&e&&b.enabled?cJ.text(c,0,0,b.useHTML).attr({align:b.align,rotation:b.rotation}).css(h).add(G):null:j&&j.attr({text:c}).css(h)},getLabelSize:function(){var a=this.label;return a?(this.labelBBox=a.getBBox())[k?"height":"width"]:0},render:function(a,b){var c=this,d=!c.minor,e=c.label,f=c.pos,g=o.labels,h=c.gridLine,i=d?o.gridLineWidth:o.minorGridLineWidth,l=d?o.gridLineColor:o.minorGridLineColor,m=d?o.gridLineDashStyle:o.minorGridLineDashStyle,n,p=c.mark,q,r=d?o.tickLength:o.minorTickLength,s=d?o.tickWidth:o.minorTickWidth||0,t=d?o.tickColor:o.minorTickColor,v=d?o.tickPosition:o.minorTickPosition,w=g.step,y=b&&cf||cc,z,B,C;B=k?D(f+cg,null,null,b)+A:bO+u+(j?(b&&ce||cb)-bF-bO:0),C=k?y-bN+u-(j?cu:0):y-D(f+cg,null,null,b)-A,i&&(n=E(f+cg,i,b),h===F&&(z={stroke:l,"stroke-width":i},m&&(z.dashstyle=m),d&&(z.zIndex=1),c.gridLine=h=i?cJ.path(n).attr(z).add(H):null),!b&&h&&n&&h.animate({d:n})),s&&(v==="inside"&&(r=-r),j&&(r=-r),q=cJ.crispLine([O,B,C,P,B+(k?0:-r),C+(k?r:0)],s),p?p.animate({d:q}):c.mark=cJ.path(q).attr({stroke:t,"stroke-width":s}).add(G)),e&&!isNaN(B)&&(B=B+g.x-(cg&&k?cg*x*(cd?-1:1):0),C=C+g.y-(cg&&!k?cg*x*(cd?1:-1):0),bz(g.y)||(C+=br(e.styles.lineHeight)*.9-e.getBBox().height/2),ca&&(C+=a/(w||1)%ca*16),w&&e[a%w?"hide":"show"](),e[c.isNew?"attr":"animate"]({x:B,y:C})),c.isNew=!1},destroy:function(){bL(this)}},ci.prototype={render:function(){var a=this,b=a.options,d=b.label,e=a.label,f=b.width,i=b.to,j=b.from,l=b.value,m,n=b.dashStyle,o=a.svgElem,p=[],q,r,s,u,v,w,x=b.color,y=b.zIndex,z=b.events,A;t&&(j=bw(j),i=bw(i),l=bw(l));if(f)p=E(l,f),A={stroke:x,"stroke-width":f},n&&(A.dashstyle=n);else if(bz(j)&&bz(i))j=g(j,be),i=h(i,T),m=E(i),p=E(j),p&&m?p.push(m[4],m[5],m[1],m[2]):p=null,A={fill:x};else return;bz(y)&&(A.zIndex=y);if(o)p?o.animate({d:p},null,o.onGetPath):(o.hide(),o.onGetPath=function(){o.show()});else if(p&&p.length){a.svgElem=o=cJ.path(p).attr(A).add();if(z){q=function(b){o.on(b,function(c){z[b].apply(a,[c])})};for(r in z)q(r)}}return d&&bz(d.text)&&p&&p.length&&cv>0&&cu>0?(d=bj({align:k&&m&&"center",x:k?!m&&4:10,verticalAlign:!k&&m&&"middle",y:k?m?16:10:m?6:-4,rotation:k&&!m&&90},d),e||(a.label=e=cJ.text(d.text,0,0).attr({align:d.textAlign||d.align,rotation:d.rotation,zIndex:y}).css(d.style).add()),s=[p[1],p[4],bC(p[6],p[1])],u=[p[2],p[5],bC(p[7],p[2])],v=h.apply(c,s),w=h.apply(c,u),e.align(d,!1,{x:v,y:w,width:g.apply(c,s)-v,height:g.apply(c,u)-w}),e.show()):e&&e.hide(),a},destroy:function(){var a=this;bL(a),by(bB,a)}},cj.prototype={destroy:function(){bL(this)},setTotal:function(a){this.total=a,this.cum=a},render:function(a){var b=this,c=b.options.formatter.call(b);b.label?b.label.attr({text:c,visibility:J}):b.label=ck.renderer.text(c,0,0).css(b.options.style).attr({align:b.textAlign,rotation:b.options.rotation,visibility:J}).add(a)},setOffset:function(a,b){var c=this,d=c.isNegative,e=p.translate(c.total),f=p.translate(0),g=i(e-f),h=ck.xAxis[0].translate(c.x)+a,j=ck.plotHeight,k={x:cI?d?e:e-g:h,y:cI?j-h-b:d?j-e-g:j-e,width:cI?g:b,height:cI?b:g};c.label&&c.label.align(c.alignOptions,null,k).attr({visibility:L})}},D=function(a,b,c,d,e){var f=1,g=0,h=d?y:x,i=d?bf:be,j;return h||(h=x),c&&(f*=-1,g=w),cd&&(f*=-1,g-=f*w),b?(cd&&(a=w-a),j=a/h+i,t&&e&&(j=bx(j))):(t&&e&&(a=bw(a)),j=f*(a-i)*h+g),j},E=function(a,b,c){var e,f,g,h,i=D(a,null,null,c),j=c&&cf||cc,l=c&&ce||cb,m;e=g=d(i+A),f=h=d(j-i-A);if(isNaN(i))m=!0;else if(k){f=bv,h=j-bN;if(e<bO||e>bO+cv)m=!0}else{e=bO,g=l-bF;if(f<bv||f>bv+cu)m=!0}return m?null:cJ.crispLine([O,e,f,P,g,h],b||0)},cI&&b&&cd===F&&(cd=!0),bq(p,{addPlotBand:cz,addPlotLine:cz,adjustTickAmount:cr,categories:bU,getExtremes:cx,getPlotLinePath:E,getThreshold:cy,isXAxis:b,options:o,plotLinesAndBands:bB,getOffset:cA,render:cB,setCategories:cE,setExtremes:ct,setScale:cs,setTickPositions:cq,translate:D,redraw:cD,removePlotBand:cC,removePlotLine:cC,reversed:cd,stacks:n,destroy:cF});for(bA in bu)bk(p,bA,bu[bA]);cs()}function cV(){function b(b,c,d,e){if(!a[b]){var f=cJ.text(c,0,0).css(j.toolbar.itemStyle).align({align:"right",x:-bF-20,y:bv+30}).on("click",e).attr({align:"right",zIndex:20}).add();a[b]=f}}function c(b){bT(a[b].element),a[b]=null}var a={};return{add:b,remove:c}}function cW(a){function t(){bg(f,function(a){a&&a.destroy()}),bg([r,s,q],function(a){a&&a.destroy()}),r=s=q=null}function u(){var a=this,b=a.points||bB(a),c=b[0].series.xAxis,d=a.x,e=c&&c.options.type==="datetime",f=bs(d)||e,g;return g=f?['<span style="font-size: 10px">'+(e?C("%A, %b %e, %Y",d):d)+"</span>"]:[],bg(b,function(a){g.push(a.point.tooltipFormatter(f))}),g.join("<br/>")}function v(a,b){o=l?a:(2*o+a)/3,p=l?b:(p+b)/2,q.translate(o,p),i(a-o)>1||i(b-p)>1?cK=function(){v(a,b)}:cK=null}function w(){if(!l){var a=ck.hoverPoints;q.hide(),bg(f,function(a){a&&a.hide()}),a&&bg(a,function(a){a.setState()}),ck.hoverPoints=null,l=!0}}function x(c){var g,i,o,p,t,x=0,y={},z,A=[],B=c.tooltipPos,C=a.formatter||u,D=ck.hoverPoints,E;h?(D&&bg(D,function(a){a.setState()}),ck.hoverPoints=c,bg(c,function(a){a.setState(S),x+=a.plotY,A.push(a.getLabelConfig())}),t=c[0].plotX,x=d(x)/c.length,y={x:c[0].category},y.points=A,c=c[0]):y=c.getLabelConfig(),z=C.call(y),b=c.series,t=h?t:c.plotX,x=h?x:c.plotY,g=d(B?B[0]:cI?cv-x:t),i=d(B?B[1]:cI?cu-t:x),o=h||!c.series.isCartesian||co(g,i),z===!1||!o?w():(l&&(q.show(),l=!1),s.attr({text:z}),p=s.getBBox(),m=p.width+2*j,n=p.height+2*j,r.attr({width:m,height:n,stroke:a.borderColor||c.color||b.color||"#606060"}),E=bJ(m,n,bO,bv,cv,cu,{x:g,y:i}),v(d(E.x-k),d(E.y-k)));if(e){e=bB(e);var F,G=e.length,H,I;while(G--)I=c.series[G?"yAxis":"xAxis"],e[G]&&I&&(F=I.getPlotLinePath(c[G?"y":"x"],1),f[G]?f[G].attr({d:F,visibility:L}):(H={"stroke-width":e[G].width||1,stroke:e[G].color||"#C0C0C0",zIndex:2},e[G].dashStyle&&(H.dashstyle=e[G].dashStyle),f[G]=cJ.path(F).attr(H).add()))}}var b,c=a.borderWidth,e=a.crosshairs,f=[],g=a.style,h=a.shared,j=br(g.padding),k=c+j,l=!0,m,n,o=0,p=0;g.padding=0;var q=cJ.g("tooltip").attr({zIndex:8}).add(),r=cJ.rect(k,k,0,0,a.borderRadius,c).attr({fill:a.backgroundColor,"stroke-width":c}).add(q).shadow(a.shadow),s=cJ.text("",j+k,br(g.fontSize)+j+k,a.useHTML).attr({zIndex:1}).css(g).add(q);return q.hide(),{shared:h,refresh:x,hide:w,destroy:t}}function cX(c){function t(c){var e,f=q&&a.width/a.body.scrollWidth-1,g,h,i,j;c=c||b.event,c.target||(c.target=c.srcElement),e=c.touches?c.touches.item(0):c;if(c.type!=="mousemove"||b.opera||f)cC=bH(bS),g=cC.left,h=cC.top;return o?(i=c.x,j=c.y):e.layerX===F?(i=e.pageX-g,j=e.pageY-h):(i=c.layerX,j=c.layerY),f&&(i+=d((f+1)*g-g),j+=d((f+1)*h-h)),bq(c,{chartX:i,chartY:j})}function u(a){var b={xAxis:[],yAxis:[]};return bg(cF,function(c){var d=c.translate,e=c.isXAxis,f=cI?!e:e;b[e?"xAxis":"yAxis"].push({axis:c,value:d(f?a.chartX-bO:cu-a.chartY+bv,!0)})}),b}function v(a){var b,d,e=ck.hoverPoint,f=ck.hoverSeries,g,j,k=cb,l=cI?a.chartY:a.chartX-bO;if(cp&&c.shared){d=[],g=cH.length;for(j=0;j<g;j++)cH[j].visible&&cH[j].tooltipPoints.length&&(b=cH[j].tooltipPoints[l],b._dist=i(l-b.plotX),k=h(k,b._dist),d.push(b));g=d.length;while(g--)d[g]._dist>k&&d.splice(g,1);d.length&&d[0].plotX!==cM&&(cp.refresh(d),cM=d[0].plotX)}f&&f.tracker&&(b=f.tooltipPoints[l],b&&b!==e&&b.onMouseOver())}function x(){var a=ck.hoverSeries,b=ck.hoverPoint;b&&b.onMouseOut(),a&&a.onMouseOut(),cp&&cp.hide(),cM=null}function y(){if(k){var b={xAxis:[],yAxis:[]},c=k.getBBox(),d=c.x-bO,e=c.y-bv;j&&(bg(cF,function(a){var f=a.translate,i=a.isXAxis,j=cI?!i:i,k=f(j?d:cu-e-c.height,!0,0,0,1),l=f(j?d+c.width:cu-e,!0,0,0,1);b[i?"xAxis":"yAxis"].push({axis:a,min:h(k,l),max:g(k,l)})}),bm(ck,"selection",b,cS)),k=k.destroy()}ck.mouseIsDown=cq=j=!1,bl(a,w?"touchend":"mouseup",y)}function z(a){var b=bz(a.pageX)?a.pageX:a.page.x,c=bz(a.pageX)?a.pageY:a.page.y;cC&&!co(b-cC.left-bO,c-cC.top-bv)&&x()}function A(){var b=!0;bS.onmousedown=function(b){b=t(b),!w&&b.preventDefault&&b.preventDefault(),ck.mouseIsDown=cq=!0,e=b.chartX,f=b.chartY,bk(a,w?"touchend":"mouseup",y)};var c=function(a){if(a&&a.touches&&a.touches.length>1)return;a=t(a),w||(a.returnValue=!1);var c=a.chartX,d=a.chartY,g=!co(c-bO,d-bv);cC||(cC=bH(bS)),w&&a.type==="touchstart"&&(bA(a.target,"isTracker")?ck.runTrackerClick||a.preventDefault():!cm&&!g&&a.preventDefault()),g&&(c<bO?c=bO:c>bO+cv&&(c=bO+cv),d<bv?d=bv:d>bv+cu&&(d=bv+cu));if(cq&&a.type!=="touchstart"){j=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2));if(j>10){cD&&(n||p)&&co(e-bO,f-bv)&&(k||(k=cJ.rect(bO,bv,r?1:cv,s?1:cu,0).attr({fill:l.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()));if(k&&r){var h=c-e;k.attr({width:i(h),x:(h>0?0:h)+e})}if(k&&s){var m=d-f;k.attr({height:i(m),y:(m>0?0:m)+f})}}}else g||v(a);return b=g,g||!cD};bS.onmousemove=c,bk(bS,"mouseleave",x),bk(a,"mousemove",z),bS.ontouchstart=function(a){(n||p)&&bS.onmousedown(a),c(a)},bS.ontouchmove=c,bS.ontouchend=function(){j&&x()},bS.onclick=function(a){var b=ck.hoverPoint;a=t(a),a.cancelBubble=!0;if(!j)if(b&&bA(a.target,"isTracker")){var c=b.plotX,d=b.plotY;bq(b,{pageX:cC.left+bO+(cI?cv-d:c),pageY:cC.top+bv+(cI?cu-c:d)}),bm(b.series,"click",bq(a,{point:b})),b.firePointEvent("click",a)}else bq(a,u(a)),co(a.chartX-bO,a.chartY-bv)&&bm(ck,"click",a);j=!1}}function B(){ck.trackerGroup&&(ck.trackerGroup=cx=ck.trackerGroup.destroy()),bl(a,"mousemove",z),bS.onclick=bS.onmousedown=bS.onmousemove=bS.ontouchstart=bS.ontouchend=bS.ontouchmove=null}var e,f,j,k,m=l.zoomType,n=/x/.test(m),p=/y/.test(m),r=n&&!cI||p&&cI,s=p&&!cI||n&&cI;cy=function(){cx?(cx.translate(bO,bv),cI&&cx.attr({width:ck.plotWidth,height:ck.plotHeight}).invert()):ck.trackerGroup=cx=cJ.g("tracker").attr({zIndex:9}).add()},cy(),c.enabled&&(ck.tooltip=cp=cW(c)),A(),cL=setInterval(function(){cK&&cK()},32),bq(this,{zoomX:n,zoomY:p,resetTracker:x,destroy:B})}function cZ(a){var b=a.type||l.type||l.defaultSeriesType,c=bp[b],d,e=ck.hasRendered;return e&&(cI&&b==="column"?c=bp.bar:!cI&&b==="bar"&&(c=bp.column)),d=new c,d.init(ck,a),!e&&d.inverted&&(cI=!0),d.isCartesian&&(cD=d.isCartesian),cH.push(d),d}function c$(a,b,c){var d;return a&&(bM(c,ck),b=bC(b,!0),bm(ck,"addSeries",{options:a},function(){d=cZ(a),d.isDirty=!0,ck.isDirtyLegend=!0,b&&ck.redraw()})),d}function c_(){l.alignTicks!==!1&&bg(cF,function(a){a.adjustTickAmount()}),cG=null}function da(a){var b=ck.isDirtyLegend,c,d=ck.isDirtyBox,e=cH.length,f=e,g=ck.clipRect,h;bM(a,ck);while(f--){h=cH[f];if(h.isDirty&&h.options.stacking){c=!0;break}}if(c){f=e;while(f--)h=cH[f],h.options.stacking&&(h.isDirty=!0)}bg(cH,function(a){a.isDirty&&(a.cleanData(),a.getSegments(),a.options.legendType==="point"&&(b=!0))}),b&&cz.renderLegend&&(cz.renderLegend(),ck.isDirtyLegend=!1),cD&&(cE||(cG=null,bg(cF,function(a){a.setScale()})),c_(),cO(),bg(cF,function(a){if(a.isDirty||d)a.redraw(),d=!0})),d&&(cN(),cy(),g&&(bo(g),g.animate({width:ck.plotSizeX,height:ck.plotSizeY}))),bg(cH,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()}),cw&&cw.resetTracker&&cw.resetTracker(),bm(ck,"redraw")}function db(a){var b=j.loading;cr||(cr=bE(G,{className:"highcharts-loading"},bq(b.style,{left:bO+M,top:bv+M,width:cv+M,height:cu+M,zIndex:10,display:N}),bS),cs=bE("span",null,b.labelStyle,cr)),cs.innerHTML=a||j.lang.loading,ct||(bD(cr,{opacity:0,display:""}),bn(cr,{opacity:b.style.opacity},{duration:b.showDuration}),ct=!0)}function dc(){bn(cr,{opacity:0},{duration:j.loading.hideDuration,complete:function(){bD(cr,{display:N})}}),ct=!1}function dd(a){var b,c,d;for(b=0;b<cF.length;b++)if(cF[b].options.id===a)return cF[b];for(b=0;b<cH.length;b++)if(cH[b].options.id===a)return cH[b];for(b=0;b<cH.length;b++){d=cH[b].data;for(c=0;c<d.length;c++)if(d[c].id===a)return d[c]}return null}function de(){var a=j.xAxis||{},b=j.yAxis||{},c;a=bB(a),bg(a,function(a,b){a.index=b,a.isX=!0}),b=bB(b),bg(b,function(a,b){a.index=b}),cF=a.concat(b),ck.xAxis=[],ck.yAxis=[],cF=bi(cF,function(a){return c=new cU(a),ck[c.isXAxis?"xAxis":"yAxis"].push(c),c}),c_()}function df(){var a=[];return bg(cH,function(b){a=a.concat(bh(b.data,function(a){return a.selected}))}),a}function dg(){return bh(cH,function(a){return a.selected})}function dh(a,b){bf=bj(j.title,a),bu=bj(j.subtitle,b),bg([["title",a,bf],["subtitle",b,bu]],function(a){var b=a[0],c=ck[b],d=a[1],e=a[2];c&&d&&(c=c.destroy()),e&&e.text&&!c&&(ck[b]=cJ.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":"highcharts-"+b,zIndex:1}).css(e.style).add().align(e,!1,be))})}function di(){b_=(bR||bQ).offsetWidth,ca=(bR||bQ).offsetHeight,ck.chartWidth=cb=l.width||b_||600,ck.chartHeight=cc=l.height||(ca>19?ca:400)}function dj(){bQ=l.renderTo,bU=K+y++,bs(bQ)&&(bQ=a.getElementById(bQ)),bQ.innerHTML="",bQ.offsetWidth||(bR=bQ.cloneNode(0),bD(bR,{position:H,top:"-9999px",display:""}),a.body.appendChild(bR)),di(),ck.container=bS=bE(G,{className:"highcharts-container"+(l.className?" "+l.className:""),id:bU},bq({position:I,overflow:J,width:cb+M,height:cc+M,textAlign:"left"},l.style),bR||bQ),ck.renderer=cJ=l.forExport?new cd(bS,cb,cc,!0):new v(bS,cb,cc);var c,d;r&&bS.getBoundingClientRect&&(c=function(){bD(bS,{left:0,top:0}),d=bS.getBoundingClientRect(),bD(bS,{left:-(d.left-br(d.left))+M,top:-(d.top-br(d.top))+M})},c(),bk(b,"resize",c),bk(ck,"destroy",function(){bl(b,"resize",c)}))}function dk(){function c(){var b=l.width||bQ.offsetWidth,c=l.height||bQ.offsetHeight;if(b&&c){if(b!==b_||c!==ca)clearTimeout(a),a=setTimeout(function(){cR(b,c,!1)},100);b_=b,ca=c}}var a;bk(b,"resize",c),bk(ck,"destroy",function(){bl(b,"resize",c)})}function dl(){bm(ck,"endResize",null,function(){cE-=1})}function dm(){var a=j.labels,b=j.credits,c;dh(),cz=ck.legend=new cY,cO(),bg(cF,function(a){a.setTickPositions(!0)}),c_(),cO(),cN(),cD&&bg(cF,function(a){a.render()}),ck.seriesGroup||(ck.seriesGroup=cJ.g("series-group").attr({zIndex:3}).add()),bg(cH,function(a){a.translate(),a.setTooltipPoints(),a.render()}),a.items&&bg(a.items,function(){var b=bq(a.style,this.style),c=br(b.left)+bO,d=br(b.top)+bv+12;delete b.left,delete b.top,cJ.text(this.html,c,d).attr({zIndex:2}).css(b).add()}),ck.toolbar||(ck.toolbar=cV()),b.enabled&&!ck.credits&&(c=b.href,ck.credits=cJ.text(b.text,0,0).on("click",function(){c&&(location.href=c)}).attr({align:b.position.align,zIndex:8}).css(b.style).add().align(b.position)),cy(),ck.hasRendered=!0,bR&&(bQ.appendChild(bS),bT(bR))}function dn(){var a,c=bS&&bS.parentNode;if(ck===null)return;bm(ck,"destroy"),bl(b,"unload",dn),bl(ck),a=cF.length;while(a--)cF[a]=cF[a].destroy();a=cH.length;while(a--)cH[a]=cH[a].destroy();bg(["title","subtitle","seriesGroup","clipRect","credits","tracker"],function(a){var b=ck[a];b&&(ck[a]=b.destroy())}),bg([cg,cz,cp,cJ,cw],function(a){a&&a.destroy&&a.destroy()}),cg=cz=cp=cJ=cw=null,bS&&(bS.innerHTML="",bl(bS),c&&c.removeChild(bS),bS=null),clearInterval(cL);for(a in ck)delete ck[a];ck=null}function dp(){var c="onreadystatechange",d="complete";if(!t&&b==b.top&&a.readyState!==d){a.attachEvent(c,function(){a.detachEvent(c,dp),a.readyState===d&&dp()});return}dj(),cP(),cQ(),bg(j.series||[],function(a){cZ(a)}),ck.inverted=cI=bC(cI,j.chart.inverted),de(),ck.render=dm,ck.tracker=cw=new cX(j.tooltip),dm(),bm(ck,"load"),k&&k.apply(ck,[ck]),bg(ck.callbacks,function(a){a.apply(ck,[ck])})}bV=bj(bV,B.xAxis),bW=bj(bW,B.yAxis),B.xAxis=B.yAxis=null,j=bj(B,j);var l=j.chart,m=l.margin,n=bt(m)?m:[m,m,m,m],p=bC(l.marginTop,n[0]),s=bC(l.marginRight,n[1]),u=bC(l.marginBottom,n[2]),x=bC(l.marginLeft,n[3]),A=l.spacingTop,E=l.spacingRight,Q=l.spacingBottom,T=l.spacingLeft,be,bf,bu,bv,bF,bN,bO,bP,bQ,bR,bS,bU,b_,ca,cb,cc,ce,cf,cg,ch,ci,cj,ck=this,cl=l.events,cm=cl&&!!cl.click,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD=l.showAxes,cE=0,cF=[],cG,cH=[],cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cY=function(){function z(b,c){var d=b.legendItem,e=b.legendLine,f=b.legendSymbol,g=j.color,h=c?a.itemStyle.color:g,i=c?b.color:g,k=c?b.pointAttr[R]:{stroke:g,fill:g};d&&d.css({fill:h}),e&&e.attr({stroke:i}),f&&f.attr(k)}function A(a,b,c){var d=a.legendItem,e=a.legendLine,f=a.legendSymbol,g=a.checkbox;d&&d.attr({x:b,y:c}),e&&e.translate(b,c-4),f&&f.attr({x:b+f.xOff,y:c+f.yOff}),g&&(g.x=b,g.y=c)}function B(a){var b=a.checkbox;bg(["legendItem","legendLine","legendSymbol"],function(b){a[b]&&a[b].destroy()}),b&&bT(a.checkbox)}function C(){r&&(r=r.destroy()),u&&(u=u.destroy())}function D(){bg(e,function(a){var b=a.checkbox,c=u.alignAttr;b&&bD(b,{left:c.translateX+a.legendItemWidth+b.x-40+M,top:c.translateY+b.y-11+M})})}function E(e){var f,l,r,s,t,x,y=e.legendItem,B=e.series||e,C=B.options,D=C&&C.borderWidth||0;if(!y){x=/^(bar|pie|area|column)$/.test(B.type),e.legendItem=y=cJ.text(a.labelFormatter.call(e),0,0).css(e.visible?h:j).on("mouseover",function(){e.setState(S),y.css(i)}).on("mouseout",function(){y.css(e.visible?h:j),e.setState()}).on("click",function(){var a="legendItemClick",b=function(){e.setVisible()};e.firePointEvent?e.firePointEvent(a,null,b):bm(e,a,null,b)}).attr({zIndex:2}).add(u);if(!x&&C&&C.lineWidth){var E={"stroke-width":C.lineWidth,zIndex:2};C.dashStyle&&(E.dashstyle=C.dashStyle),e.legendLine=cJ.path([O,-c-d,0,P,-d,0]).attr(E).add(u)}x?r=cJ.rect(s=-c-d,t=-11,c,12,2).attr({zIndex:3}).add(u):C&&C.marker&&C.marker.enabled&&(r=cJ.symbol(e.symbol,s=-c/2-d,t=-4,C.marker.radius).attr({zIndex:3}).add(u)),r&&(r.xOff=s+D%2/2,r.yOff=t+D%2/2),e.legendSymbol=r,z(e,e.visible),C&&C.showCheckbox&&(e.checkbox=bE("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},a.itemCheckboxStyle,bS),bk(e.checkbox,"click",function(a){var b=a.target;bm(e,"checkboxClick",{checked:b.checked},function(){e.select()})}))}f=y.getBBox(),l=e.legendItemWidth=a.itemWidth||c+d+f.width+k,q=f.height,b&&n-m+l>(w||cb-2*k-m)&&(n=m,o+=q),p=o,A(e,n,o),b?n+=l:o+=q,v=w||g(b?n-m:l,v)}function F(){n=m,o=l,v=0,p=0,u||(u=cJ.g("legend").attr({zIndex:7}).add()),e=[],bg(x,function(a){var b=a.options;if(!b.showInLegend)return;e=e.concat(b.legendType==="point"?a.data:a)}),bK(e,function(a,b){return(a.options.legendIndex||0)-(b.options.legendIndex||0)}),y&&e.reverse(),bg(e,E),cA=w||v,cB=p-l+q;if(s||t)cA+=2*k,cB+=2*k,r?cA>0&&cB>0&&(r[r.isNew?"attr":"animate"](r.crisp(null,null,null,cA,cB)),r.isNew=!1):(r=cJ.rect(0,0,cA,cB,a.borderRadius,s||0).attr({stroke:a.borderColor,"stroke-width":s||0,fill:t||N}).add(u).shadow(a.shadow),r.isNew=!0),r[e.length?"show":"hide"]();var b=["left","right","top","bottom"],c,d=4;while(d--)c=b[d],f[c]&&f[c]!=="auto"&&(a[d<2?"align":"verticalAlign"]=c,a[d<2?"x":"y"]=br(f[c])*(d%2?-1:1));e.length&&u.align(bq(a,{width:cA,height:cB}),!0,be),cE||D()}var a=ck.options.legend;if(!a.enabled)return;var b=a.layout==="horizontal",c=a.symbolWidth,d=a.symbolPadding,e,f=a.style,h=a.itemStyle,i=a.itemHoverStyle,j=a.itemHiddenStyle,k=br(f.padding),l=18,m=4+k+c+d,n,o,p,q=0,r,s=a.borderWidth,t=a.backgroundColor,u,v,w=a.width,x=ck.series,y=a.reversed;return F(),bk(ck,"endResize",D),{colorizeItem:z,destroyItem:B,renderLegend:F,destroy:C}};co=function(a,b){return a>=0&&a<=cv&&b>=0&&b<=cu},cT=function(){bm(ck,"selection",{resetSelection:!0},cS),ck.toolbar.remove("zoom")},cS=function(a){var b=B.lang,c=ck.pointCount<100;ck.toolbar.add("zoom",b.resetZoom,b.resetZoomTitle,cT),!a||a.resetSelection?bg(cF,function(a){a.setExtremes(null,null,!1,c)}):bg(a.xAxis.concat(a.yAxis),function(a){var b=a.axis;ck.tracker[b.isXAxis?"zoomX":"zoomY"]&&b.setExtremes(a.min,a.max,!1,c)}),da()},cO=function(){var a=j.legend,b=bC(a.margin,10),c=a.x,d=a.y,e=a.align,f=a.verticalAlign,h;cP(),(ck.title||ck.subtitle)&&!bz(p)&&(h=g(ck.title&&!bf.floating&&!bf.verticalAlign&&bf.y||0,ck.subtitle&&!bu.floating&&!bu.verticalAlign&&bu.y||0),h&&(bv=g(bv,h+bC(bf.margin,15)+A))),a.enabled&&!a.floating&&(e==="right"?bz(s)||(bF=g(bF,cA-c+b+E)):e==="left"?bz(x)||(bO=g(bO,cA+c+b+T)):f==="top"?bz(p)||(bv=g(bv,cB+d+b+A)):f==="bottom"&&(bz(u)||(bN=g(bN,cB-d+b+Q)))),cD&&bg(cF,function(a){a.getOffset()}),bz(x)||(bO+=bP[3]),bz(p)||(bv+=bP[0]),bz(u)||(bN+=bP[2]),bz(s)||(bF+=bP[1]),cQ()},cR=function(a,b,c){var e=ck.title,f=ck.subtitle;cE+=1,bM(c,ck),cf=cc,ce=cb,ck.chartWidth=cb=d(a),ck.chartHeight=cc=d(b),bD(bS,{width:cb+M,height:cc+M}),cJ.setSize(cb,cc,c),cv=cb-bO-bF,cu=cc-bv-bN,cG=null,bg(cF,function(a){a.isDirty=!0,a.setScale()}),bg(cH,function(a){a.isDirty=!0}),ck.isDirtyLegend=!0,ck.isDirtyBox=!0,cO(),e&&e.align(null,null,be),f&&f.align(null,null,be),da(c),cf=null,bm(ck,"resize"),D===!1?dl():setTimeout(dl,D&&D.duration||500)},cQ=function(){ck.plotLeft=bO=d(bO),ck.plotTop=bv=d(bv),ck.plotWidth=cv=d(cb-bO-bF),ck.plotHeight=cu=d(cc-bv-bN),ck.plotSizeX=cI?cu:cv,ck.plotSizeY=cI?cv:cu,be={x:T,y:A,width:cb-T-E,height:cc-A-Q}},cP=function(){bv=bC(p,A),bF=bC(s,E),bN=bC(u,Q),bO=bC(x,T),bP=[0,0,0,0]},cN=function(){var a=l.borderWidth||0,b=l.backgroundColor,c=l.plotBackgroundColor,d=l.plotBackgroundImage,e,f={x:bO,y:bv,width:cv,height:cu};e=a+(l.shadow?8:0);if(a||b)cg?cg.animate(cg.crisp(null,null,null,cb-e,cc-e)):cg=cJ.rect(e/2,e/2,cb-e,cc-e,l.borderRadius,a).attr({stroke:l.borderColor,"stroke-width":a,fill:b||N}).add().shadow(l.shadow);c&&(ch?ch.animate(f):ch=cJ.rect(bO,bv,cv,cu,0).attr({fill:c}).add().shadow(l.plotShadow)),d&&(ci?ci.animate(f):ci=cJ.image(d,bO,bv,cv,cu).add()),l.plotBorderWidth&&(cj?cj.animate(cj.crisp(null,bO,bv,cv,cu)):cj=cJ.rect(bO,bv,cv,cu,0,l.plotBorderWidth).attr({stroke:l.plotBorderColor,"stroke-width":l.plotBorderWidth,zIndex:4}).add()),ck.isDirtyBox=!1},bk(b,"unload",dn),l.reflow!==!1&&bk(ck,"load",dk);if(cl)for(cn in cl)bk(ck,cn,cl[cn]);ck.options=j,ck.series=cH,ck.addSeries=c$,ck.animation=bC(l.animation,!0),ck.destroy=dn,ck.get=dd,ck.getSelectedPoints=df,ck.getSelectedSeries=dg,ck.hideLoading=dc,ck.isInsidePlot=co,ck.redraw=da,ck.setSize=cR,ck.setTitle=dh,ck.showLoading=db,ck.pointCount=0,ck.counters=new bI,dp()}var a=document,b=window,c=Math,d=c.round,e=c.floor,f=c.ceil,g=c.max,h=c.min,i=c.abs,j=c.cos,k=c.sin,l=c.PI,m=l*2/360,n=navigator.userAgent,o=/msie/i.test(n)&&!b.opera,p=a.documentMode===8,q=/AppleWebKit/.test(n),r=/Firefox/.test(n),s="http://www.w3.org/2000/svg",t=!!a.createElementNS&&!!a.createElementNS(s,"svg").createSVGRect,u=r&&parseInt(n.split("Firefox/")[1],10)<4,v,w=a.documentElement.ontouchstart!==undefined,x={},y=0,z=1,A,B,C,D,E,F,G="div",H="absolute",I="relative",J="hidden",K="highcharts-",L="visible",M="px",N="none",O="M",P="L",Q="rgba(192,192,192,"+(t?1e-6:.002)+")",R="",S="hover",T="select",U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be=b.HighchartsAdapter,bf=be||{},bg=bf.each,bh=bf.grep,bi=bf.map,bj=bf.merge,bk=bf.addEvent,bl=bf.removeEvent,bm=bf.fireEvent,bn=bf.animate,bo=bf.stop,bp={};C=function(a,b,c){function d(a){return a.toString().replace(/^([0-9])$/,"0$1")}if(!bz(b)||isNaN(b))return"Invalid date";a=bC(a,"%Y-%m-%d %H:%M:%S");var e=new Date(b*z),f,g=e[W](),h=e[X](),i=e[Y](),j=e[Z](),k=e[$](),l=B.lang,m=l.weekdays,n={a:m[h].substr(0,3),A:m[h],d:d(i),e:i,b:l.shortMonths[j],B:l.months[j],m:d(j+1),y:k.toString().substr(2,2),Y:k,H:d(g),I:d(g%12||12),l:g%12||12,M:d(e[V]()),p:g<12?"AM":"PM",P:g<12?"am":"pm",S:d(e.getSeconds())};for(f in n)a=a.replace("%"+f,n[f]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a},bI.prototype={wrapColor:function(a){this.color>=a&&(this.color=0)},wrapSymbol:function(a){this.symbol>=a&&(this.symbol=0)}},E={init:function(a,b,c){b=b||"";var d=a.shift,e=b.indexOf("C")>-1,f=e?7:3,g,h,i,j=b.split(" "),k=[].concat(c),l,m,n=function(a){i=a.length;while(i--)a[i]===O&&a.splice(i+1,0,a[i+1],a[i+2],a[i+1],a[i+2])};e&&(n(j),n(k)),a.isArea&&(l=j.splice(j.length-6,6),m=k.splice(k.length-6,6)),d&&(k=[].concat(k).splice(0,f).concat(k),a.shift=!1);if(j.length){g=k.length;while(j.length<g)h=[].concat(j).splice(j.length-f,f),e&&(h[f-6]=h[f-2],h[f-5]=h[f-1]),j=j.concat(h)}return l&&(j=j.concat(l),k=k.concat(m)),[j,k]},step:function(a,b,c,d){var e=[],f=a.length,g;if(c===1)e=d;else if(f===b.length&&c<1)while(f--)g=parseFloat(a[f]),e[f]=isNaN(g)?a[f]:c*parseFloat(b[f]-g)+g;else e=b;return e}},be&&be.init&&be.init(E);if(!be&&b.jQuery){var bN=jQuery;bg=function(a,b){var c=0,d=a.length;for(;c<d;c++)if(b.call(a[c],a[c],c,a)===!1)return c},bh=bN.grep,bi=function(a,b){var c=[],d=0,e=a.length;for(;d<e;d++)c[d]=b.call(a[d],a[d],d,a);return c},bj=function(){var a=arguments;return bN.extend(!0,null,a[0],a[1],a[2],a[3])},bk=function(a,b,c){bN(a).bind(b,c)},bl=function(b,c,d){var e=a.removeEventListener?"removeEventListener":"detachEvent";a[e]&&!b[e]&&(b[e]=function(){}),bN(b).unbind(c,d)},bm=function(a,b,c,d){var e=bN.Event(b),f="detached"+b;bq(e,c),a[b]&&(a[f]=a[b],a[b]=null),bN(a).trigger(e),a[f]&&(a[b]=a[f],a[f]=null),d&&!e.isDefaultPrevented()&&d(e)},bn=function(a,b,c){var d=bN(a);b.d&&(a.toD=b.d,b.d=1),d.stop(),d.animate(b,c)},bo=function(a){bN(a).stop()},bN.extend(bN.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}});var bO=jQuery.fx,bP=bO.step;bg(["cur","_default","width","height"],function(a,b){var c=b?bP:bO.prototype,d=c[a],e;d&&(c[a]=function(a){return a=b?a:this,e=a.elem,e.attr?e.attr(a.prop,a.now):d.apply(this,arguments)})}),bP.d=function(a){var b=a.elem;if(!a.started){var c=E.init(b,b.d,b.toD);a.start=c[0],a.end=c[1],a.started=!0}b.attr("d",E.step(a.start,a.end,a.pos,b.toD))}}var bU={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};B={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0"},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:bj(bU,{enabled:!1,y:-6,formatter:function(){return this.y}}),showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:H,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,shadow:!1,style:{padding:"5px"},itemStyle:{cursor:"pointer",color:"#3E576F"},itemHoverStyle:{cursor:"pointer",color:"#000000"},itemHiddenStyle:{color:"#C0C0C0"},itemCheckboxStyle:{position:H,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{hideDuration:100,labelStyle:{fontWeight:"bold",position:I,top:"1em"},showDuration:100,style:{position:H,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,shadow:!0,snap:w?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"#4572A7",cursor:"pointer"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var bV={dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:bU,lineColor:"#C0D0E0",lineWidth:1,max:null,min:null,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},bW=bj(bV,{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:bU.style}}),bX={labels:{align:"right",x:-8,y:null},title:{rotation:270}},bY={labels:{align:"left",x:8,y:null},title:{rotation:90}},bZ={labels:{align:"center",x:0,y:14},title:{rotation:0}},b$=bj(bZ,{labels:{y:-5}}),b_=B.plotOptions,ca=b_.line;b_.spline=bj(ca),b_.scatter=bj(ca,{lineWidth:0,states:{hover:{lineWidth:0}}}),b_.area=bj(ca,{}),b_.areaspline=bj(b_.area),b_.column=bj(ca,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{y:null,verticalAlign:null}}),b_.bar=bj(b_.column,{dataLabels:{align:"left",x:5,y:0}}),b_.pie=bj(ca,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},y:5},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}}}),bQ();var cb=function(a){function d(a){c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(a),c?b=[br(c[1]),br(c[2]),br(c[3]),parseFloat(c[4],10)]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a),c&&(b=[br(c[1],16),br(c[2],16),br(c[3],16),1]))}function e(c){var d;return b&&!isNaN(b[0])?c==="rgb"?d="rgb("+b[0]+","+b[1]+","+b[2]+")":c==="a"?d=b[3]:d="rgba("+b.join(",")+")":d=a,d}function f(a){if(bv(a)&&a!==0){var c;for(c=0;c<3;c++)b[c]+=br(a*255),b[c]<0&&(b[c]=0),b[c]>255&&(b[c]=255)}return this}function g(a){return b[3]=a,this}var b=[],c;return d(a),{get:e,brighten:f,setOpacity:g}};cc.prototype={init:function(b,c){this.element=a.createElementNS(s,c),this.renderer=b},animate:function(a,b,c){var d=bC(b,D,!0);d?(d=bj(d),c&&(d.complete=c),bn(this,a,d)):(this.attr(a),c&&c())},attr:function(b,c){var d,e,f,g,h=this.element,i=h.nodeName,j=this.renderer,k,l=this.shadows,m=this.htmlNode,n,o=this;bs(b)&&bz(c)&&(d=b,b={},b[d]=c);if(bs(b))d=b,i==="circle"?d={x:"cx",y:"cy"}[d]||d:d==="strokeWidth"&&(d="stroke-width"),o=bA(h,d)||this[d]||0,d!=="d"&&d!=="visibility"&&(o=parseFloat(o));else for(d in b){k=!1,e=b[d];if(d==="d")e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),this.d=e;else if(d==="x"&&i==="text"){for(f=0;f<h.childNodes.length;f++)g=h.childNodes[f],bA(g,"x")===bA(h,"x")&&bA(g,"x",e);this.rotation&&bA(h,"transform","rotate("+this.rotation+" "+e+" "+br(b.y||bA(h,"y"))+")")}else if(d==="fill")e=j.color(e,h,d);else if(i!=="circle"||d!=="x"&&d!=="y"){if(d==="translateX"||d==="translateY"||d==="rotation"||d==="verticalAlign")this[d]=e,this.updateTransform(),k=!0;else if(d==="stroke")e=j.color(e,h,d);else if(d==="dashstyle"){d="stroke-dasharray",e=e&&e.toLowerCase();if(e==="solid")e=N;else if(e){e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),f=e.length;while(f--)e[f]=br(e[f])*b["stroke-width"];e=e.join(",")}}else if(d==="isTracker")this[d]=e;else if(d==="width")e=br(e);else if(d==="align")d="text-anchor",e={left:"start",center:"middle",right:"end"}[e];else if(d==="title"){var p=a.createElementNS(s,"title");p.appendChild(a.createTextNode(e)),h.appendChild(p)}}else d={x:"cx",y:"cy"}[d]||d;d==="strokeWidth"&&(d="stroke-width"),q&&d==="stroke-width"&&e===0&&(e=1e-6),this.symbolName&&/^(x|y|r|start|end|innerR)/.test(d)&&(n||(this.symbolAttr(b),n=!0),k=!0);if(l&&/^(width|height|visibility|x|y|d)$/.test(d)){f=l.length;while(f--)bA(l[f],d,e)}(d==="width"||d==="height")&&i==="rect"&&e<0&&(e=0),d==="text"?(this.textStr=e,this.added&&j.buildText(this)):k||bA(h,d,e);if(m&&(d==="x"||d==="y"||d==="translateX"||d==="translateY"||d==="visibility")){var r=this,t,u=m.length?m:[this],v=u.length,w,x;for(x=0;x<v;x++)w=u[x],t=w.getBBox(),m=w.htmlNode,bD(m,bq(r.styles,{left:t.x+(r.translateX||0)+M,top:t.y+(r.translateY||0)+M})),d==="visibility"&&bD(m,{visibility:e})}}return o},symbolAttr:function(a){var b=this;bg(["x","y","r","start","end","width","height","innerR"],function(c){b[c]=bC(a[c],b[c])}),b.attr({d:b.renderer.symbols[b.symbolName](d(b.x*2)/2,d(b.y*2)/2,b.r,{start:b.start,end:b.end,width:b.width,height:b.height,innerR:b.innerR})})},clip:function(a){return this.attr("clip-path","url("+this.renderer.url+"#"+a.id+")")},crisp:function(a,b,c,d,f){var g=this,h,i={},j={},k;a=a||g.strokeWidth||0,k=a%2/2,j.x=e(b||g.x||0)+k,j.y=e(c||g.y||0)+k,j.width=e((d||g.width||0)-2*k),j.height=e((f||g.height||0)-2*k),j.strokeWidth=a;for(h in j)g[h]!==j[h]&&(g[h]=i[h]=j[h]);return i},css:function(a){var b=this,c=b.element,d=a&&a.width&&c.nodeName==="text",e,f="",g=function(a,b){return"-"+b.toLowerCase()};a&&a.color&&(a.fill=a.color),a=bq(b.styles,a),b.styles=a;if(o&&!t)d&&delete a.width,bD(b.element,a);else{for(e in a)f+=e.replace(/([A-Z])/g,g)+":"+a[e]+";";b.attr({style:f})}return d&&b.added&&b.renderer.buildText(b),b},on:function(a,b){var c=b;return w&&a==="click"&&(a="touchstart",c=function(a){a.preventDefault(),b()}),this.element["on"+a]=c,this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){var a=this;return a.inverted=!0,a.updateTransform(),a},updateTransform:function(){var a=this,b=a.translateX||0,c=a.translateY||0,d=a.inverted,e=a.rotation,f=[];d&&(b+=a.attr("width"),c+=a.attr("height")),(b||c)&&f.push("translate("+b+","+c+")"),d?f.push("rotate(90) scale(-1,1)"):e&&f.push("rotate("+e+" "+a.x+" "+a.y+")"),f.length&&bA(a.element,"transform",f.join(" "))},toFront:function(){var a=this.element;return a.parentNode.appendChild(a),this},align:function(a,b,c){var e=this;a?(e.alignOptions=a,e.alignByTranslate=b,c||e.renderer.alignedObjects.push(e)):(a=e.alignOptions,b=e.alignByTranslate),c=bC(c,e.renderer);var f=a.align,g=a.verticalAlign,h=(c.x||0)+(a.x||0),i=(c.y||0)+(a.y||0),j={};return/^(right|center)$/.test(f)&&(h+=(c.width-(a.width||0))/{right:1,center:2}[f]),j[b?"translateX":"x"]=d(h),/^(bottom|middle)$/.test(g)&&(i+=(c.height-(a.height||0))/({bottom:1,middle:2}[g]||1)),j[b?"translateY":"y"]=d(i),e[e.placed?"animate":"attr"](j),e.placed=!0,e.alignAttr=j,e},getBBox:function(){var a,b,c,d=this.rotation,e=d*m;try{a=bq({},this.element.getBBox())}catch(f){a={width:0,height:0}}return b=a.width,c=a.height,d&&(a.width=i(c*k(e))+i(b*j(e)),a.height=i(c*j(e))+i(b*k(e))),a},show:function(){return this.attr({visibility:L})},hide:function(){return this.attr({visibility:J})},add:function(a){var b=this.renderer,c=a||b,d=c.element||b.box,e=d.childNodes,f=this.element,g=bA(f,"zIndex"),h,i,j;this.parentInverted=a&&a.inverted,this.textStr!==undefined&&b.buildText(this),a&&this.htmlNode&&(a.htmlNode||(a.htmlNode=[]),a.htmlNode.push(this)),g&&(c.handleZ=!0,g=br(g));if(c.handleZ)for(j=0;j<e.length;j++){h=e[j],i=bA(h,"zIndex");if(h!==f&&(br(i)>g||!bz(g)&&bz(i)))return d.insertBefore(f,h),this}return d.appendChild(f),this.added=!0,this},destroy:function(){var a=this,b=a.element||{},c=a.shadows,d=b.parentNode,e,f;b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=null,bo(a),a.clipPath&&(a.clipPath=a.clipPath.destroy());if(a.stops){for(f=0;f<a.stops.length;f++)a.stops[f]=a.stops[f].destroy();a.stops=null}d&&d.removeChild(b),c&&bg(c,function(a){d=a.parentNode,d&&d.removeChild(a)}),by(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},empty:function(){var a=this.element,b=a.childNodes,c=b.length;while(c--)a.removeChild(b[c])},shadow:function(a,b){var c=[],d,e,f=this.element,g=this.parentInverted?"(-1,-1)":"(1,1)";if(a){for(d=1;d<=3;d++)e=f.cloneNode(0),bA(e,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":.05*d,"stroke-width":7-2*d,transform:"translate"+g,fill:N}),b?b.element.appendChild(e):f.parentNode.insertBefore(e,f),c.push(e);this.shadows=c}return this}};var cd=function(){this.init.apply(this,arguments)};cd.prototype={Element:cc,init:function(a,b,c,d){var e=this,f=location,g;g=e.createElement("svg").attr({xmlns:s,version:"1.1"}),a.appendChild(g.element),e.box=g.element,e.boxWrapper=g,e.alignedObjects=[],e.url=o?"":f.href.replace(/#.*?$/,""),e.defs=this.createElement("defs").add(),e.forExport=d,e.gradients=[],e.setSize(b,c,!1)},destroy:function(){var a=this,b,c=a.gradients,d=a.defs;a.box=null,a.boxWrapper=a.boxWrapper.destroy();if(c){for(b=0;b<c.length;b++)a.gradients[b]=c[b].destroy();a.gradients=null}return d&&(a.defs=d.destroy()),a.alignedObjects=null,null},createElement:function(a){var b=new this.Element;return b.init(this,a),b},buildText:function(c){var d=c.element,e=bC(c.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),f=d.childNodes,g=/style="([^"]+)"/,h=/href="([^"]+)"/,i=bA(d,"x"),j=c.styles,k=j&&c.useHTML&&!this.forExport,l=c.htmlNode,m=j&&br(j.width),n=j&&j.lineHeight,o,p="getComputedStyle",q=f.length;while(q--)d.removeChild(f[q]);m&&!c.added&&this.box.appendChild(d),bg(e,function(e,f){var j,k=0,l;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),j=e.split("|||"),bg(j,function(e){if(e!==""||j.length===1){var q={},r=a.createElementNS(s,"tspan");g.test(e)&&bA(r,"style",e.match(g)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),h.test(e)&&(bA(r,"onclick",'location.href="'+e.match(h)[1]+'"'),bD(r,{cursor:"pointer"})),e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),r.appendChild(a.createTextNode(e)),k?q.dx=3:q.x=i;if(!k){if(f){!t&&c.renderer.forExport&&bD(r,{display:"block"}),l=b[p]&&br(b[p](o,null).getPropertyValue("line-height"));if(!l||isNaN(l))l=n||o.offsetHeight||18;bA(r,"dy",l)}o=r}bA(r,q),d.appendChild(r),k++;if(m){var u=e.replace(/-/g,"- ").split(" "),v,w,x=[];while(u.length||x.length)w=d.getBBox().width,v=w>m,!v||u.length===1?(u=x,x=[],u.length&&(r=a.createElementNS(s,"tspan"),bA(r,{dy:n||16,x:i}),d.appendChild(r),w>m&&(m=w))):(r.removeChild(r.firstChild),x.unshift(u.pop())),u.length&&r.appendChild(a.createTextNode(u.join(" ").replace(/- /g,"-")))}}})});if(k){l||(l=c.htmlNode=bE("span",null,bq(j,{position:H,top:0,left:0}),this.box.parentNode)),l.innerHTML=c.textStr,q=f.length;while(q--)f[q].style.visibility=J}},crispLine:function(a,b){return a[1]===a[4]&&(a[1]=a[4]=d(a[1])+b%2/2),a[2]===a[5]&&(a[2]=a[5]=d(a[2])+b%2/2),a},path:function(a){return this.createElement("path").attr({d:a,fill:N})},circle:function(a,b,c){var d=bt(a)?a:{x:a,y:b,r:c};return this.createElement("circle").attr(d)},arc:function(a,b,c,d,e,f){return bt(a)&&(b=a.y,c=a.r,d=a.innerR,e=a.start,f=a.end,a=a.x),this.symbol("arc",a||0,b||0,c||0,{innerR:d||0,start:e||0,end:f||0})},rect:function(a,b,c,d,e,f){bt(a)&&(b=a.y,c=a.width,d=a.height,e=a.r,f=a.strokeWidth,a=a.x);var h=this.createElement("rect").attr({rx:e,ry:e,fill:N});return h.attr(h.crisp(f,a,b,g(c,0),g(d,0)))},setSize:function(a,b,c){var d=this,e=d.alignedObjects,f=e.length;d.width=a,d.height=b,d.boxWrapper[bC(c,!0)?"animate":"attr"]({width:a,height:b});while(f--)e[f].align()},g:function(a){var b=this.createElement("g");return bz(a)?b.attr({"class":K+a}):b},image:function(a,b,c,d,e){var f={preserveAspectRatio:N},g;return arguments.length>1&&bq(f,{x:b,y:c,width:d,height:e}),g=this.createElement("image").attr(f),g.element.setAttributeNS?g.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):g.element.setAttribute("hc-svg-href",a),g},symbol:function(a,b,c,e,f){var g,h=this.symbols[a],i=h&&h(d(b),d(c),e,f),j=/^url\((.*?)\)$/,k,l;if(i)g=this.path(i),bq(g,{symbolName:a,x:b,y:c,r:e}),f&&bq(g,f);else if(j.test(a)){var m=function(a,b){a.attr({width:b[0],height:b[1]}).translate(-d(b[0]/2),-d(b[1]/2))};k=a.match(j)[1],l=x[k],g=this.image(k).attr({x:b,y:c}),l?m(g,l):(g.attr({width:0,height:0}),bE("img",{onload:function(){var a=this;m(g,x[k]=[a.width,a.height])},src:k}))}else g=this.circle(b,c,e);return g},symbols:{square:function(a,b,c){var d=.707*c;return[O,a-d,b-d,P,a+d,b-d,a+d,b+d,a-d,b+d,"Z"]},triangle:function(a,b,c){return[O,a,b-1.33*c,P,a+c,b+.67*c,a-c,b+.67*c,"Z"]},"triangle-down":function(a,b,c){return[O,a,b+1.33*c,P,a-c,b-.67*c,a+c,b-.67*c,"Z"]},diamond:function(a,b,c){return[O,a,b-c,P,a+c,b,a,b+c,a-c,b,"Z"]},arc:function(a,b,c,d){var e=d.start,f=d.end-1e-6,g=d.innerR,h=j(e),i=k(e),m=j(f),n=k(f),o=d.end-e<l?0:1;return[O,a+c*h,b+c*i,"A",c,c,0,o,1,a+c*m,b+c*n,P,a+g*m,b+g*n,"A",g,g,0,o,0,a+g*h,b+g*i,"Z"]}},clipRect:function(a,b,c,d){var e,f=K+y++,g=this.createElement("clipPath").attr({id:f}).add(this.defs);return e=this.rect(a,b,c,d,0).add(g),e.id=f,e.clipPath=g,e},color:function(a,b,c){var d,e=/^rgba/;if(a&&a.linearGradient){var f=this,g="linearGradient",h=a[g],i=K+y++,j,k,l;return j=f.createElement(g).attr({id:i,gradientUnits:"userSpaceOnUse",x1:h[0],y1:h[1],x2:h[2],y2:h[3]}).add(f.defs),f.gradients.push(j),j.stops=[],bg(a.stops,function(a){var b;e.test(a[1])?(d=cb(a[1]),k=d.get("rgb"),l=d.get("a")):(k=a[1],l=1),b=f.createElement("stop").attr({offset:a[0],"stop-color":k,"stop-opacity":l}).add(j),j.stops.push(b)}),"url("+this.url+"#"+i+")"}return e.test(a)?(d=cb(a),bA(b,c+"-opacity",d.get("a")),d.get("rgb")):(b.removeAttribute(c+"-opacity"),a)},text:function(a,b,c,e){var f=B.chart.style,g;return b=d(bC(b,0)),c=d(bC(c,0)),g=this.createElement("text").attr({x:b,y:c,text:a}).css({fontFamily:f.fontFamily,fontSize:f.fontSize}),g.x=b,g.y=c,g.useHTML=e,g}},v=cd;var ce;if(!t){var cf=bF(cc,{init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ",H,";"];(b==="shape"||b===G)&&d.push("left:0;top:0;width:10px;height:10px;"),p&&d.push("visibility: ",b===G?J:L),c.push(' style="',d.join(""),'"/>'),b&&(c=b===G||b==="span"||b==="img"?c.join(""):a.prepVML(c),this.element=bE(c)),this.renderer=a},add:function(a){var b=this,c=b.renderer,d=b.element,e=c.box,f=a&&a.inverted,g=a?a.element||a:e;return f&&c.invertChild(d,g),p&&g.gVis===J&&bD(d,{visibility:J}),g.appendChild(d),b.added=!0,b.alignOnAdd&&b.updateTransform(),b},attr:function(a,b){var c,e,f,g=this.element||{},h=g.style,i=g.nodeName,j=this.renderer,k=this.symbolName,l,m,n=this.shadows,o,q=this;bs(a)&&bz(b)&&(c=a,a={},a[c]=b);if(bs(a))c=a,c==="strokeWidth"||c==="stroke-width"?q=this.strokeweight:q=this[c];else for(c in a){e=a[c],o=!1;if(k&&/^(x|y|r|start|end|width|height|innerR)/.test(c))m||(this.symbolAttr(a),m=!0),o=!0;else if(c==="d"){e=e||[],this.d=e.join(" "),f=e.length;var r=[];while(f--)bv(e[f])?r[f]=d(e[f]*10)-5:e[f]==="Z"?r[f]="x":r[f]=e[f];e=r.join(" ")||"x",g.path=e;if(n){f=n.length;while(f--)n[f].path=e}o=!0}else if(c==="zIndex"||c==="visibility"){if(p&&c==="visibility"&&i==="DIV"){g.gVis=e,l=g.childNodes,f=l.length;while(f--)bD(l[f],{visibility:e});e===L&&(e=null)}e&&(h[c]=e),o=!0}else if(/^(width|height)$/.test(c))this[c]=e,this.updateClipping?(this[c]=e,this.updateClipping()):h[c]=e,o=!0;else if(/^(x|y)$/.test(c))this[c]=e,g.tagName==="SPAN"?this.updateTransform():h[{x:"left",y:"top"}[c]]=e;else if(c==="class")g.className=e;else if(c==="stroke")e=j.color(e,g,c),c="strokecolor";else if(c==="stroke-width"||c==="strokeWidth")g.stroked=e?!0:!1,c="strokeweight",this[c]=e,bv(e)&&(e+=M);else if(c==="dashstyle"){var s=g.getElementsByTagName("stroke")[0]||bE(j.prepVML(["<stroke/>"]),null,null,g);s[c]=e||"solid",this.dashstyle=e,o=!0}else c==="fill"?i==="SPAN"?h.color=e:(g.filled=e!==N?!0:!1,e=j.color(e,g,c),c="fillcolor"):c==="translateX"||c==="translateY"||c==="rotation"||c==="align"?(c==="align"&&(c="textAlign"),this[c]=e,this.updateTransform(),o=!0):c==="text"&&(this.bBox=null,g.innerHTML=e,o=!0);if(n&&c==="visibility"){f=n.length;while(f--)n[f].style[c]=e}o||(p?g[c]=e:bA(g,c,e))}return q},clip:function(a){var b=this,c=a.members;return c.push(b),b.destroyClip=function(){by(c,b)},b.css(a.getCSS(b.inverted))},css:function(a){var b=this,c=b.element,d=a&&c.tagName==="SPAN"&&a.width;return d&&(delete a.width,b.textWidth=d,b.updateTransform()),b.styles=bq(b.styles,a),bD(b.element,a),b},destroy:function(){var a=this;return a.destroyClip&&a.destroyClip(),cc.prototype.destroy.apply(a)},empty:function(){var a=this.element,b=a.childNodes,c=b.length,d;while(c--)d=b[c],d.parentNode.removeChild(d)},getBBox:function(){var a=this,b=a.element,c=a.bBox;return c||(b.nodeName==="text"&&(b.style.position=H),c=a.bBox={x:b.offsetLeft,y:b.offsetTop,width:b.offsetWidth,height:b.offsetHeight}),c},on:function(a,c){return this.element["on"+a]=function(){var a=b.event;a.target=a.srcElement,c(a)},this},updateTransform:function(){if(!this.added){this.alignOnAdd=!0;return}var a=this,b=a.element,c=a.translateX||0,e=a.translateY||0,f=a.x||0,g=a.y||0,h=a.textAlign||"left",i={left:0,center:.5,right:1}[h],l=h&&h!=="left";(c||e)&&a.css({marginLeft:c,marginTop:e}),a.inverted&&bg(b.childNodes,function(c){a.renderer.invertChild(c,b)});if(b.tagName==="SPAN"){var n,o,p=a.rotation,q,r=0,s=1,t=0,u,v=br(a.textWidth),w=a.xCorr||0,x=a.yCorr||0,y=[p,h,b.innerHTML,a.textWidth].join(",");y!==a.cTT&&(bz(p)&&(r=p*m,s=j(r),t=k(r),bD(b,{filter:p?["progid:DXImageTransform.Microsoft.Matrix(M11=",s,", M12=",-t,", M21=",t,", M22=",s,", sizingMethod='auto expand')"].join(""):N})),n=b.offsetWidth,o=b.offsetHeight,n>v&&(bD(b,{width:v+M,display:"block",whiteSpace:"normal"}),n=v),q=d((br(b.style.fontSize)||12)*1.2),w=s<0&&-n,x=t<0&&-o,u=s*t<0,w+=t*q*(u?1-i:i),x-=s*q*(p?u?i:1-i:1),l&&(w-=n*i*(s<0?-1:1),p&&(x-=o*i*(t<0?-1:1)),bD(b,{textAlign:h})),a.xCorr=w,a.yCorr=x),bD(b,{left:f+w,top:g+x}),a.cTT=y}},shadow:function(a,b){var c=[],d,e=this.element,f=this.renderer,g,h=e.style,i,j=e.path;j&&typeof j.value!="string"&&(j="x");if(a){for(d=1;d<=3;d++)i=['<shape isShadow="true" strokeweight="',7-2*d,'" filled="false" path="',j,'" coordsize="100,100" style="',e.style.cssText,'" />'],g=bE(f.prepVML(i),null,{left:br(h.left)+1,top:br(h.top)+1}),i=['<stroke color="black" opacity="',.05*d,'"/>'],bE(f.prepVML(i),null,null,g),b?b.element.appendChild(g):e.parentNode.insertBefore(g,e),c.push(g);this.shadows=c}return this}});ce=function(){this.init.apply(this,arguments)},ce.prototype=bj(cd.prototype,{Element:cf,isIE8:n.indexOf("MSIE 8.0")>-1,init:function(b,c,d){var e=this,f;e.alignedObjects=[],f=e.createElement(G),b.appendChild(f.element),e.box=f.element,e.boxWrapper=f,e.setSize(c,d,!1),a.namespaces.hcv||(a.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},clipRect:function(a,b,c,e){var f=this.createElement();return bq(f,{members:[],left:a,top:b,width:c,height:e,getCSS:function(a){var b=this,c=b.top,e=b.left,f=e+b.width,g=c+b.height,h={clip:"rect("+d(a?e:c)+"px,"+d(a?g:f)+"px,"+d(a?f:g)+"px,"+d(a?c:e)+"px)"};return!a&&p&&bq(h,{width:f+M,height:g+M}),h},updateClipping:function(){bg(f.members,function(a){a.css(f.getCSS(a.inverted))})}})},color:function(a,b,d){var e,f=/^rgba/,g;if(!a||!a.linearGradient){if(f.test(a)&&b.tagName!=="IMG")return e=cb(a),g=["<",d,' opacity="',e.get("a"),'"/>'],bE(this.prepVML(g),null,null,b),e.get("rgb");var q=b.getElementsByTagName(d);return q.length&&(q[0].opacity=1),a}var h,i,j=a.linearGradient,k,m,n,o,p;bg(a.stops,function(a,b){f.test(a[1])?(e=cb(a[1]),h=e.get("rgb"),i=e.get("a")):(h=a[1],i=1),b?(o=h,p=i):(m=h,n=i)}),k=90-c.atan((j[3]-j[1])/(j[2]-j[0]))*180/l,g=["<",d,' colors="0% ',m,",100% ",o,'" angle="',k,'" opacity="',p,'" o:opacity2="',n,'" type="gradient" focus="100%" />'],bE(this.prepVML(g),null,null,b)},prepVML:function(a){var b="display:inline-block;behavior:url(#default#VML);",c=this.isIE8;return a=a.join(""),c?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a.indexOf('style="')===-1?a=a.replace("/>",' style="'+b+'" />'):a=a.replace('style="','style="'+b)):a=a.replace("<","<hcv:"),a},text:function(a,b,c){var e=B.chart.style;return this.createElement("span").attr({text:a,x:d(b),y:d(c)}).css({whiteSpace:"nowrap",fontFamily:e.fontFamily,fontSize:e.fontSize})},path:function(a){return this.createElement("shape").attr({coordsize:"100 100",d:a})},circle:function(a,b,c){return this.symbol("circle").attr({x:a,y:b,r:c})},g:function(a){var b,c;return a&&(c={className:K+a,"class":K+a}),b=this.createElement(G).attr(c),b},image:function(a,b,c,d,e){var f=this.createElement("img").attr({src:a});return arguments.length>1&&f.css({left:b,top:c,width:d,height:e}),f},rect:function(a,b,c,d,e,f){bt(a)&&(b=a.y,c=a.width,d=a.height,e=a.r,f=a.strokeWidth,a=a.x);var h=this.symbol("rect");return h.r=e,h.attr(h.crisp(f,a,b,g(c,0),g(d,0)))},invertChild:function(a,b){var c=b.style;bD(a,{flip:"x",left:br(c.width)-10,top:br(c.height)-10,rotation:-90})},symbols:{arc:function(a,b,c,d){var e=d.start,f=d.end,g=j(e),h=k(e),i=j(f),m=k(f),n=d.innerR,o=.07/c,p=n&&.1/n||0;return f-e===0?["x"]:(2*l-f+e<o?i=-o:f-e<p&&(i=j(e+p)),["wa",a-c,b-c,a+c,b+c,a+c*g,b+c*h,a+c*i,b+c*m,"at",a-n,b-n,a+n,b+n,a+n*i,b+n*m,a+n*g,b+n*h,"x","e"])},circle:function(a,b,c){return["wa",a-c,b-c,a+c,b+c,a+c,b,a+c,b,"e"]},rect:function(a,b,c,d){if(!bz(d))return[];var e=d.width,f=d.height,g=a+e,i=b+f;return c=h(c,e,f),[O,a+c,b,P,g-c,b,"wa",g-2*c,b,g,b+2*c,g-c,b,g,b+c,P,g,i-c,"wa",g-2*c,i-2*c,g,i,g,i-c,g-c,i,P,a+c,i,"wa",a,i-2*c,a+2*c,i,a+c,i,a,i-c,P,a,b+c,"wa",a,b,a+2*c,b+2*c,a,b+c,a+c,b,"x","e"]}}}),v=ce}cg.prototype.callbacks=[];var ch=function(){};ch.prototype={init:function(a,b){var c=this,d=a.chart.counters,e;return c.series=a,c.applyOptions(b),c.pointAttr={},a.options.colorByPoint&&(e=a.chart.options.colors,c.options||(c.options={}),c.color=c.options.color=c.color||e[d.color++],d.wrapColor(e.length)),a.chart.pointCount++,c},applyOptions:function(a){var b=this,c=b.series;b.config=a,bv(a)||a===null?b.y=a:bt(a)&&!bv(a.length)?(bq(b,a),b.options=a):bs(a[0])?(b.name=a[0],b.y=a[1]):bv(a[0])&&(b.x=a[0],b.y=a[1]),b.x===F&&(b.x=c.autoIncrement())},destroy:function(){var a=this,b=a.series,c=b.chart.hoverPoints,d;b.chart.pointCount--,c&&(a.setState(),by(c,a)),a===b.chart.hoverPoint&&a.onMouseOut(),bl(a),bg(["graphic","tracker","group","dataLabel","connector","shadowGroup"],function(b){a[b]&&a[b].destroy()}),a.legendItem&&a.series.chart.legend.destroyItem(a);for(d in a)a[d]=null},getLabelConfig:function(){var a=this;return{x:a.category,y:a.y,series:a.series,point:a,percentage:a.percentage,total:a.total||a.stackTotal}},select:function(a,b){var c=this,d=c.series,e=d.chart;a=bC(a,!c.selected),c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=a,c.setState(a&&T),b||bg(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=!1,a.setState(R),a.firePointEvent("unselect"))})})},onMouseOver:function(){var a=this,b=a.series.chart,c=b.tooltip,d=b.hoverPoint;d&&d!==a&&d.onMouseOut(),a.firePointEvent("mouseOver"),c&&!c.shared&&c.refresh(a),a.setState(S),b.hoverPoint=a},onMouseOut:function(){var a=this;a.firePointEvent("mouseOut"),a.setState(),a.series.chart.hoverPoint=null},tooltipFormatter:function(a){var b=this,c=b.series;return['<span style="color:'+c.color+'">',b.name||c.name,"</span>: ",a?"":"<b>x = "+(b.name||b.x)+",</b> ","<b>",a?"":"y = ",b.y,"</b>"].join("")},update:function(a,b,c){var d=this,e=d.series,f=d.graphic,g=e.chart;b=bC(b,!0),d.firePointEvent("update",{options:a},function(){d.applyOptions(a),bt(a)&&(e.getAttribs(),f&&f.attr(d.pointAttr[e.state])),e.isDirty=!0,b&&g.redraw(c)})},remove:function(a,b){var c=this,d=c.series,e=d.chart,f=d.data;bM(b,e),a=bC(a,!0),c.firePointEvent("remove",null,function(){by(f,c),c.destroy(),d.isDirty=!0,a&&e.redraw()})},firePointEvent:function(a,b,c){var d=this,e=this.series,f=e.options;(f.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents(),a==="click"&&f.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)}),bm(this,a,b,c)},importEvents:function(){if(!this.hasImportedEvents){var a=this,b=bj(a.series.options.point,a.options),c=b.events,d;a.events=c;for(d in c)bk(a,d,c[d]);this.hasImportedEvents=!0}},setState:function(a){var b=this,c=b.series,d=c.options.states,e=b_[c.type].marker&&c.options.marker,f=e&&!e.enabled,g=e&&e.states[a],h=g&&g.enabled===!1,i=c.stateMarkerGraphic,j=c.chart,k=b.pointAttr;a=a||R;if(a===b.state||b.selected&&a!==T||d[a]&&d[a].enabled===!1||a&&(h||f&&!g.enabled))return;b.graphic?b.graphic.attr(k[a]):(a&&(i||(c.stateMarkerGraphic=i=j.renderer.circle(0,0,k[a].r).attr(k[a]).add(c.group)),i.translate(b.plotX,b.plotY)),i&&i[a?"show":"hide"]()),b.state=a}};var ci=function(){};ci.prototype={isCartesian:!0,type:"line",pointClass:ch,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(a,b){var c=this,d,e,f=a.series.length;c.chart=a,b=c.setOptions(b),bq(c,{index:f,options:b,name:b.name||"Series "+(f+1),state:R,pointAttr:{},visible:b.visible!==!1,selected:b.selected===!0}),e=b.events;for(d in e)bk(c,d,e[d]);if(e&&e.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)a.runTrackerClick=!0;c.getColor(),c.getSymbol(),c.setData(b.data,!1)},autoIncrement:function(){var a=this,b=a.options,c=a.xIncrement;return c=bC(c,b.pointStart,0),a.pointInterval=bC(a.pointInterval,b.pointInterval,1),a.xIncrement=c+a.pointInterval,c},cleanData:function(){var a=this,b=a.chart,c=a.data,d,e,f=b.smallestInterval,g,h;bK(c,function(a,b){return a.x-b.x});if(a.options.connectNulls)for(h=c.length-1;h>=0;h--)c[h].y===null&&c[h-1]&&c[h+1]&&c.splice(h,1);for(h=c.length-1;h>=0;h--)c[h-1]&&(g=c[h].x-c[h-1].x,g>0&&(e===F||g<e)&&(e=g,d=h));if(f===F||e<f)b.smallestInterval=e;a.closestPoints=d},getSegments:function(){var a=-1,b=[],c=this.data;bg(c,function(d,e){d.y===null?(e>a+1&&b.push(c.slice(a+1,e)),a=e):e===c.length-1&&b.push(c.slice(a+1,e+1))}),this.segments=b},setOptions:function(a){var b=this.chart.options.plotOptions,c=bj(b[this.type],b.series,a);return c},getColor:function(){var a=this.chart.options.colors,b=this.chart.counters;this.color=this.options.color||a[b.color++]||"#0000ff",b.wrapColor(a.length)},getSymbol:function(){var a=this.chart.options.symbols,b=this.chart.counters;this.symbol=this.options.marker.symbol||a[b.symbol++],b.wrapSymbol(a.length)},addPoint:function(a,b,c,d){var e=this,f=e.data,g=e.graph,h=e.area,i=e.chart,j=(new e.pointClass).init(e,a);bM(d,i),g&&c&&(g.shift=c),h&&(h.shift=c,h.isArea=!0),b=bC(b,!0),f.push(j),c&&f[0].remove(!1),e.getAttribs(),e.isDirty=!0,b&&i.redraw()},setData:function(a,b){var c=this,d=c.data,e=c.initialColor,f=c.chart,g=d&&d.length||0;c.xIncrement=null,bz(e)&&(f.counters.color=e),a=bi(bB(a||[]),function(a){return(new c.pointClass).init(c,a)});while(g--)d[g].destroy();c.data=a,c.cleanData(),c.getSegments(),c.getAttribs(),c.isDirty=!0,f.isDirtyBox=!0,bC(b,!0)&&f.redraw(!1)},remove:function(a,b){var c=this,d=c.chart;a=bC(a,!0),c.isRemoving||(c.isRemoving=!0,bm(c,"remove",null,function(){c.destroy(),d.isDirtyLegend=d.isDirtyBox=!0,a&&d.redraw(b)})),c.isRemoving=!1},translate:function(){var a=this,b=a.chart,c=a.options.stacking,d=a.xAxis.categories,e=a.yAxis,f=a.data,g=f.length;while(g--){var h=f[g],i=h.x,j=h.y,k=h.low,l=e.stacks[(j<0?"-":"")+a.stackKey],m,n;h.plotX=a.xAxis.translate(i),c&&a.visible&&l&&l[i]&&(m=l[i],n=m.total,m.cum=k=m.cum-j,j=k+j,c==="percent"&&(k=n?k*100/n:0,j=n?j*100/n:0),h.percentage=n?h.y*100/n:0,h.stackTotal=n),bz(k)&&(h.yBottom=e.translate(k,0,1,0,1)),j!==null&&(h.plotY=e.translate(j,0,1,0,1)),h.clientX=b.inverted?b.plotHeight-h.plotX:h.plotX,h.category=d&&d[h.x]!==F?d[h.x]:h.x}},setTooltipPoints:function(a){var b=this,c=b.chart,f=c.inverted,g=[],h=d((f?c.plotTop:c.plotLeft)+c.plotSizeX),i,j,k=[];a&&(b.tooltipPoints=null),bg(b.segments,function(a){g=g.concat(a)}),b.xAxis&&b.xAxis.reversed&&(g=g.reverse()),bg(g,function(a,b){i=g[b-1]?g[b-1]._high+1:0,j=a._high=g[b+1]?e((a.plotX+(g[b+1]?g[b+1].plotX:h))/2):h;while(i<=j)k[f?h-i++:i++]=a}),b.tooltipPoints=k},onMouseOver:function(){var a=this,b=a.chart,c=b.hoverSeries;if(!w&&b.mouseIsDown)return;c&&c!==a&&c.onMouseOut(),a.options.events.mouseOver&&bm(a,"mouseOver"),a.tracker&&a.tracker.toFront(),a.setState(S),b.hoverSeries=a},onMouseOut:function(){var a=this,b=a.options,c=a.chart,d=c.tooltip,e=c.hoverPoint;e&&e.onMouseOut(),a&&b.events.mouseOut&&bm(a,"mouseOut"),d&&!b.stickyTracking&&d.hide(),a.setState(),c.hoverSeries=null},animate:function(a){var b=this,c=b.chart,d=b.clipRect,e=b.options.animation;e&&!bt(e)&&(e={}),a?d.isAnimating||(d.attr("width",0),d.isAnimating=!0):(d.animate({width:c.plotSizeX},e),this.animate=null)},drawPoints:function(){var a=this,b,c=a.data,d=a.chart,e,f,g,h,i,j;if(a.options.marker.enabled){g=c.length;while(g--)h=c[g],e=h.plotX,f=h.plotY,j=h.graphic,f!==F&&!isNaN(f)&&(b=h.pointAttr[h.selected?T:R],i=b.r,j?j.animate({x:e,y:f,r:i}):h.graphic=d.renderer.symbol(bC(h.marker&&h.marker.symbol,a.symbol),e,f,i).attr(b).add(a.group))}},convertAttribs:function(a,b,c,d){var e=this.pointAttrToOptions,f,g,h={};a=a||{},b=b||{},c=c||{},d=d||{};for(f in e)g=e[f],h[f]=bC(a[g],b[f],c[f],d[f]);return h},getAttribs:function(){var a=this,b=b_[a.type].marker?a.options.marker:a.options,c=b.states,d=c[S],e,f=a.color,g={stroke:f,fill:f},h=a.data,i,j,k=[],l,m=a.pointAttrToOptions,n,o;a.options.marker?(d.radius=d.radius||b.radius+2,d.lineWidth=d.lineWidth||b.lineWidth+1):d.color=d.color||cb(d.color||f).brighten(d.brightness).get(),k[R]=a.convertAttribs(b,g),bg([S,T],function(b){k[b]=a.convertAttribs(c[b],k[R])}),a.pointAttr=k,i=h.length;while(i--){j=h[i],b=j.options&&j.options.marker||j.options,b&&b.enabled===!1&&(b.radius=0),n=!1;if(j.options)for(o in m)bz(b[m[o]])&&(n=!0);n?(l=[],c=b.states||{},e=c[S]=c[S]||{},a.options.marker||(e.color=cb(e.color||j.options.color).brighten(e.brightness||d.brightness).get()),l[R]=a.convertAttribs(b,k[R]),l[S]=a.convertAttribs(c[S],k[S],l[R]),l[T]=a.convertAttribs(c[T],k[T],l[R])):l=k,j.pointAttr=l}},destroy:function(){var a=this,b=a.chart,c=a.clipRect,d=/\/5[0-9\.]+ (Safari|Mobile)\//.test(n),e,f;bm(a,"destroy"),bl(a),a.legendItem&&a.chart.legend.destroyItem(a),bg(a.data,function(a){a.destroy()}),c&&c!==b.clipRect&&(a.clipRect=c.destroy()),bg(["area","graph","dataLabelsGroup","group","tracker"],function(b){a[b]&&(e=d&&b==="group"?"hide":"destroy",a[b][e]())}),b.hoverSeries===a&&(b.hoverSeries=null),by(b.series,a);for(f in a)delete a[f]},drawDataLabels:function(){if(this.options.dataLabels.enabled){var a=this,b,c,d=a.data,e=a.options,f=e.dataLabels,g,h=a.dataLabelsGroup,i=a.chart,j=i.renderer,k=i.inverted,l=a.type,m,n=e.stacking,o=l==="column"||l==="bar",p=f.verticalAlign===null,q=f.y===null;o&&(n?(p&&(f=bj(f,{verticalAlign:"middle"})),q&&(f=bj(f,{y:{top:14,middle:4,bottom:-6}[f.verticalAlign]}))):p&&(f=bj(f,{verticalAlign:"top"}))),h?h.translate(i.plotLeft,i.plotTop):h=a.dataLabelsGroup=j.g("data-labels").attr({visibility:a.visible?L:J,zIndex:6}).translate(i.plotLeft,i.plotTop).add(),m=f.color,m==="auto"&&(m=null),f.style.color=bC(m,a.color,"black"),bg(d,function(a){var d=a.barX,m=d&&d+a.barW/2||a.plotX||-999,n=bC(a.plotY,-999),p=a.dataLabel,r=f.align,s=q?a.y<0?12:-6:f.y;g=f.formatter.call(a.getLabelConfig()),b=(k?i.plotWidth-n:m)+f.x,c=(k?i.plotHeight-m:n)+s,l==="column"&&(b+={left:-1,right:1}[r]*a.barW/2||0),k&&a.y<0&&(r="right",b-=10),p?(k&&!f.y&&(c=c+br(p.styles.lineHeight)*.9-p.getBBox().height/2),p.attr({text:g}).animate({x:b,y:c})):bz(g)&&(p=a.dataLabel=j.text(g,b,c).attr({align:r,rotation:f.rotation,zIndex:1}).css(f.style).add(h),k&&!f.y&&p.attr({y:c+br(p.styles.lineHeight)*.9-p.getBBox().height/2}));if(o&&e.stacking&&p){var t=a.barY,u=a.barW,v=a.barH;p.align(f,null,{x:k?i.plotWidth-t-v:d,y:k?i.plotHeight-d-u:t,width:k?v:u,height:k?u:v})}})}},drawGraph:function(){var a=this,b=a.options,c=a.chart,d=a.graph,e=[],f,g=a.area,h=a.group,i=b.lineColor||a.color,j=b.lineWidth,k=b.dashStyle,l,m=c.renderer,n=a.yAxis.getThreshold(b.threshold||0),o=/^area/.test(a.type),p=[],q=[],r;bg(a.segments,function(c){l=[],bg(c,function(d,e){if(a.getPointSpline)l.push.apply(l,a.getPointSpline(c,d,e));else{l.push(e?P:O);if(e&&b.step){var f=c[e-1];l.push(d.plotX,f.plotY)}l.push(d.plotX,d.plotY)}}),c.length>1?e=e.concat(l):p.push(c[0]);if(o){var d=[],f,g=l.length;for(f=0;f<g;f++)d.push(l[f]);g===3&&d.push(P,l[1],l[2]);if(b.stacking&&a.type!=="areaspline")for(f=c.length-1;f>=0;f--)d.push(c[f].plotX,c[f].yBottom);else d.push(P,c[c.length-1].plotX,n,P,c[0].plotX,n);q=q.concat(d)}}),a.graphPath=e,a.singlePoints=p,o&&(f=bC(b.fillColor,cb(a.color).setOpacity(b.fillOpacity||.75).get()),g?g.animate({d:q}):a.area=a.chart.renderer.path(q).attr({fill:f}).add(h)),d?(bo(d),d.animate({d:e})):j&&(r={stroke:i,"stroke-width":j},k&&(r.dashstyle=k),a.graph=m.path(e).attr(r).add(h).shadow(b.shadow))},render:function(){var a=this,b=a.chart,c,d,e=a.options,f=e.animation,g=f&&a.animate,h=g?f&&f.duration||500:0,i=a.clipRect,j=b.renderer;i||(i=a.clipRect=!b.hasRendered&&b.clipRect?b.clipRect:j.clipRect(0,0,b.plotSizeX,b.plotSizeY),b.clipRect||(b.clipRect=i)),a.group||(c=a.group=j.g("series"),b.inverted&&(d=function(){c.attr({width:b.plotWidth,height:b.plotHeight}).invert()},d(),bk(b,"resize",d),bk(a,"destroy",function(){bl(b,"resize",d)})),c.clip(a.clipRect).attr({visibility:a.visible?L:J,zIndex:e.zIndex}).translate(b.plotLeft,b.plotTop).add(b.seriesGroup)),a.drawDataLabels(),g&&a.animate(!0),a.drawGraph&&a.drawGraph(),a.drawPoints(),a.options.enableMouseTracking!==!1&&a.drawTracker(),g&&a.animate(),setTimeout(function(){i.isAnimating=!1,c=a.group,c&&i!==b.clipRect&&i.renderer&&(c.clip(a.clipRect=b.clipRect),i.destroy())},h),a.isDirty=!1},redraw:function(){var a=this,b=a.chart,c=a.group;c&&(b.inverted&&c.attr({width:b.plotWidth,height:b.plotHeight}),c.animate({translateX:b.plotLeft,translateY:b.plotTop})),a.translate(),a.setTooltipPoints(!0),a.render()},setState:function(a){var b=this,c=b.options,d=b.graph,e=c.states,f=c.lineWidth;a=a||R;if(b.state!==a){b.state=a;if(e[a]&&e[a].enabled===!1)return;a&&(f=e[a].lineWidth||f+1),d&&!d.dashstyle&&d.attr({"stroke-width":f},a?0:500)}},setVisible:function(a,b){var c=this,d=c.chart,e=c.legendItem,f=c.group,g=c.tracker,h=c.dataLabelsGroup,i,j,k=c.data,l,m=d.options.chart.ignoreHiddenSeries,n=c.visible;c.visible=a=a===F?!n:a,i=a?"show":"hide",f&&f[i]();if(g)g[i]();else{j=k.length;while(j--)l=k[j],l.tracker&&l.tracker[i]()}h&&h[i](),e&&d.legend.colorizeItem(c,a),c.isDirty=!0,c.options.stacking&&bg(d.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)}),m&&(d.isDirtyBox=!0),b!==!1&&d.redraw(),bm(c,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){var b=this;b.selected=a=a===F?!b.selected:a,b.checkbox&&(b.checkbox.checked=a),bm(b,a?"select":"unselect")},drawTracker:function(){var a=this,b=a.options,c=[].concat(a.graphPath),d=c.length,e=a.chart,f=e.options.tooltip.snap,g=a.tracker,h=b.cursor,i=h&&{cursor:h},j=a.singlePoints,k,l;if(d){l=d+1;while(l--)c[l]===O&&c.splice(l+1,0,c[l+1]-f,c[l+2],P),(l&&c[l]===O||l===d)&&c.splice(l,0,P,c[l-2]+f,c[l-1])}for(l=0;l<j.length;l++)k=j[l],c.push(O,k.plotX-f,k.plotY,P,k.plotX+f,k.plotY);g?g.attr({d:c}):a.tracker=e.renderer.path(c).attr({isTracker:!0,stroke:Q,fill:N,"stroke-width":b.lineWidth+2*f,visibility:a.visible?L:J,zIndex:b.zIndex||1}).on(w?"touchstart":"mouseover",function(){e.hoverSeries!==a&&a.onMouseOver()}).on("mouseout",function(){b.stickyTracking||a.onMouseOut()}).css(i).add(e.trackerGroup)}};var cj=bF(ci);bp.line=cj;var ck=bF(ci,{type:"area"});bp.area=ck;var cl=bF(ci,{type:"spline",getPointSpline:function(a,b,c){var d=1.5,e=d+1,f=b.plotX,i=b.plotY,j=a[c-1],k=a[c+1],l,m,n,o,p;if(c&&c<a.length-1){var q=j.plotX,r=j.plotY,s=k.plotX,t=k.plotY,u;l=(d*f+q)/e,m=(d*i+r)/e,n=(d*f+s)/e,o=(d*i+t)/e,u=(o-m)*(n-f)/(n-l)+i-o,m+=u,o+=u,m>r&&m>i?(m=g(r,i),o=2*i-m):m<r&&m<i&&(m=h(r,i),o=2*i-m),o>t&&o>i?(o=g(t,i),m=2*i-o):o<t&&o<i&&(o=h(t,i),m=2*i-o),b.rightContX=n,b.rightContY=o}return c?(p=["C",j.rightContX||j.plotX,j.rightContY||j.plotY,l||f,m||i,f,i],j.rightContX=j.rightContY=null):p=[O,f,i],p}});bp.spline=cl;var cm=bF(cl,{type:"areaspline"});bp.areaspline=cm;var cn=bF(ci,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){ci.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasColumn=!0,b.hasRendered&&bg(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},translate:function(){var a=this,b=a.chart,c=a.options,d=c.stacking,e=c.borderWidth,j=0,k=a.xAxis.reversed,l=a.xAxis.categories,m={},n,o;ci.prototype.translate.apply(a),bg(b.series,function(b){b.type===a.type&&b.visible&&(b.options.stacking?(n=b.stackKey,m[n]===F&&(m[n]=j++),o=m[n]):o=j++,b.columnIndex=o)});var p=a.data,q=a.closestPoints,r=i(p[1]?p[q].plotX-p[q-1].plotX:b.plotSizeX/(l&&l.length||1)),s=r*c.groupPadding,t=r-2*s,u=t/j,v=c.pointWidth,w=bz(v)?(u-v)/2:u*c.pointPadding,x=g(bC(v,u-2*w),1),y=(k?j-a.columnIndex:a.columnIndex)||0,z=w+(s+y*u-r/2)*(k?-1:1),A=c.threshold||0,B=a.yAxis.getThreshold(A),C=bC(c.minPointLength,5);bg(p,function(j){var k=j.plotY,l=j.yBottom||B,m=j.plotX+z,n=f(h(k,l)),o=f(g(k,l)-n),p=a.yAxis.stacks[(j.y<0?"-":"")+a.stackKey],q,r;d&&a.visible&&p&&p[j.x]&&p[j.x].setOffset(z,x),i(o)<C&&(C&&(o=C,n=i(n-B)>C?l-C:B-(k>B?0:C)),q=n-3),bq(j,{barX:m,barY:n,barW:x,barH:o}),j.shapeType="rect",r=bq(b.renderer.Element.prototype.crisp.apply({},[e,m,n,x,o]),{r:c.borderRadius}),e%2&&(r.y-=1,r.height+=1),j.shapeArgs=r,j.trackerArgs=bz(q)&&bj(j.shapeArgs,{height:g(6,o+3),y:q})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var a=this,b=a.options,c=a.chart.renderer,d,e;bg(a.data,function(f){var g=f.plotY;g!==F&&!isNaN(g)&&f.y!==null&&(d=f.graphic,e=f.shapeArgs,d?(bo(d),d.animate(e)):f.graphic=c[f.shapeType](e).attr(f.pointAttr[f.selected?T:R]).add(a.group).shadow(b.shadow))})},drawTracker:function(){var a=this,b=a.chart,c=b.renderer,d,e,f=+(new Date),g=a.options,h=g.cursor,i=h&&{cursor:h},j;bg(a.data,function(h){e=h.tracker,d=h.trackerArgs||h.shapeArgs,delete d.strokeWidth,h.y!==null&&(e?e.attr(d):h.tracker=c[h.shapeType](d).attr({isTracker:f,fill:Q,visibility:a.visible?L:J,zIndex:g.zIndex||1}).on(w?"touchstart":"mouseover",function(c){j=c.relatedTarget||c.fromElement,b.hoverSeries!==a&&bA(j,"isTracker")!==f&&a.onMouseOver(),h.onMouseOver()}).on("mouseout",function(b){g.stickyTracking||(j=b.relatedTarget||b.toElement,bA(j,"isTracker")!==f&&a.onMouseOut())}).css(i).add(h.group||b.trackerGroup))})},animate:function(a){var b=this,c=b.data;a||(bg(c,function(a){var c=a.graphic,d=a.shapeArgs;c&&(c.attr({height:0,y:b.yAxis.translate(0,0,1)}),c.animate({height:d.height,y:d.y},b.options.animation))}),b.animate=null)},remove:function(){var a=this,b=a.chart;b.hasRendered&&bg(b.series,function(b){b.type===a.type&&(b.isDirty=!0)}),ci.prototype.remove.apply(a,arguments)}});bp.column=cn;var co=bF(cn,{type:"bar",init:function(a){a.inverted=this.inverted=!0,cn.prototype.init.apply(this,arguments)}});bp.bar=co;var cp=bF(ci,{type:"scatter",translate:function(){var a=this;ci.prototype.translate.apply(a),bg(a.data,function(b){b.shapeType="circle",b.shapeArgs={x:b.plotX,y:b.plotY,r:a.chart.options.tooltip.snap}})},drawTracker:function(){var a=this,b=a.options.cursor,c=b&&{cursor:b},d;bg(a.data,function(b){d=b.graphic,d&&d.attr({isTracker:!0}).on("mouseover",function(){a.onMouseOver(),b.onMouseOver()}).on("mouseout",function(){a.options.stickyTracking||a.onMouseOut()}).css(c)})},cleanData:function(){}});bp.scatter=cp;var cq=bF(ch,{init:function(){ch.prototype.init.apply(this,arguments);var a=this,b;return bq(a,{visible:a.visible!==!1,name:bC(a.name,"Slice")}),b=function(){a.slice()},bk(a,"select",b),bk(a,"unselect",b),a},setVisible:function(a){var b=this,c=b.series.chart,d=b.tracker,e=b.dataLabel,f=b.connector,g=b.shadowGroup,h;b.visible=a=a===F?!b.visible:a,h=a?"show":"hide",b.group[h](),d&&d[h](),e&&e[h](),f&&f[h](),g&&g[h](),b.legendItem&&c.legend.colorizeItem(b,a)},slice:function(a,b,c){var d=this,e=d.series,f=e.chart,g=d.slicedTranslation,h;bM(c,f),b=bC(b,!0),a=d.sliced=bz(a)?a:!d.sliced,h={translateX:a?g[0]:f.plotLeft,translateY:a?g[1]:f.plotTop},d.group.animate(h),d.shadowGroup&&d.shadowGroup.animate(h)}}),cr=bF(ci,{type:"pie",isCartesian:!1,pointClass:cq,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var a=this,b=a.data;bg(b,function(b){var c=b.graphic,d=b.shapeArgs,e=-l/2;c&&(c.attr({r:0,start:e,end:e}),c.animate({r:d.r,start:d.start,end:d.end},a.options.animation))}),a.animate=null},translate:function(){var a=0,b=this,e=-0.25,f=1e3,g=b.options,i=g.slicedOffset,m=i+g.borderWidth,n=g.center.concat([g.size,g.innerSize||0]),o=b.chart,p=o.plotWidth,q=o.plotHeight,r,s,t,u=b.data,v=2*l,w,x=h(p,q),y,z,A,B=g.dataLabels.distance;n=bi(n,function(a,b){return y=/%$/.test(a),y?[p,q,x,x][b]*br(a)/100:a}),b.getX=function(a,b){return t=c.asin((a-n[1])/(n[2]/2+B)),n[0]+(b?-1:1)*j(t)*(n[2]/2+B)},b.center=n,bg(u,function(b){a+=b.y}),bg(u,function(b){w=a?b.y/a:0,r=d(e*v*f)/f,e+=w,s=d(e*v*f)/f,b.shapeType="arc",b.shapeArgs={x:n[0],y:n[1],r:n[2]/2,innerR:n[3]/2,start:r,end:s},t=(s+r)/2,b.slicedTranslation=bi([j(t)*i+o.plotLeft,k(t)*i+o.plotTop],d),z=j(t)*n[2]/2,A=k(t)*n[2]/2,b.tooltipPos=[n[0]+z*.7,n[1]+A*.7],b.labelPos=[n[0]+z+j(t)*B,n[1]+A+k(t)*B,n[0]+z+j(t)*m,n[1]+A+k(t)*m,n[0]+z,n[1]+A,B<0?"center":t<v/4?"left":"right",t],b.percentage=w*100,b.total=a}),this.setTooltipPoints()},render:function(){var a=this;this.drawPoints(),a.options.enableMouseTracking!==!1&&a.drawTracker(),this.drawDataLabels(),a.options.animation&&a.animate&&a.animate(),a.isDirty=!1},drawPoints:function(){var a=this,b=a.chart,c=b.renderer,d,e,f,g=a.options.shadow,h,i;bg(a.data,function(a){e=a.graphic,i=a.shapeArgs,f=a.group,h=a.shadowGroup,g&&!h&&(h=a.shadowGroup=c.g("shadow").attr({zIndex:4}).add()),f||(f=a.group=c.g("point").attr({zIndex:5}).add()),d=a.sliced?a.slicedTranslation:[b.plotLeft,b.plotTop],f.translate(d[0],d[1]),h&&h.translate(d[0],d[1]),e?e.animate(i):a.graphic=c.arc(i).attr(bq(a.pointAttr[R],{"stroke-linejoin":"round"})).add(a.group).shadow(g,h),a.visible===!1&&a.setVisible(!1)})},drawDataLabels:function(){var a=this,b=a.data,c,d=a.chart,e=a.options.dataLabels,f=bC(e.connectorPadding,10),g=bC(e.connectorWidth,1),h,j,k=bC(e.softConnector,!0),m=e.distance,n=a.center,o=n[2]/2,p=n[1],q=m>0,r,s,t,u=[[],[]],v,w,x,y,z,A=2,B;if(!e.enabled)return;ci.prototype.drawDataLabels.apply(a),bg(b,function(a){a.dataLabel&&u[a.labelPos[7]<l/2?0:1].push(a)}),u[1].reverse(),z=function(a,b){return b.y-a.y},t=u[0][0]&&u[0][0].dataLabel&&br(u[0][0].dataLabel.styles.lineHeight);while(A--){var C=[],D,E=[],F=u[A],G,H=F.length,I;for(G=p-o-m;G<=p+o+m;G+=t)C.push(G);D=C.length;if(H>D){y=[].concat(F),y.sort(z),B=H;while(B--)y[B].rank=B;B=H;while(B--)F[B].rank>=D&&F.splice(B,1);H=F.length}for(B=0;B<H;B++){c=F[B],s=c.labelPos;var K=9999,M,N;for(N=0;N<D;N++)M=i(C[N]-s[1]),M<K&&(K=M,I=N);if(I<B&&C[B]!==null)I=B;else if(D<H-B+I&&C[B]!==null){I=D-H+B;while(C[I]===null)I++}else while(C[I]===null)I++;E.push({i:I,y:C[I]}),C[I]=null}E.sort(z);for(B=0;B<H;B++){c=F[B],s=c.labelPos,r=c.dataLabel;var Q=E.pop(),R=s[1];x=c.visible===!1?J:L,I=Q.i,w=Q.y;if(R>w&&C[I+1]!==null||R<w&&C[I-1]!==null)w=R;v=a.getX(I===0||I===C.length-1?R:w,A),r.attr({visibility:x,align:s[6]})[r.moved?"animate":"attr"]({x:v+e.x+({left:f,right:-f}[s[6]]||0),y:w+e.y}),r.moved=!0,q&&g&&(h=c.connector,j=k?[O,v+(s[6]==="left"?5:-5),w,"C",v,w,2*s[2]-s[4],2*s[3]-s[5],s[2],s[3],P,s[4],s[5]]:[O,v+(s[6]==="left"?5:-5),w,P,s[2],s[3],P,s[4],s[5]],h?(h.animate({d:j}),h.attr("visibility",x)):c.connector=h=a.chart.renderer.path(j).attr({"stroke-width":g,stroke:e.connectorColor||c.color||"#606060",visibility:x,zIndex:3}).translate(d.plotLeft,d.plotTop).add())}}},drawTracker:cn.prototype.drawTracker,getSymbol:function(){}});bp.pie=cr,b.Highcharts={Chart:cg,dateFormat:C,pathAnim:E,getOptions:bS,hasRtlBug:u,numberFormat:bG,Point:ch,Color:cb,Renderer:v,seriesTypes:bp,setOptions:bR,Series:ci,addEvent:bk,createElement:bE,discardElement:bT,css:bD,each:bg,extend:bq,map:bi,merge:bj,pick:bC,extendClass:bF,product:"Highcharts",version:"2.1.8"}}(),define("cilantro/vendor/highcharts",function(){}),define("cilantro/utils/frontdesk",[],function(){function a(a){function j(a){return a&&typeof a=="object"&&typeof a.length=="number"&&!a.propertyIsEnumerable("length")?!0:!1}function k(a,b,c){var d=g[a];typeof b=="function"?b.apply(b,c):(typeof b=="string"||b instanceof String)&&d[b].apply(d,c)}function l(){var a=0;for(var c in f)f[c]==="in"&&a++;return a+b}var b=0,c=[],d=[],e={},f={},g={},h=null,i=j(a);this.onEmpty=function(a){c.push(a)},this.onFull=function(a){d.push(a)},this.checkIn=function(c,h){var j,k=!1;if(c!==undefined){if(f[c]!=="in"){e[c]=[],f[c]="in",h!==undefined&&(g[c]=h),k=!0;if(i)for(j in a)if(f[j]!=="in"){k=!1;break}}}else b++;return(l()===a||k)&&$.each(d,function(a,b){b()}),h},this.checkOut=function(a,d){if(l()===0)return;if(a===undefined)b--;else if(f[a]==="in"){f[a]="out",d!==undefined&&(g[a]=d);for(var h=0,i=e[a].length;h<i;h++)k(a,e[a][h][0],e[a][h][1])}l()===0&&$.each(c,function(a,b){b()})},this.leaveMessage=function(a,b){var c=Array.prototype.slice.call(arguments,2);f[a]==="in"?e[a].push([b,c]):k(a,b,c)}}return a});var Base=function(){};Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(arguments[0]!=null)return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return a=="object"?f:e.valueOf()},c.call(f,b),typeof f.init=="function"&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&typeof b=="function"&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return a=="object"?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;!Base._prototyping&&typeof this!="function"&&(e=this.extend||e);var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;while(i=g[h++])a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)this.prototype[d]===undefined&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)typeof arguments[a]=="function"?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}}),define("cilantro/vendor/base",function(){}),define("cilantro/define/viewelement",["jquery","cilantro/vendor/base"],function(a){var b=Base.extend({constructor:function(b,c){this.state="INIT",this.ds={},this.viewset=b,this.concept_pk=c,this.dom=a(),this.render(),this.dom.delegate("input,select,textarea","change keyup",a.proxy(this.elementChanged,this)),this.dom.bind("UpdateElementEvent",a.proxy(this.updateElement,this)),this.dom.bind("UpdateDSEvent",a.proxy(this.updateDS,this)),this.dom.bind("GainedFocusEvent",a.proxy(this.gainedFocus,this)),this.dom.bind("LostFocusEvent",a.proxy(this.lostFocus,this)),this.dom.bind("RegisterElementsEvent",a.proxy(this.registerElements,this)),this.dom.bind("HideDependentsEvent",a.proxy(this.hideDependents,this)),this.dom.bind("ShowDependentsEvent",a.proxy(this.showDependents,this)),this.dom.bind("ConstructElementQueryEvent",a.proxy(this.constructQuery,this))},render:function(){throw{name:"FunctionNotImplementedException",message:'This function needs to set the "dom" attribute of this object.'}},elementChanged:function(a){throw{name:"FunctionNotImplementedException",message:"This function needs to trigger an ElementChangedEvent with the new value of the evt.target."}},updateElement:function(a,b){throw{name:"FunctionNotImplementedException",message:"This function needs to find the element whose name = element.name, and set its value to element.value."}},updateDS:function(a,b){for(var c in b)this.updateElement("UpdateElementEvent",{name:c,value:b[c]});this.ds=b,this.dom.data("datasource",b)},registerElements:function(b){a("input,select",this.dom).change()},gainedFocus:function(){this.state="ONSCREEN"},lostFocus:function(){this.state="OFFSCREEN"},hideDependents:function(b){this.dom[0]!==(b.originalEvent?b.originalEvent.target:b.target)&&this.dom.has(b.target).length===0&&a("input,select,label",this.dom).attr("disabled","true").change()},showDependents:function(b){this.dom[0]!==(b.originalEvent?b.originalEvent.target:b.target)&&this.dom.has(b.target).length===0&&a("input,select,label",this.dom).filter(":disabled").removeAttr("disabled").change()},constructQuery:function(a){}});return b}),define("cilantro/define/form",["jquery","cilantro/define/viewelement","order!vendor/jquery.jqote2"],function(a,b){var c=['<option selected id="<%=this.field_id%>" value="range">is between</option>','<option id="<%=this.field_id%>" value="-range">is not between</option>','<option id="<%=this.field_id%>" value="lt">is less than</option>','<option id="<%=this.field_id%>" value="gt">is greater than</option>','<option id="<%=this.field_id%>" value="lte">is less than or equal to</option>','<option id="<%=this.field_id%>" value="gte">is greater than or equal to</option>','<option id="<%=this.field_id%>" value="exact">is equal to</option>','<option id="<%=this.field_id%>" value="-exact">is not equal to</option>','<option id="<%=this.field_id%>" value="isnull">is null</option>','<option id="<%=this.field_id%>" value="-isnull">is not null</option>'],d=['<option selected value="in">is equal to</option>','<option value="-in">is not equal to</option>'],e=['<option selected value="iexact">is equal to</option>','<option value="-iexact">is not equal to</option>','<option value="in">is one of</option>','<option value="-in">is not one of</option>','<option value="icontains">contains</option>','<option value="-icontains">does not contain</option>'],f=b.extend({constructor:function(b,c){this.base(b,c),a('input[data-validate="date"]',this.dom).datepicker({changeMonth:!0,changeYear:!0})},render:function(){var b={nullboolean:f.nullboolean_tmpl,"boolean":f.boolean_tmpl,date:f.number_tmpl,number:f.number_tmpl,string:f.string_tmpl,"string-list":f.stringlist_tmpl},c=this.dom=a('<span class="form_container"></span>'),d=this.concept_pk;a.each(this.viewset.fields,function(e,g){var h=[b[g.datatype]];h.unshift(a.jqotec("<p>")),h.push(a.jqotec("</p>")),g.hasOwnProperty("pk")||h.push(f.pk_tmpl),a.each(["choices","pkchoices"],function(b,c){g[c]&&a.each(g[c],function(a,b){g[c][a][0]===null&&(g[c][a][0]="null"),g[c][a][1]==="None"&&(g[c][a][1]="No Data")})});var i=null,j=null;if(g.hasOwnProperty("pk"))i=d+"_"+g.pk;else{var k=a.map(g.pkchoices,function(a,b){return parseInt(a[0])});k.sort(),j=k.join("OR"),i=d+"_"+j}var l=a(a.jqote(h,{datatype:g.datatype,choices:g.choices,field_id:i,label:g.name,pkchoices:g.pkchoices,pkchoice_label:g.pkchoice_label,pkchoice_id:j,optional:g.hasOwnProperty("optional")?g.optional:!1,"default":g.hasOwnProperty("default")?g["default"]:0,pkchoice_default:g.hasOwnProperty("pkchoice_default")?g.pkchoice_default:0}));l.children().not("span").wrap("<span/>"),c.append(l)})},elementChanged:function(b){var c=a(b.target);if(!a.contains(this.dom.get(0),c.get(0)))return;var d,e,g=this.dom,h=this;switch(b.target.type){case"checkbox":d=b.target.checked,d=c.is(":visible")&&c.is(":enabled")?d:undefined,g.trigger("ElementChangedEvent",[{name:b.target.name,value:d}]);break;case"select-one":case"select-multiple":case"select":var i=[],j=null,k=f.opRe.exec(c.attr("name"));k&&(j=a("[name^="+k[1]+"_"+k[2]+"]",g).not(c).not("span")),a("option",a(b.target)).each(function(b,c){if(c.selected){i.push(c.value);var d={decimal:1,number:1,date:1};if(j&&j.attr("data-validate")in d)c.value.search(/range/)<0?c.value.search(/null/)<0?(a("input[name="+c.id+"_input1],",g).hide().change(),a("label[for="+c.id+"_input1]",g).hide(),a("input[name="+c.id+"_input0]",g).show().change()):(a("input[name="+c.id+"_input1],",g).hide().change(),a("label[for="+c.id+"_input1]",g).hide(),a("input[name="+c.id+"_input0]",g).hide().change()):(a("input[name="+c.id+"_input1]",g).show().change(),a("label[for="+c.id+"_input1]",g).show(),a("input[name="+c.id+"_input0]",g).show().change());else if(j&&j.prop("type")in{text:1,textarea:1})if(c.value.search(/^-?in$/)<0&&j.prop("type")==="textarea")j.data("switch").data("switch",j),j.before(j.data("switch")).detach(),j.data("switch").keyup();else if(c.value.search(/^-?in$/)>=0&&j.prop("type")==="text")if(!j.data("switch")){var f=a('<textarea rows="8" id="'+j.attr("id")+'" name="'+j.attr("name")+'"></textarea>').data("switch",j);j.before(f).detach(),e=g.data("datasource")||{},e[j.attr("name")]instanceof Array?h.updateElement(null,{name:j.attr("name"),value:e[j.attr("name")]}):typeof e[j.attr("name")]=="string"?h.updateElement(null,{name:j.attr("name"),value:[e[j.attr("name")]]}):h.updateElement(null,{name:j.attr("name"),value:[]}),f.keyup()}else j.data("switch").data("switch",j),j.before(j.data("switch")).detach(),j.data("switch").keyup()}});if(b.target.type==="select-multiple"){var l=[],m=i.length;for(var n=0;n<m;n++){var o=i[n];l.push(o in f.s_to_primative_map?f.s_to_primative_map[o]:o)}d=l}else d=i[0]in f.s_to_primative_map?f.s_to_primative_map[i[0]]:i[0];c.is("[data-optional=true]")&&(d=a.type(d)in{string:1,array:1}&&d.length===0?undefined:d),d=this.state==="INIT"&&c.css("display")!=="none"||c.is(":visible")&&c.is(":enabled")?d:undefined,g.trigger("ElementChangedEvent",[{name:b.target.name,value:d}]);break;case"textarea":d=this.state==="INIT"&&c.css("display")!=="none"||c.is(":visible")&&c.is(":enabled")?c.val().split("\n"):undefined,g.trigger("ElementChangedEvent",[{name:b.target.name,value:d}]);break;default:var p=a(b.target).closest("p").find("select").val(),q=b.target.name.substr(0,b.target.name.length-1);switch(c.attr("data-validate")){case"number":case"decimal":case"date":var r=c.attr("data-validate"),s=a("input[name="+q+"0]",g),t=a("input[name="+q+"1]",g),u;if(r==="date")var v=new Date(s.val()),w=new Date(t.val());else var v=parseFloat(s.val()),w=parseFloat(t.val());r!=="date"&&c.is(":visible")&&isNaN(Number(c.val()))?(u=a.Event("InvalidInputEvent"),c.trigger(u)):a(b.target).hasClass("invalid")?(u=a.Event("InputCorrectedEvent"),c.trigger(u)):p.search(/range/)>=0&&v>w?(u=a.Event("InvalidInputEvent"),u.reason="badrange",u.message="First input must be less than second input.",c.parent().trigger(u)):a(b.target).parent().hasClass("invalid_badrange")&&(t.css("display")==="none"||v<w)&&(u=a.Event("InputCorrectedEvent"),u.reason="badrange",c.parent().trigger(u));break;default:}d=this.state==="INIT"&&c.css("display")!=="none"||c.is(":visible")&&c.is(":enabled")?c.val():undefined,g.trigger("ElementChangedEvent",[{name:b.target.name,value:d}])}b.stopPropagation()},updateElement:function(b,c){var d=a("[name="+c.name+"]",this.dom);if(d.length===0)return;var e=d.prop("type");switch(e){case"checkbox":d.attr("checked",c.value);break;case"select-multiple":var f=a.isArray(c.value)?c.value:[c.value];a("option",d).each(function(b,c){var d=a.map(f,function(a,b){return typeof a in{string:1,number:1}?a:String(a)});a.inArray(c.value,d)!=-1?c.selected=!0:c.selected=!1});break;case"textarea":d.val(c.value.join("\n"));break;default:if(a.isArray(c.value))break;d.attr("value",typeof c.value in{string:1,number:1}?c.value:String(c.value))}}},{s_to_primative_map:{"true":!0,"false":!1,"null":null},opRe:/^(\d*)_(\d+(?:OR\d+)*)_operator$/,nullboolean_tmpl:a.jqotec(['<label for="<%=this.field_id%>"><%=this.label%></label>','<select data-datatype="nullboolean"data-optional="<%=this.optional%>"  multiple id ="<%=this.field_id%>" name="<%=this.field_id%>">','<option <%=this["default"]===true?"selected":""%> value="true">Yes</option>','<option <%=this["default"]===false?"selected":""%> value="false">No</option>','<option <%=this["default"]===null?"selected":""%> value="null">No Data</option>',"</select>"].join("")),boolean_tmpl:a.jqotec(["<%if (this.optional) {%>",'<label for="<%=this.field_id%>"><%=this.label%></label>','<select data-datatype="boolean" data-optional="<%=this.optional%>" id ="<%=this.field_id%>" name="<%=this.field_id%>">','<option value="">No Preference</option>','<option <%=this["default"]===true?"selected":""%> value="true">Yes</option>','<option <%=this["default"]===false?"selected":""%> value="false">No</option>',"</select>","<%} else {%>",'<input type="checkbox" name="<%=this.field_id%>" value="<%=this.field_id%>" <%= this["default"] ? "checked":""%>/>','<label for="<%=this.field_id%>"><%=this.label%></label>',"<%}%>"].join("")),number_tmpl:a.jqotec(['<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>_operator" name="<%=this.field_id%>_operator">',c.join(""),"</select>",'<span class="input_association" name="<%=this.field_id%>_input_assoc">','<input data-validate="<%=this.datatype%>" id="<%=this.field_id%>_input0" type="text" name="<%=this.field_id%>_input0">',' <label for="<%=this.field_id%>_input1">and</label> ','<input data-validate="<%=this.datatype%>" id="<%=this.field_id%>_input1" type="text" name="<%=this.field_id%>_input1">',"</span>"].join("")),string_tmpl:a.jqotec(["<% if (this.choices) {%>",'<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>-operator" name="<%=this.field_id%>_operator">',d.join(""),"</select>",'<select multiple="multiple" id="<%=this.field_id%>-value" name="<%=this.field_id%>" data-optional="<%=this.optional%>" >',"<% for (var index = 0; index < this.choices.length; index++) { %>",'<option value="<%=this.choices[index][0]%>"><%=this.choices[index][1]%></option>',"<%}%>","</select>","<%} else {%>",'<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>-operator" name="<%=this.field_id%>_operator">',e.join(""),"</select>",'<input data-optional="<%=this.optional%>" type="text" id="<%=this.field_id%>_text" name="<%=this.field_id%>">',"<%}%>"].join("")),stringlist_tmpl:a.jqotec(['<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>-operator" name="<%=this.field_id%>_operator">',d.join(""),"</select>",'<textarea data-optional="<%=this.optional%>" id="<%=this.field_id%>_text" name="<%=this.field_id%>"></textarea>'].join("")),pk_tmpl:a.jqotec(['<p><label for="<%=this.pkchoice_id%>"><%=this.pkchoice_label%></label>','<select id="<%=this.pkchoice_id%>" name="<%=this.pkchoice_id%>">',"<% for (index in this.pkchoices) { %>",'<option value="<%=this.pkchoices[index][0]%>" <%=this.pkchoices[index][0]==this.pkchoice_default ? "selected":""%>><%=this.pkchoices[index][1]%></option>',"<%}%>","</select></p>"].join(""))});return f}),define("cilantro/define/chart",["jquery","cilantro/define/form","cilantro/define/viewelement","cilantro/vendor/highcharts"],function(a,b,c){var d=c.extend({constructor:function(a,b){this.options={chart:{marginBottom:50,renderTo:null,zoomType:"",events:{}},tooltip:{formatter:null},events:{},plotOptions:{series:{point:{events:{}},events:{click:null}},line:{animation:!0},pie:{dataLabels:{color:"#000000",connectorColor:"#000000",enabled:!0,formatter:function(){return this.point.name}},borderColor:"#000000",borderWidth:2,allowPointSelect:!1,cursor:"pointer",enableMouseTracking:!0,stickyTracking:!1,states:{hover:{brightness:-0.1,enabled:!0}},point:{events:{mouseOver:function(){},mouseOut:function(){}}}},column:{dataLabels:{enabled:!0},allowPointSelect:!1,cursor:"pointer",borderColor:"#303030",borderWidth:1,enableMouseTracking:!0,stickyTracking:!1,states:{hover:{brightness:-0.1,enabled:!0}}}},credits:{enabled:!1},legend:{enabled:!1},title:{text:null},series:[{name:null,data:null}]},this.base(a,b)},gainedFocus:function(){this.chart.xAxis[0].isDirty=!0,this.chart.yAxis[0].isDirty=!0,this.chart.isDirty=!0,this.chart.series[0].isDirty=!0,this.updateChart()},updateChart:function(){}},{SELECTED_BAR_COLOR:"005DA8",UNSELECTED_COLOR:"#C5C5C5",SELECTED_COLOR:"#99BDF1",EXCLUDE_COLOR:"#EE3A43",INCLUDE_COLOR:"#99BDF1",ALTERNATE_GRID_COLOR:"#FDFFD5",MINIMUM_SLICE:.04,map_data_to_display:function(b){var c={};return a.each(b,function(a,b){c[b[0]]=b[1]}),c},map_display_to_data:function(b){var c={};return a.each(b,function(a,b){c[b[1]]=b[0]}),c},nb_plural_to_singular_map:{"in":"exact","-in":"-exact"},nb_singular_to_plural_map:{exact:"in","-exact":"-in"}}),e=d.extend({constructor:function(c,e){this.selected=[];var f=this.map=d.map_data_to_display(c.data.choices),g=this.unmap=d.map_display_to_data(c.data.choices);this.negated=!1,this.range_form=new b({fields:[{datatype:"string",name:c.data.name,choices:c.data.choices,pk:c.data.pk}]},e),this.range_form=this.range_form.dom,this.range_form.find("select[multiple]").hide(),this.range_form.find("input").css("margin","10px"),a.each(c.data.coords,function(a,b){c.data.coords[a][0]=f[c.data.coords[a][0]]}),this.base(c,e)},notify:function(){this.dom.trigger("ElementChangedEvent",[{name:this.concept_pk+"_"+this.viewset.data.pk,value:this.selected}])},elementChanged:function(a,b){if(b.value===null)return;b.value==="in"?this.negated=!1:this.negated=!0,this.updateChart()},updateDS:function(b,c){this.selected=c[this.concept_pk+"_"+this.viewset.data.pk],this.selected===undefined?this.selected=[]:a.isArray(this.selected)||(this.selected=[this.selected]),this.negated=c[this.concept_pk+"_"+this.viewset.data.pk+"_operator"]==="-in",this.range_form.triggerHandler(b,[c])},updateElement:function(a,b){b.name===this.concept_pk+"_"+this.viewset.data.pk?this.selected=b.value:b.name===this.concept_pk+"_"+this.viewset.data.pk+"_operator"&&b.value==="in"?this.negated=!1:this.negated=!0,this.range_form.triggerHandler(a,[b])},updateChart:function(){var b=this;a.map(this.chart.series[0].data,function(c,d){var e=c.name||c.category;a.inArray(b.unmap[e],b.selected)!==-1?b.negated?c.update({color:b.EXCLUDE_COLOR},!1):c.update({color:b.SELECTED_COLOR},!1):c.update({color:b.UNSELECTED_COLOR},!1)}),this.chart.redraw(),a.map(this.chart.series[0].data,function(b,c){a(b.tracker.element).mouseover(),a(b.tracker.element).mouseout()})},seriesClick:function(b){var c=b.point.category||b.point.name,d=a.inArray(this.unmap[c],this.selected);d===-1?(this.negated?b.point.update({color:this.EXCLUDE_COLOR}):b.point.update({color:this.SELECTED_COLOR}),this.selected.push(this.unmap[c])):(b.point.update({color:this.UNSELECTED_COLOR}),this.selected.splice(d,1)),this.notify(),this.updateChart(),this.chart.hoverPoint=b.point,this.chart.hoverSeries=b.point.series}}),f=e.extend({constructor:function(b,c){var e=b.data.coords,f=this.data_store={};a.each(e,function(a,b){f[b[0]]=b[1]});var g=0;a.each(e,function(a,b){g+=b[1]});var h=g*d.MINIMUM_SLICE;a.each(e,function(a,b){b[1]<h&&(b[1]=h)}),this.base(b,c)},render:function(){this.dom=a('<div class="chart"></div>'),this.options.chart.renderTo=this.dom.get(0);var b=this;this.options.tooltip.formatter=function(){return""+b.data_store[b.unmap[this.point.name]]},this.options.series[0].type="pie",this.options.series[0].name=this.viewset.data.title,this.options.series[0].data=this.viewset.data.coords,this.options.title.text=this.viewset.data.title,this.options.plotOptions.series.events.click=a.proxy(this.seriesClick,this),this.chart=new Highcharts.Chart(this.options)},gainedFocus:function(a){this.base(),this.negated=!1},SELECTED_COLOR:d.SELECTED_COLOR,UNSELECTED_COLOR:d.UNSELECTED_COLOR,EXCLUDE_COLOR:d.EXCLUDE_COLOR}),g=e.extend({render:function(){var b=this;this.dom=a('<div class="chart"></div>'),this.options.chart.marginBottom=this.viewset.data.coords.length>6?100:50,this.options.chart.renderTo=this.dom.get(0),this.options.chart.defaultSeriesType="column",this.options.chart.events.redraw=a.proxy(this.redraw,this),this.options.chart.events.load=a.proxy(this.load,this),this.options.plotOptions.series.events.click=a.proxy(this.seriesClick,this),this.options.title.text=this.viewset.data.title,this.options.series[0].name=this.viewset.data.title,this.options.series[0].data=a.map(this.viewset.data.coords,function(a,b){return a[1]}),this.options.tooltip={formatter:function(){return this.point.category+", "+this.y}},this.options.xAxis={categories:a.map(this.viewset.data.coords,function(a,b){return a[0]}),title:{text:this.viewset.data.xaxis,margin:this.viewset.data.coords.length>6?90:50},labels:{align:this.viewset.data.coords.length>6?"left":"center",y:this.viewset.data.coords.length>6?10:20,rotation:this.viewset.data.coords.length>6?50:0,formatter:function(){var a=this.value;return b.viewset.data.coords.length>6?a.length>20&&(a=a.substr(0,18)+".."):a=this.value.split(" ").join("<br/>"),a}}},this.options.yAxis={min:0,title:{text:this.viewset.data.yaxis},labels:{rotation:45}},this.chart=new Highcharts.Chart(this.options)},redraw:function(b){for(var c=0;c<this.chart.series[0].data.length;c++){var d=this.chart.series[0].data[c];a(d.dataLabel.element).unbind(),a(d.dataLabel.element).attr("fill",d.color),a(d.dataLabel.element).css("color",d.color),a(d.dataLabel.element).hover(function(b){a(this).css("cursor","pointer")},function(b){a(this).css("cursor","")});var e=this;a(d.dataLabel.element).click(function(b){return function(c){b.series.chart.hoverPoint=b,b.series.chart.isDirty=!0;var d=a.inArray(e.unmap[b.category],e.selected);d===-1?e.selected.push(e.unmap[b.category]):e.selected.splice(d,1),e.notify(),e.updateChart()}}(d))}},SELECTED_COLOR:d.SELECTED_BAR_COLOR,UNSELECTED_COLOR:"#999999"}),h=d.extend({constructor:function(c,d){var e=this.range_form=(new b({fields:[c.data]},d)).dom;this.base(c,d);var f=this.extremes=this.chart.xAxis[0].getExtremes(),g=f.max-f.min,h=1/3*g;a("input[name*=input0]",e).val((f.min+h).toFixed(1)),a("input[name*=input1]",e).val((f.min+2*h).toFixed(1)),this.range_form.bind("ElementChangedEvent",a.proxy(this.manual_field_handler,this)),this.manual_field_handler(null)},render:function(){this.range_form.find("input").css("margin","10px");var b=a('<div class="chart"></div>'),c=this.dom=a('<div class="chart"></div>');c.append(b),this.options.chart.renderTo=b.get(0),this.options.chart.defaultSeriesType="line",this.options.chart.zoomType="x",this.options.title.text=this.viewset.data.title,this.options.chart.events.selection=a.proxy(this.chartSelection,this),this.options.chart.events.click=a.proxy(this.chartClick,this),this.options.plotOptions.series.point.events.click=a.proxy(this.pointClick,this),this.options.series[0].name=this.viewset.data.title,this.options.series[0].data=this.viewset.data.coords,this.options.tooltip.formatter=function(){return""+this.y},this.options.xAxis={maxPadding:.05,startOnTick:!1,title:{text:this.viewset.data.xaxis},labels:{align:"center",y:20}},this.options.yAxis={min:0,title:{style:{fontWeight:"bold"},text:this.viewset.data.yaxis,rotation:270},labels:{rotation:45}},this.chart=new Highcharts.Chart(this.options),this.dom.append(this.range_form)},manual_field_handler:function(b){var c=null,e=this.chart.options,f=parseFloat(a("input[name*=input0]",this.range_form).val()).toFixed(1),g=parseFloat(a("input[name*=input1]",this.range_form).val()).toFixed(1);switch(this.range_form.find("select[name*=operator]").val()){case"range":c=d.INCLUDE_COLOR;case"-range":c=c||d.EXCLUDE_COLOR,e.chart.zoomType!=="x"&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="x",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),f&&g&&this.chart.xAxis[0].addPlotBand({from:f,to:g,color:c}),this.dom.trigger("ShowDependentsEvent");break;case"lt":c=d.INCLUDE_COLOR,e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),f&&(this.chart.xAxis[0].addPlotLine({value:f,color:d.EXCLUDE_COLOR,width:3}),this.chart.xAxis[0].addPlotBand({from:this.extremes.min,to:f,color:c})),this.dom.trigger("ShowDependentsEvent");break;case"gt":c=d.INCLUDE_COLOR,e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),f&&(this.chart.xAxis[0].addPlotLine({value:f,color:d.EXCLUDE_COLOR,width:3}),this.chart.xAxis[0].addPlotBand({from:f,to:this.extremes.max,color:c})),this.dom.trigger("ShowDependentsEvent");break;case"lte":c=d.INCLUDE_COLOR,e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),f&&this.chart.xAxis[0].addPlotBand({from:this.extremes.min,to:f,color:c}),this.dom.trigger("ShowDependentsEvent");break;case"gte":c=d.INCLUDE_COLOR,e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),f&&this.chart.xAxis[0].addPlotBand({from:f,to:this.extremes.max,color:c}),this.dom.trigger("ShowDependentsEvent");break;case"exact":c=d.INCLUDE_COLOR,e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),f&&this.chart.xAxis[0].addPlotLine({value:f,color:d.INCLUDE_COLOR,width:3}),this.dom.trigger("ShowDependentsEvent");break;case"-exact":c=d.INCLUDE_COLOR,e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),f&&this.chart.xAxis[0].addPlotLine({value:f,color:d.EXCLUDE_COLOR,width:3}),this.dom.trigger("ShowDependentsEvent");break;case"isnull":c=d.EXCLUDE_COLOR,e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.chart.xAxis[0].removePlotBand(),this.chart.xAxis[0].addPlotLine({from:this.extremes.min,to:this.extremes.max,color:c}),this.dom.trigger("HideDependentsEvent");break;case"-isnull":e.chart.zoomType!==""&&(this.range_form.detach(),this.chart.destroy(),e.chart.zoomType="",e.plotOptions.line.animation=!1,this.chart=new Highcharts.Chart(e),this.dom.append(this.range_form)),this.dom.trigger("ShowDependentsEvent"),this.chart.xAxis[0].removePlotBand()}},updateDSEvent:function(a,b){this.range_form.triggerHandler(a,[b])},elementChanged:function(){},updateElement:function(a,b){this.range_form.triggerHandler(a,[b])},registerElements:function(b){a("select",this.range_form).change()},gainedFocus:function(a){this.base(),this.range_form.triggerHandler(a)},chartSelection:function(b){var c=b.target,d=this.range_form.find("select[name*=operator]").val()==="-range"?h.EXCLUDE_COLOR:h.INCLUDE_COLOR,e=b.xAxis[0].min,f=b.xAxis[0].max;e=e<this.extremes.min?this.extremes.min:e,f=f>this.extremes.max?this.extremes.max:f,e=parseFloat(e).toFixed(1),f=parseFloat(f).toFixed(1),a("input[name*=input0]",this.range_form).val(e).change(),a("input[name*=input1]",this.range_form).val(f).change(),b.preventDefault()},chartClick:function(b){var c=b.target;if(this.chart.options.chart.zoomType)return;var d=b.xAxis[0].value;d=d<this.extremes.min?this.extremes.min:d,d=parseFloat(d).toFixed(1),a("input[name*=input0]",this.range_form).val(d).change()},pointClick:function(b){if(this.chart.options.chart.zoomType)return;var c=b.target.x;c=c<this.extremes.min?this.extremes.min:c,c=parseFloat(c).toFixed(1),a("input[name*=input0]",this.range_form).val(c).change()}});return{BarChart:g,LineChart:h,PieChart:f}}),define("cilantro/define/view",["jquery","cilantro/define/chart","cilantro/define/form","cilantro/utils/frontdesk","cilantro/vendor/base"],function(a,b,c,d){var e=Base.extend({constructor:function(b,c){this.viewset=b,this.fd=new d,this.view=a('<div class="view"></div>'),this.name=c;var e=this.view,f=a(this);e.bind("UpdateElementEvent",jQuery.proxy(this.updateElement,this)),e.bind("HideDependentsEvent ShowDependentsEvent",jQuery.proxy(this.toggleDependents,this)),e.bind("UpdateQueryButtonClicked",jQuery.proxy(this.constructQuery,this)),e.bind("UpdateDSEvent GainedFocusEvent LostFocusEvent RegisterElementsEvent",jQuery.proxy(this.notifyChildren,this)),a(this).bind("GainedFocusEvent LostFocusEvent UpdateQueryButtonClicked HideDependentsEvent RegisterElementsEvent ShowDependentsEvent UpdateDSEvent",jQuery.proxy(this.eventPassThru,this)),this.render()},render:function(){var d=this.viewset,f=this.view,g=this.fd;d.elements[0].type!=="chart"&&f.append("<h2>"+this.name+"</h2>"),a.each(this.viewset.elements,function(h,i){var j=null;switch(i.type){case"form":j=new c(i,d.concept_id),f.append(j.dom),g.checkIn(h,j.dom),g.checkOut(h);break;case"chart":var k=i.data.datatype;k==="number"?(j=new b.LineChart(i,d.concept_id),f.append(j.dom),g.checkIn(h,j.dom),g.checkOut(h)):k==="nullboolean"||k==="boolean"?(j=new b.PieChart(i,d.concept_id),f.append(j.dom),g.checkIn(h,j.dom),g.checkOut(h)):(j=new b.BarChart(i,d.concept_id),f.append(j.dom),g.checkIn(h,j.dom),g.checkOut(h));break;case"custom":i.css&&e.loadCss(i.css),g.checkIn(h);var l=d.elements[0].type==="chart"?0:1;require([i.js],function(b){var c=new b(i,d.concept_id);f.children().length-1<h+l?f.append(c.dom):a(f.children()[h]).prepend(c.dom),g.checkOut(h,c.dom)});break;default:f.append(a("<p>Undefined View!</p>"))}})},updateElement:function(b){var c=this.fd;a.each(this.viewset.elements,function(a){c.leaveMessage(a,"triggerHandler",b)}),b.stopPropagation()},toggleDependents:function(b){var c=this.fd;b.target===this.view.children().get(0)&&a.each(this.viewset.elements,function(a){if(a===0)return;c.leaveMessage(a,"triggerHandler",b)}),b.stopPropagation()},constructQuery:function(b){var c=!1,d=this.fd;a.each(this.viewset.elements,function(a,b){b.type=="custom"&&(c=!0,d.leaveMessage(a,"triggerHandler","ConstructElementQueryEvent"))}),c||this.view.trigger("ConstructQueryEvent"),b.stopPropagation()},notifyChildren:function(b,c){var d=this.fd;a.each(this.viewset.elements,function(a){d.leaveMessage(a,"triggerHandler",b,c)})},eventPassThru:function(a,b){this.view.triggerHandler(a,b)},dom:function(){return this.view}},{loadCss:function(a){var b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.href=a,document.getElementsByTagName("head")[0].appendChild(b)}});return e}),define("cilantro/define/conceptmanager",["jquery","cilantro/define/view"],function(a,b){function x(b){a.inArray(b,o)<0&&(o.push(parseInt(b,10)),l===parseInt(b,10)&&(n.html("<span>Update Condition</span>"),a(".success",h).show()))}function y(b){var c=a.inArray(parseInt(b,10),o);c>=0&&(o.splice(c,1),l===parseInt(b,10)&&(n.html('<span class="icon plus"/> <span>Add Condition</span>'),a(".success",h).hide()))}function z(b){var c=m.elements,d=null;return a.each(c,function(c,e){if(e.type==="custom")return e.datatype;if(e.data){if(e.data.pk==b)return d=e.data.datatype,!1;if(e.data.pkchoices&&a.inArray(b,a.map(e.data.pkchoices,function(a,b){return a[0]}))>=0)return d=e.data.datatype,!1}else{a.each(e.fields,function(c,e){if(e.pk==b)return d=e.datatype,!1;if(e.pkchoices&&a.inArray(b,a.map(e.pkchoices,function(a,b){return a[0]}))>=0)return d=e.datatype,!1});if(d!==null)return!1}}),d}function A(b){var c={};for(var d in b){if(!b.hasOwnProperty(d))continue;var e=q.exec(d);if(e){c.hasOwnProperty(e[2])?a.extend(c[e[2]],{val0:b[d],val1:undefined,op:undefined}):c[e[2]]={val0:b[d],val1:undefined,op:undefined};continue}e=p.exec(d);if(e){c.hasOwnProperty(e[2])?c[e[2]]["val"+e[3]]=Number(b[d])||b[d]:(c[e[2]]={val0:undefined,val1:undefined,op:undefined},c[e[2]]["val"+e[3]]=Number(b[d])||b[d]);continue}e=s.exec(d),e&&(c.hasOwnProperty(e[0])?c[e[0]].pk=b[d]:c[e[0]]={val0:undefined,val1:undefined,op:undefined,pk:b[d]})}for(d in b){if(!b.hasOwnProperty(d))continue;e=r.exec(d),e&&(c[e[2]]||b[d].match(/null/))&&(c.hasOwnProperty(e[2])||(c[e[2]]={val0:undefined,val1:undefined,op:undefined}),c[e[2]].op=b[d])}var f=[];for(var g in c){var h=c[g],i=!1,j=null;s.exec(g)&&(j=g.split("OR"),g=h.pk,i=!0),g=Number(g);if(h.val0===undefined&&h.val1===undefined&&h.op!==undefined)f.push({operator:h.op,id:g,concept_id:l,value:!0,datatype:z(g)});else if(h.val0!==undefined&&h.val1!==undefined&&h.op!==undefined)f.push({operator:h.op,id:g,value:[h.val0,h.val1],concept_id:l,datatype:z(g)});else if(h.val0===undefined||h.op===undefined||h.val0 instanceof Array)if(h.val0!==undefined&&h.val0 instanceof Array){h.op=h.op!==undefined?h.op:"in";var k=z(g);switch(k){case"boolean":case"nullboolean":var n=[],o=u[h.op];a.each(h.val0,function(a,b){n.push({operator:o,id:g,value:w[b]!==undefined?w[b]:b,concept_id:l,datatype:k})}),n.length>1?f.push({type:t.test(h.op)?"and":"or",children:n,concept_id:l}):f.push(n[0]);break;default:f.push({operator:h.op,id:g,value:h.val0,concept_id:l})}}else{if(h.val0===undefined||h.val0 instanceof Array||h.val1!==undefined)throw"Unable to determine field "+h+" in concept "+l;f.push({operator:"exact",id:g,value:h.val0,concept_id:l})}else f.push({operator:h.op,id:g,value:h.val0,concept_id:l,datatype:z(g)});i&&(f[f.length-1].id_choices=j)}var v;return f.length===1?v=f[0]:v={type:m.join_by||"and",children:f,concept_id:l},v}function B(b,c){var d=c||{},e,f;if(!b.hasOwnProperty("type")){b.hasOwnProperty("id_choices")?(f=b.id_choices.join("OR"),d[f]=b.id):f=b.id,e=b.concept_id+"_"+f;if(!b.operator.match(/null/))if(b.datatype in{number:1,date:1}){var g=b.value instanceof Array?b.value:[b.value];for(var h=0;h<g.length;h++)d[e+"_input"+h]=g[h]}else d.hasOwnProperty(e)?d[e]instanceof Array?d[e].push(b.value):(d[e]=[d[e]],d[e].push(b.value)):d[e]=b.value;d[e+"_"+"operator"]=d[e]instanceof Array&&b.datatype&&b.datatype.indexOf("boolean")>=0?v[b.operator]:b.operator}else a.each(b.children,function(a,b){B(b,d)});return d}function C(b,c){m.contents=c;var d=m.contents.dom();g.append(d),d.css("display","block"),a(".chart",m.contents).css("display","block"),m.loaded||(a(c).trigger("UpdateDSEvent",[i[l].ds]),a(c).trigger("RegisterElementsEvent")),a(c).trigger("GainedFocusEvent"),m.loaded=!0}function D(c,e){m!==null&&(m.contents.dom().css("display","none"),a(m.contents).trigger("LostFocusEvent"),m.contents.dom().detach()),m=i[l].views[e];if(m.loaded)C(null,m.contents);else{var f=null;m.concept_id=l,d.fadeIn().trigger("ViewReadyEvent",[new b(m,i[l].name)])}}function E(a,b){}function F(b,c){var d=i[l].ds,e=!1;if(!(c.value instanceof Array||d[c.name]!==c.value))return;if(c.value instanceof Array&&d[c.name]instanceof Array){for(var f=0;f<c.value.length;f++)if(a.inArray(c.value[f],d[c.name])==-1){e=!0;break}if(e===!1&&c.value.length==d[c.name].length)return}c.value===undefined?delete i[l].ds[c.name]:i[l].ds[c.name]=c.value instanceof Array?c.value.slice(0):c.value,a.each(i[l].views,function(a,b){m!==b&&b.contents&&b.contents.trigger("UpdateElementEvent",[c])})}function G(b){var c=!1;if(a.isEmptyObject(b))c=!0;else{c=!0;for(var d in b){if(!b.hasOwnProperty(d))continue;if(r.test(d)){if(b[d]&&b[d].indexOf("isnull")>=0){c=!1;break}}else if(s.test(d)||q.test(d)||p.test(d)){c=!1;break}}}if(c)return!1;for(var d in b){if(!b.hasOwnProperty(d))continue;if(b[d]===undefined||b[d]==="")return!1;if(a.isArray(b[d])&&b[d].length===0)return!1}return!0}function H(b,c){var d;c=c||i[l].ds;if(!c.custom){if(!G(c)){var e=a.Event("InvalidInputEvent");return e.ephemeral=!0,e.message="No value has been specified.",a(b.target).trigger(e),!1}d=A(c)}else d=c;return App.hub.publish("UpdateQueryEvent",d),!0}function I(b){a(m.contents).triggerHandler("UpdateQueryButtonClicked")}function J(b){b.reason=b.reason?"_"+b.reason:"";var c=i[l].invalid_fields,d=a(b.target).attr("name");a.each(i[l].views,function(a,c){c.contents&&c.contents.dom().find("[name="+d+"]").addClass("invalid"+b.reason),c.contents&&c.contents.dom().find("[name="+d+"]").children().addClass("invalid"+b.reason)});var e=b.message?b.message:"This condition contains invalid input. Please correct the above invalid fields.",f=!1;a.each(h.find(".error"),function(g,h){h=a(h);var i=h.data("ref_count");if(h.text()===e){f=!0;if(b.ephemeral)return;if(c[d+b.reason]===undefined)c[d+b.reason]=h,h.data("ref_count",i+1);else if(h.text()!==c[d+b.reason].text()){var j=c[d+b.reason].data("ref_count");c[d+b.reason].data("ref_count",j-1),c[d+b.reason].data("ref_count")===0&&c[d+b.reason].remove(),c[d+b.reason]=h,h.data("ref_count",i+1)}}});if(f)return;var g=a('<div class="message error">'+e+"</div>");g.data("ref_count",1),b.ephemeral||(c[d+b.reason]=g),h.prepend(g);if(b.ephemeral){var j;(j=parseInt(b.ephemeral,10))===NaN&&(j=1e3),setTimeout(function(){g.fadeOut(3e3,function(){g.remove()})},j)}else h.find("#add_to_query").attr("disabled","true")}function K(b){b.reason=b.reason?"_"+b.reason:"";var c=i[l].invalid_fields,d=a(b.target).attr("name");a.each(i[l].views,function(a,c){c.contents&&c.contents.dom().find("[name="+d+"]").removeClass("invalid"+b.reason),c.contents&&c.contents.dom().find("[name="+d+"]").children().removeClass("invalid"+b.reason)});var e=c[d+b.reason].data("ref_count")-1;e===0?c[d+b.reason].remove():c[d+b.reason].data("ref_count",e),delete i[l].invalid_fields[d+b.reason],a.isEmptyObject(i[l].invalid_fields)&&h.find("#add_to_query").removeAttr("disabled")}function L(a,c){c=c||function(){},a.css&&b.loadCss(a.css),a.js?require([a.js],function(b){c(a)}):c(a)}function M(b){b=O(b),l=parseInt(b.id,10),b.globalsLoaded=!0,b.views.length<2?f.hide():f.show();var c=a.jqote(j,b.views);f.html(c),b["static"]?(h.append(b["static"]),n=h.find("#add_to_query")):(h.append(k),n=h.find("#add_to_query"),n.click(function(){var b=a.Event("UpdateQueryButtonClicked");return a(this).trigger(b),!1})),a.inArray(l,o)<0?(n.html('<span class="icon plus"/> <span>Add Condition</span>'),a(".success",h).hide()):(n.html('<span class="icon refresh"/> <span>Update Condition</span>'),a(".success",h).show()),f.children(":first").click()}function N(a,b){var c=f.children().index(b);f.trigger("ShowViewEvent",c)}function O(b){return i[b.id]===undefined?i[b.id]=b:(a.extend(i[b.id],b),b=i[b.id]),b.ds||(b.query?b.query.custom?b.ds=b.query:b.ds=B(b.query):b.ds={}),b.invalid_fields||(b.invalid_fields={}),b}function P(a,b,c,e){d.fadeIn();if(parseInt(a.id,10)===l)return;b&&(a.query=b),l!==null&&(i[l]["static"]=h.children().detach()),i[a.id]&&i[a.id].globalsLoaded?M(a):L(a,M)}var c={},d=a("#plugin-panel"),e=a("#plugin-title"),f=a("#plugin-tabs"),g=a("#plugin-dynamic-content"),h=a("#plugin-static-content"),i={},j='<a class="tab" href="#"><%= this.tabname %></a> ',k=['<button id="add_to_query"></button>','<div class="message success">Added condition</div>'].join(""),l=null,m=null,n=null,o=[],p=/^(\d+)_(\d+(?:OR\d+)*)_input([01])$/,q=/^(\d*)_(\d+(?:OR\d+)*)$/,r=/^(\d*)_(\d+(?:OR\d+)*)_operator$/,s=/^\d+(?:OR\d+)+$/,t=/-/,u={"in":"exact","-in":"-exact",exact:"exact","-exact":"-exact"},v={exact:"in","-exact":"-in"},w={"true":!0,"false":!1,"null":null};return App.hub.subscribe("ConceptAddedEvent",x),App.hub.subscribe("ConceptDeletedEvent",y),d.bind({ViewReadyEvent:C,ViewErrorEvent:E,ShowViewEvent:D,ElementChangedEvent:F,UpdateQueryButtonClicked:I,InvalidInputEvent:J,InputCorrectedEvent:K,ConstructQueryEvent:H}),f.bind("ConceptTabClickedEvent",N),f.tabs(!0,function(a,b){b.trigger("ConceptTabClickedEvent",b)}),{show:P,isConceptLoaded:function(a){return a in i},buildQuery:A,constructQueryHandler:H}}),define("cilantro/define/criteria",["jquery","underscore","cilantro/define/conceptmanager"],function(a,b,c){var d=b.template('<div class="condition clearfix"><a href="#" class="remove"></a><%= text %></div>'),e=a("#condition-list");e.bind("activate-criterion",function(b,d,f){e.children().removeClass("selected"),f.addClass("selected"),a.get(App.endpoints.criteria+d,function(a){c.show(a.viewset,f.data("constraint"))})});var f=function(b,c,e){var f=a(d({text:e}));return f.data("constraint",b),f.find(".remove").click(function(){return App.hub.publish("CriteriaRemovedEvent",f),!1}),f.click(function(a){return App.hub.publish("concept/request",b.concept_id),f.trigger("activate-criterion",[b.concept_id,f]),!1}),f};return{Criteria:f}}),define("cilantro/define/criteriamanager",["jquery","cilantro/define/criteria"],function(a,b){function i(b){if(b.store===null||a.isEmptyObject(b.store))return;b.store.hasOwnProperty("concept_id")?App.hub.publish("UpdateQueryEvent",b.store,b.conditions[b.store.concept_id][0]):a.each(b.store.children,function(a,c){App.hub.publish("UpdateQueryEvent",c,b.conditions[c.concept_id][0])}),d.children().last().click()}var c={},d=a("#condition-list"),e=a("#clear-conditions"),f=App.endpoints.session.scope,g=a("#no-conditions"),h=a("#get-report");return h.click(function(){window.location=App.endpoints.report}),e.click(function(){for(var a in c)c.hasOwnProperty(a)&&App.hub.publish("CriteriaRemovedEvent",c[a])}),App.hub.subscribe("UpdateQueryEvent",function(e,i){var j=e.concept_id,k;a.isEmptyObject(c)&&(g.hide(),h.fadeIn()),h.attr("disabled",!0);if(!i){var l={},m=c.hasOwnProperty(j)?"replace":"add";l[m]=e,a.ajax({type:"PATCH",url:f,data:JSON.stringify(l),contentType:"application/json",success:function(g){var h=a.isEmptyObject(c);m==="replace"?(k=b.Criteria(e,f,g.patch_condition_text),c[j].replaceWith(k),k.fadeTo(300,.5,function(){k.fadeTo("fast",1)})):(k=b.Criteria(e,f,g.patch_condition_text),d.append(k),App.hub.publish("ConceptAddedEvent",j)),c[j]=k,k.addClass("selected"),k.siblings().removeClass("selected"),h&&a(d.children()[0]).find(".field-anchor").click()},complete:function(a,b){h.attr("disabled",!1)},statusCode:{422:function(b,c,d){var e=a.Event("InvalidInputEvent");e.ephemeral=3e3,e.message=JSON.parse(b.responseText).validation_error,a("#plugin-panel").trigger(e)}}})}else k=b.Criteria(e,f,i),d.append(k),App.hub.publish("ConceptAddedEvent",j),c[j]=k,h.removeAttr("disabled");App.hub.publish("concept/request",j)}),App.hub.subscribe("CriteriaRemovedEvent",function(b,d){var e=b.data("constraint");c[e.concept_id].remove(),delete c[e.concept_id],d||(h.attr("disabled",!0),a.patchJSON(f,JSON.stringify({remove:e}),function(){h.removeAttr("disabled")})),App.hub.publish("ConceptDeletedEvent",e.concept_id),a.isEmptyObject(c)&&(g.fadeIn(),h.hide())}),App.hub.subscribe("concept/active",function(a){c[a.id]&&c[a.id].siblings().removeClass("selected"),c[a.id]&&c[a.id].addClass("selected")}),a.getJSON(f,i),App.hub.subscribe("report/revert",function(){for(var b in c)c.hasOwnProperty(b)&&App.hub.publish("CriteriaRemovedEvent",c[b],!0);a.getJSON(f,i)}),{retrieveCriteriaDS:function(b){var c=null;return b&&a.each(d.children(),function(d,e){if(!a(e).data("constraint"))return;a(e).data("constraint").concept_id==b&&(c=a(e).data("constraint"))}),c}}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define("cilantro/pages/define/interface",["backbone","cilantro/define/criteriamanager","cilantro/define/conceptmanager"],function(a,b,c){var d;return d=function(a){function d(){return this.activate=__bind(this.activate,this),d.__super__.constructor.apply(this,arguments)}return __extends(d,a),d.prototype.el="#plugin-panel",d.prototype.initialize=function(){return App.hub.subscribe("concept/active",this.activate)},d.prototype.activate=function(a){var d,e=this;return d=b.retrieveCriteriaDS(a.id),c.isConceptLoaded(a.id)?c.show({id:a.id},d):a.fetch({beforeSend:function(){return e.el.block()},complete:function(){return e.el.unblock()},success:function(){return c.show(a.get("viewset"),d)}})},d}(a.View),{ConceptInterfaceView:d}}),define("cilantro/pages/define/main",["cilantro/types/report/main","cilantro/types/scope/main","cilantro/types/domain/main","cilantro/types/concept/main","cilantro/pages/define/search","cilantro/pages/define/condition","cilantro/pages/define/interface"],function(a,b,c,d,e,f,g){var h,i,j,k,l;return k=new c.Models.Collection,i=new d.Models.Collection,l=new a.Models.Session,j={bind:function(){},fetch:function(){},remove:function(){}},h=new e.ResultCollection,App.pending=2,App.session={},App.ready(function(){return k.at(0).activate()}),$(function(){var b,m,n,o,p,q,r,s,t;return b=new g.ConceptInterfaceView,q=new c.Views.DomainCollectionView({collection:k}),m=new d.Views.CollectionView({collection:i}),n=new e.ResultListView({collection:h}),o=new f.ListView({collection:j}),p=new f.ListPane({list:o}),r=new a.Views.Editor,s=new a.Views.Name({model:l}),t=new a.Messages.UnsavedReport({model:l}),k.fetch({initial:!0,success:function(){return App.pending--}}),i.fetch({initial:!0,success:function(){return App.pending--}}),h.fetch(),j.fetch(),l.fetch(),$(function(){var a,b,c,d,e;return e=$("#concept-search-wrap"),b=function(){return e.addClass("open"),c.focus()},a=function(){return e.removeClass("open")},d=$("#concept-search-toggle").click(b),c=$("#concept-search").on({blur:function(b){return a()}})})})})