var __hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};define(["backbone","underscore"],function(a,b){var c,d,e,f,g;return c={debug:0,info:1,warning:2,error:3,critical:4},f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={level:"info",timeout:3e3},b}(a.Model),d=function(b){function c(){return this.log=__bind(this.log,this),c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=f,c.prototype.initialize=function(){return App.hub.subscribe("log",this.log)},c.prototype.log=function(b){if(b instanceof a.Model)return this.add(b),console.log(b)},c}(a.Collection),g=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template=b.template('<div class="message <%= level %>"><%= message %></div>'),c.prototype.render=function(){return this.el=this.$(this.template(this.model.get("message"))),this},c.prototype.show=function(){return this.el.fadeIn(500)},c.prototype.hide=function(){return this.el.fadeOut(300)},c}(a.View),e=function(c){function d(){return this.dismiss=__bind(this.dismiss,this),this.log=__bind(this.log,this),d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.el="#messages",d.prototype.initialize=function(){return App.hub.subscribe("log",this.log),App.hub.subscribe("dismiss",this.dismiss),this.modelViews={}},d.prototype.log=function(c){var d;c instanceof a.View||(d=c,c=new g({model:d}),this.modelViews[d]=c),this.el.append(c.el.hide()),c.show();if(c.timeout)return this._messageTimer=b.delay(function(){return c.hide()},c.timeout)},d.prototype.dismiss=function(b){var c;b instanceof a.View||(c=b,b=this.modelViews[c],delete this.modelViews[c]);if(b)return clearTimeout(this._messageTimer),b.hide()},d}(a.View),{Message:f,MessageView:g,Log:d,LogView:e}})