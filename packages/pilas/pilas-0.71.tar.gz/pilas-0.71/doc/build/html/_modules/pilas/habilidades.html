

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pilas.habilidades &mdash; Documentación de Pilas Engine</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.69',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="Documentación de Pilas Engine" href="../../index.html" />
    <link rel="up" title="pilas" href="../pilas.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >módulos</a> |</li>
        <li><a href="../../index.html">Documentación de Pilas Engine</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li>
          <li><a href="../pilas.html" accesskey="U">pilas</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pilas.habilidades</h1><div class="highlight"><pre>
<span class="c"># -*- encoding: utf-8 -*-</span>
<span class="c"># Pilas engine - A video game framework.</span>
<span class="c">#</span>
<span class="c"># Copyright 2010 - Hugo Ruscitti</span>
<span class="c"># License: LGPLv3 (see http://www.gnu.org/licenses/lgpl.html)</span>
<span class="c">#</span>
<span class="c"># Website - http://www.pilas-engine.com.ar</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">pilas</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Habilidad</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span> <span class="o">=</span> <span class="n">receptor</span>

    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">RebotarComoPelota</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mf">10.0</span>

        <span class="n">circulo</span> <span class="o">=</span> <span class="n">pilas</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">Circulo</span><span class="p">(</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">error</span><span class="p">,</span>
                                       <span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">error</span><span class="p">,</span>
                                       <span class="n">receptor</span><span class="o">.</span><span class="n">radio_de_colision</span><span class="p">)</span>
        <span class="n">receptor</span><span class="o">.</span><span class="n">aprender</span><span class="p">(</span><span class="n">pilas</span><span class="o">.</span><span class="n">habilidades</span><span class="o">.</span><span class="n">Imitar</span><span class="p">,</span> <span class="n">circulo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circulo</span> <span class="o">=</span> <span class="n">circulo</span>
        <span class="n">receptor</span><span class="o">.</span><span class="n">impulsar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">impulsar</span>
        <span class="n">receptor</span><span class="o">.</span><span class="n">empujar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empujar</span>

    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circulo</span><span class="o">.</span><span class="n">eliminar</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">impulsar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circulo</span><span class="o">.</span><span class="n">impulsar</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">empujar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circulo</span><span class="o">.</span><span class="n">empujar</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RebotarComoCaja</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mf">10.0</span>
        <span class="n">rectangulo</span> <span class="o">=</span> <span class="n">pilas</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">Rectangulo</span><span class="p">(</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">error</span><span class="p">,</span>
                                             <span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">error</span><span class="p">,</span>
                                             <span class="n">receptor</span><span class="o">.</span><span class="n">radio_de_colision</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span>
                                             <span class="n">receptor</span><span class="o">.</span><span class="n">radio_de_colision</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span>
                                             <span class="p">)</span>
        <span class="n">receptor</span><span class="o">.</span><span class="n">aprender</span><span class="p">(</span><span class="n">pilas</span><span class="o">.</span><span class="n">habilidades</span><span class="o">.</span><span class="n">Imitar</span><span class="p">,</span> <span class="n">rectangulo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rectangulo</span> <span class="o">=</span> <span class="n">rectangulo</span>

    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rectangulo</span><span class="o">.</span><span class="n">eliminar</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">ColisionableComoPelota</span><span class="p">(</span><span class="n">RebotarComoPelota</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">RebotarComoPelota</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figura</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figura</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figura</span><span class="p">)</span>

<div class="viewcode-block" id="SeguirAlMouse"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SeguirAlMouse">[docs]</a><span class="k">class</span> <span class="nc">SeguirAlMouse</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="s">&quot;Hace que un actor siga la posición del mouse en todo momento.&quot;</span>

<div class="viewcode-block" id="SeguirAlMouse.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SeguirAlMouse.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">mueve_mouse</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mover</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">mover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">evento</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">evento</span><span class="o">.</span><span class="n">y</span>
</div>
<div class="viewcode-block" id="RotarConMouse"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.RotarConMouse">[docs]</a><span class="k">class</span> <span class="nc">RotarConMouse</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&quot;Hace que un actor rote con respecto a la posicion del mouse.</span>

<span class="sd">    :param lado_seguimiento: Establece el lado del actor que rotará para estar</span>
<span class="sd">    encarado hacia el puntero del mouse.</span>

<span class="sd">        &gt;&gt;&gt; actor.aprender(pilas.habilidades.RotarConMouse, lado_seguimiento=pilas.habilidades.RotarConMouse.ABAJO)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ARRIBA</span> <span class="o">=</span> <span class="mi">270</span>
    <span class="n">ABAJO</span> <span class="o">=</span> <span class="mi">90</span>
    <span class="n">IZQUIERDA</span> <span class="o">=</span> <span class="mi">180</span>
    <span class="n">DERECHA</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="RotarConMouse.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.RotarConMouse.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">lado_seguimiento</span><span class="o">=</span><span class="n">ARRIBA</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">mueve_mouse</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">se_movio_el_mouse</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">actualizar</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lado_seguimiento</span> <span class="o">=</span> <span class="n">lado_seguimiento</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">raton_x</span> <span class="o">=</span> <span class="n">receptor</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raton_y</span> <span class="o">=</span> <span class="n">receptor</span><span class="o">.</span><span class="n">y</span>
</div>
    <span class="k">def</span> <span class="nf">se_movio_el_mouse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raton_x</span> <span class="o">=</span> <span class="n">evento</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raton_y</span> <span class="o">=</span> <span class="n">evento</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">rotar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>

        <span class="n">receptor</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">raton</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raton_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raton_y</span><span class="p">)</span>

        <span class="n">angulo</span> <span class="o">=</span> <span class="n">pilas</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">obtener_angulo_entre</span><span class="p">(</span><span class="n">receptor</span><span class="p">,</span> <span class="n">raton</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">angulo</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lado_seguimiento</span>
</div>
<div class="viewcode-block" id="MirarAlActor"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.MirarAlActor">[docs]</a><span class="k">class</span> <span class="nc">MirarAlActor</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&quot;Hace que un actor rote para mirar hacia otro actor.</span>

<span class="sd">    :param actor_a_seguir : Actor al que se desea seguir con la mirada.</span>
<span class="sd">    :param lado_seguimiento: Establece el lado del actor que rotará para estar</span>
<span class="sd">    encarado hacia el actor que desea vigilar.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ARRIBA</span> <span class="o">=</span> <span class="mi">270</span>
    <span class="n">ABAJO</span> <span class="o">=</span> <span class="mi">90</span>
    <span class="n">IZQUIERDA</span> <span class="o">=</span> <span class="mi">180</span>
    <span class="n">DERECHA</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="MirarAlActor.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.MirarAlActor.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">actor_a_seguir</span><span class="p">,</span> <span class="n">lado_seguimiento</span><span class="o">=</span><span class="n">ARRIBA</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">actualizar</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lado_seguimiento</span> <span class="o">=</span> <span class="n">lado_seguimiento</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actor_a_seguir</span> <span class="o">=</span> <span class="n">actor_a_seguir</span>
</div>
    <span class="k">def</span> <span class="nf">rotar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="n">receptor</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">actor_a_seguir</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actor_a_seguir</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">actor_a_seguir</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="n">angulo</span> <span class="o">=</span> <span class="n">pilas</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">obtener_angulo_entre</span><span class="p">(</span><span class="n">receptor</span><span class="p">,</span> <span class="n">actor_a_seguir</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">angulo</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lado_seguimiento</span>
</div>
<div class="viewcode-block" id="AumentarConRueda"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.AumentarConRueda">[docs]</a><span class="k">class</span> <span class="nc">AumentarConRueda</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="s">&quot;Permite cambiar el tamaño de un actor usando la ruedita scroll del mouse.&quot;</span>

<div class="viewcode-block" id="AumentarConRueda.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.AumentarConRueda.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">mueve_rueda</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cambiar_de_escala</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">cambiar_de_escala</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">escala</span> <span class="o">+=</span> <span class="p">(</span><span class="n">evento</span><span class="o">.</span><span class="n">delta</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SeguirClicks"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SeguirClicks">[docs]</a><span class="k">class</span> <span class="nc">SeguirClicks</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="s">&quot;Hace que el actor se coloque la posición del cursor cuando se hace click.&quot;</span>

<div class="viewcode-block" id="SeguirClicks.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SeguirClicks.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">click_de_mouse</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">moverse_a_este_punto</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">moverse_a_este_punto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">evento</span><span class="o">.</span><span class="n">boton</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">evento</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="mf">0.5</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">evento</span><span class="o">.</span><span class="n">y</span><span class="p">],</span> <span class="mf">0.5</span>

</div>
<div class="viewcode-block" id="Arrastrable"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Arrastrable">[docs]</a><span class="k">class</span> <span class="nc">Arrastrable</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hace que un objeto se pueda arrastrar con el puntero del mouse.</span>

<span class="sd">    Cuando comienza a mover al actor se llama al metodo &#39;&#39;comienza_a_arrastrar&#39;&#39;</span>
<span class="sd">    y cuando termina llama a &#39;&#39;termina_de_arrastrar&#39;&#39;. Estos nombres</span>
<span class="sd">    de metodos se llaman para que puedas personalizar estos eventos, dado</span>
<span class="sd">    que puedes usar polimorfismo para redefinir el comportamiento</span>
<span class="sd">    de estos dos metodos. Observa un ejemplo de esto en</span>
<span class="sd">    el ejemplo ``pilas.ejemplos.Piezas``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Arrastrable.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Arrastrable.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">click_de_mouse</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cuando_intenta_arrastrar</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Arrastrable.cuando_intenta_arrastrar"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Arrastrable.cuando_intenta_arrastrar">[docs]</a>    <span class="k">def</span> <span class="nf">cuando_intenta_arrastrar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="s">&quot;Intenta mover el objeto con el mouse cuando se pulsa sobre el.&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">evento</span><span class="o">.</span><span class="n">boton</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">colisiona_con_un_punto</span><span class="p">(</span><span class="n">evento</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">evento</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
                <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">termina_click</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cuando_termina_de_arrastrar</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;cuando_termina_de_arrastrar&#39;</span><span class="p">)</span>
                <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">mueve_mouse</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cuando_arrastra</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;cuando_arrastra&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">comienza_a_arrastrar</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Arrastrable.cuando_arrastra"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Arrastrable.cuando_arrastra">[docs]</a>    <span class="k">def</span> <span class="nf">cuando_arrastra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="s">&quot;Arrastra el actor a la posicion indicada por el puntero del mouse.&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_el_receptor_tiene_fisica</span><span class="p">():</span>
            <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">cuando_mueve_el_mouse</span><span class="p">(</span><span class="n">evento</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">evento</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">evento</span><span class="o">.</span><span class="n">dx</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">evento</span><span class="o">.</span><span class="n">dy</span>
</div>
<div class="viewcode-block" id="Arrastrable.cuando_termina_de_arrastrar"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Arrastrable.cuando_termina_de_arrastrar">[docs]</a>    <span class="k">def</span> <span class="nf">cuando_termina_de_arrastrar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="s">&quot;Suelta al actor porque se ha soltado el botón del mouse.&quot;</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">mueve_mouse</span><span class="o">.</span><span class="n">desconectar_por_id</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">&#39;cuando_arrastra&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">termina_de_arrastrar</span><span class="p">()</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">termina_click</span><span class="o">.</span><span class="n">desconectar_por_id</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">&#39;cuando_termina_de_arrastrar&#39;</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">comienza_a_arrastrar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_el_receptor_tiene_fisica</span><span class="p">():</span>
            <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">capturar_figura_con_el_mouse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">figura</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">termina_de_arrastrar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_el_receptor_tiene_fisica</span><span class="p">():</span>
            <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">cuando_suelta_el_mouse</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_el_receptor_tiene_fisica</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="p">,</span> <span class="s">&#39;figura&#39;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="MoverseConElTeclado"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.MoverseConElTeclado">[docs]</a><span class="k">class</span> <span class="nc">MoverseConElTeclado</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hace que un actor cambie de posición con pulsar el teclado.</span>

<span class="sd">    :param control: Control al que va a responder para mover el Actor.</span>
<span class="sd">    :param direcciones: Establece si puede mover en cualquier direccion o</span>
<span class="sd">        unicamente en 4 direcciones arriba, abajo, izquierda y derecha. El parametro con_rotacion</span>
<span class="sd">        establece las direcciones a OCHO_DIRECCIONES siempre.</span>
<span class="sd">    :param velocidad_maxima: Velocidad maxima en pixeles a la que se moverá el Actor.</span>
<span class="sd">    :param aceleracion: Indica lo rapido que acelera el actor hasta su velocidad máxima.</span>
<span class="sd">    :param deceleracion: Indica lo rapido que decelera el actor hasta parar.</span>
<span class="sd">    :param con_rotacion: Si deseas que el actor rote pulsando las teclas de izquierda</span>
<span class="sd">        y derecha.</span>
<span class="sd">    :param velocidad_rotacion: Indica lo rapido que rota un actor sobre si mismo.</span>
<span class="sd">    :param marcha_atras: Posibilidad de ir hacia atrás. (True o False)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">CUATRO_DIRECCIONES</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">OCHO_DIRECCIONES</span> <span class="o">=</span> <span class="mi">8</span>


<div class="viewcode-block" id="MoverseConElTeclado.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.MoverseConElTeclado.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">direcciones</span><span class="o">=</span><span class="n">OCHO_DIRECCIONES</span><span class="p">,</span> <span class="n">velocidad_maxima</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                 <span class="n">aceleracion</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">deceleracion</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">con_rotacion</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">velocidad_rotacion</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">marcha_atras</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">actualizar</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_key_press</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">escena</span><span class="o">.</span><span class="n">control</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">control</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">direcciones</span> <span class="o">=</span> <span class="n">direcciones</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deceleracion</span> <span class="o">=</span> <span class="n">deceleracion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima</span> <span class="o">=</span> <span class="n">velocidad_maxima</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aceleracion</span> <span class="o">=</span> <span class="n">aceleracion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">con_rotacion</span> <span class="o">=</span> <span class="n">con_rotacion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_rotacion</span> <span class="o">=</span> <span class="n">velocidad_rotacion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marcha_atras</span> <span class="o">=</span> <span class="n">marcha_atras</span>

</div>
    <span class="k">def</span> <span class="nf">set_velocidad_maxima</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">velocidad</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima</span> <span class="o">=</span> <span class="n">velocidad</span>

    <span class="k">def</span> <span class="nf">get_velocidad_maxima</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima</span>

    <span class="k">def</span> <span class="nf">get_aceleracion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aceleracion</span>

    <span class="k">def</span> <span class="nf">set_aceleracion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aceleracion</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aceleracion</span> <span class="o">=</span> <span class="n">aceleracion</span>

    <span class="n">velocidad_maxima</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_velocidad_maxima</span><span class="p">,</span> <span class="n">set_velocidad_maxima</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s">&quot;Define la velocidad maxima.&quot;</span><span class="p">)</span>
    <span class="n">aceleracion</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_aceleracion</span><span class="p">,</span> <span class="n">set_aceleracion</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s">&quot;Define la acelaracion.&quot;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">on_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">con_rotacion</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">izquierda</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_rotacion</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
            <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">derecha</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_rotacion</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>

            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">arriba</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">avanzar</span><span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">abajo</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">marcha_atras</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">avanzar</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">decelerar</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">decelerar</span><span class="p">()</span>

            <span class="n">rotacion_en_radianes</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">+</span> <span class="mi">90</span><span class="p">)</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rotacion_en_radianes</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rotacion_en_radianes</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direcciones</span> <span class="o">==</span> <span class="n">MoverseConElTeclado</span><span class="o">.</span><span class="n">OCHO_DIRECCIONES</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">izquierda</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
                <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">derecha</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>

                <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">arriba</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
                <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">abajo</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">marcha_atras</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">izquierda</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
                <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">derecha</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
                <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">arriba</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
                <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">abajo</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">marcha_atras</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>

    <span class="k">def</span> <span class="nf">decelerar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">deceleracion</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deceleracion</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">&lt;</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">deceleracion</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deceleracion</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">avanzar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aceleracion</span> <span class="o">*</span> <span class="n">delta</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">=</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span> <span class="o">/</span> <span class="mi">2</span>
</div>
<div class="viewcode-block" id="MoverseComoCoche"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.MoverseComoCoche">[docs]</a><span class="k">class</span> <span class="nc">MoverseComoCoche</span><span class="p">(</span><span class="n">MoverseConElTeclado</span><span class="p">):</span>
    <span class="s">&quot;Hace que un actor se mueva como un coche.&quot;</span>

<div class="viewcode-block" id="MoverseComoCoche.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.MoverseComoCoche.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">velocidad_maxima</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                 <span class="n">aceleracion</span><span class="o">=</span><span class="mf">0.06</span><span class="p">,</span> <span class="n">deceleracion</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">rozamiento</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">MoverseConElTeclado</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span>
                                     <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="p">,</span>
                                     <span class="n">velocidad_maxima</span><span class="o">=</span><span class="n">velocidad_maxima</span><span class="p">,</span>
                                     <span class="n">aceleracion</span><span class="o">=</span><span class="n">aceleracion</span><span class="p">,</span>
                                     <span class="n">deceleracion</span><span class="o">=</span><span class="n">deceleracion</span><span class="p">,</span>
                                     <span class="n">con_rotacion</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rozamiento</span> <span class="o">=</span> <span class="n">rozamiento</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima_aux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>
</div>
    <span class="k">def</span> <span class="nf">set_rozamiento</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nivel_rozamiento</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rozamiento</span> <span class="o">=</span> <span class="n">nivel_rozamiento</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima_aux</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rozamiento</span>

    <span class="k">def</span> <span class="nf">get_rozamiento</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rozamiento</span>

    <span class="k">def</span> <span class="nf">set_velocidad_maxima</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">velocidad</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima</span> <span class="o">=</span> <span class="n">velocidad</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima_aux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_velocidad_maxima</span>

    <span class="k">def</span> <span class="nf">get_velocidad_maxima</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad_maxima</span>

    <span class="n">rozamiento</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_rozamiento</span><span class="p">,</span> <span class="n">set_rozamiento</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s">&quot;Define el rozamiento del coche con la superficie por donde circula.&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="PuedeExplotar"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.PuedeExplotar">[docs]</a><span class="k">class</span> <span class="nc">PuedeExplotar</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="s">&quot;Hace que un actor se pueda hacer explotar invocando al metodo eliminar.&quot;</span>

<div class="viewcode-block" id="PuedeExplotar.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.PuedeExplotar.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">receptor</span><span class="o">.</span><span class="n">eliminar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eliminar_y_explotar</span>
</div>
    <span class="k">def</span> <span class="nf">eliminar_y_explotar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">explosion</span> <span class="o">=</span> <span class="n">pilas</span><span class="o">.</span><span class="n">actores</span><span class="o">.</span><span class="n">Explosion</span><span class="p">()</span>
        <span class="n">explosion</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span>
        <span class="n">explosion</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span>
        <span class="n">explosion</span><span class="o">.</span><span class="n">escala</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">escala</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">actores</span><span class="o">.</span><span class="n">Actor</span><span class="o">.</span><span class="n">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SiempreEnElCentro"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SiempreEnElCentro">[docs]</a><span class="k">class</span> <span class="nc">SiempreEnElCentro</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hace que un actor siempre esté en el centro de la camara y la desplace</span>
<span class="sd">    cuando el actor se desplaza.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SiempreEnElCentro.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SiempreEnElCentro.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">camara</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">camara</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span>

</div>
<div class="viewcode-block" id="SeMantieneEnPantalla"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SeMantieneEnPantalla">[docs]</a><span class="k">class</span> <span class="nc">SeMantieneEnPantalla</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Se asegura de que el actor regrese a la pantalla si sale o que no</span>
<span class="sd">    salga en nigún momento de la pantalla.</span>

<span class="sd">    Si el actor sale por la derecha de la pantalla, entonces regresa</span>
<span class="sd">    por la izquiera. Si sale por arriba regresa por abajo y asi...</span>

<span class="sd">    param: permitir_salida: Valor booleano que establece si el actor</span>
<span class="sd">    puede salir por los lados de la ventana y regresar por el lado opuesto.</span>
<span class="sd">    Si se establece a False, el actor no puede salir de la ventana en ningún</span>
<span class="sd">    momento.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="SeMantieneEnPantalla.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.SeMantieneEnPantalla.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">permitir_salida</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alto</span> <span class="o">=</span> <span class="n">pilas</span><span class="o">.</span><span class="n">mundo</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">obtener_area</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">permitir_salida</span> <span class="o">=</span> <span class="n">permitir_salida</span>
</div>
    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">permitir_salida</span> <span class="p">:</span>
            <span class="c"># Se asegura de regresar por izquierda y derecha.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">derecha</span> <span class="o">&lt;</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">izquierda</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">izquierda</span> <span class="o">&gt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">derecha</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

            <span class="c"># Se asegura de regresar por arriba y abajo.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">abajo</span> <span class="o">&gt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">arriba</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">arriba</span> <span class="o">&lt;</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">abajo</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">izquierda</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">izquierda</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">derecha</span> <span class="o">&gt;=</span>  <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">derecha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancho</span><span class="o">/</span><span class="mi">2</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">arriba</span> <span class="o">&gt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">arriba</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">abajo</span> <span class="o">&lt;</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">abajo</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alto</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</div>
<span class="k">class</span> <span class="nc">PisaPlataformas</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mf">10.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figura</span> <span class="o">=</span> <span class="n">pilas</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">crear_figura_cuadrado</span><span class="p">(</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">error</span><span class="p">,</span>
                                                               <span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">error</span><span class="p">,</span>
                                                               <span class="n">receptor</span><span class="o">.</span><span class="n">radio_de_colision</span><span class="p">,</span>
                                                               <span class="n">masa</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                                               <span class="n">elasticidad</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                               <span class="n">friccion</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ultimo_x</span> <span class="o">=</span> <span class="n">receptor</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ultimo_y</span> <span class="o">=</span> <span class="n">receptor</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Mueve el objeto siempre y cuando no parezca que algo</span>
        <span class="c"># no fisico (es decir de pymunk) lo ha afectado.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figura</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figura</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figura</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Imitar</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">objeto_a_imitar</span><span class="p">,</span> <span class="n">con_rotacion</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objeto_a_imitar</span> <span class="o">=</span> <span class="n">objeto_a_imitar</span>

        <span class="c"># Establecemos el mismo id para el actor y el objeto fisico</span>
        <span class="c"># al que imita. Así luego en las colisiones fisicas sabremos a que</span>
        <span class="c"># actor corresponde esa colisión.</span>
        <span class="n">receptor</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">objeto_a_imitar</span><span class="o">.</span><span class="n">id</span>

        <span class="c"># Y nos guardamos una referencia al objeto físico al que imita.</span>
        <span class="c"># Posterormente en las colisiones fisicas comprobaremos si el</span>
        <span class="c"># objeto tiene el atributo &quot;figura&quot; para saber si estamos delante</span>
        <span class="c"># de una figura fisica o no.</span>
        <span class="n">receptor</span><span class="o">.</span><span class="n">figura</span> <span class="o">=</span> <span class="n">objeto_a_imitar</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">con_rotacion</span> <span class="o">=</span> <span class="n">con_rotacion</span>

    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objeto_a_imitar</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objeto_a_imitar</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">con_rotacion</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objeto_a_imitar</span><span class="o">.</span><span class="n">rotacion</span>

    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objeto_a_imitar</span><span class="p">,</span> <span class="n">pilas</span><span class="o">.</span><span class="n">fisica</span><span class="o">.</span><span class="n">Figura</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">objeto_a_imitar</span><span class="o">.</span><span class="n">eliminar</span><span class="p">()</span>

<div class="viewcode-block" id="DispararLineal"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.DispararLineal">[docs]</a><span class="k">class</span> <span class="nc">DispararLineal</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Establece la habilidad de poder disparar un objeto.</span>
<span class="sd">    El objeto disparado puede ser cualquier actor.</span>

<span class="sd">    :param actor_disparado: Nombre de la clase del actor que se va a disparar.</span>
<span class="sd">    :param grupo_enemigos: Actores que son considerados enemigos y</span>
<span class="sd">            con los que colisionará el proyectil disparado.</span>
<span class="sd">    :param cuando_elimina_enemigo: Funcion que debe llamar cuando se produzca un</span>
<span class="sd">        impacto con un enemigo.</span>
<span class="sd">    :param velocidad: Velocidad del proyectil disparado.</span>
<span class="sd">    :param frecuencia_de_disparo: El número de proyectiles por segundo que</span>
<span class="sd">        realizará.</span>
<span class="sd">    :param angulo_salida_disparo: Especifica el angulo por donde disparará el actor.</span>
<span class="sd">    :param offset_disparo: Separación en pixeles (x,y) del dispara con respecto al centro</span>
<span class="sd">        del Actor.</span>
<span class="sd">    :param offset_origen_disparo: Si el actor no tiene su origen en el centro, con</span>
<span class="sd">        este parametro podremos colocar correctamente el disparo.</span>
<span class="sd">    :param cuando_dispara: Metodo al que se llamara cuando se produzca un disparo.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="DispararLineal.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.DispararLineal.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">actor_disparado</span><span class="p">,</span> <span class="n">grupo_enemigos</span><span class="o">=</span><span class="p">[],</span>
                 <span class="n">cuando_elimina_enemigo</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">velocidad</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                 <span class="n">frecuencia_de_disparo</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                 <span class="n">angulo_salida_disparo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">offset_disparo</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                 <span class="n">offset_origen_disparo</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                 <span class="n">cuando_dispara</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span> <span class="o">=</span> <span class="n">receptor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actor_disparado</span> <span class="o">=</span> <span class="n">actor_disparado</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_x</span> <span class="o">=</span> <span class="n">offset_disparo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_y</span> <span class="o">=</span> <span class="n">offset_disparo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_disparo_x</span> <span class="o">=</span> <span class="n">offset_origen_disparo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_disparo_y</span> <span class="o">=</span> <span class="n">offset_origen_disparo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">angulo_salida_disparo</span> <span class="o">=</span> <span class="n">angulo_salida_disparo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frecuencia_de_disparo</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">/</span> <span class="n">frecuencia_de_disparo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span> <span class="o">=</span> <span class="n">velocidad</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span> <span class="o">=</span> <span class="n">grupo_enemigos</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">definir_colision</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span><span class="p">,</span> <span class="n">cuando_elimina_enemigo</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cuando_dispara</span> <span class="o">=</span> <span class="n">cuando_dispara</span>
</div>
    <span class="k">def</span> <span class="nf">definir_colision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grupo_enemigos</span><span class="p">,</span> <span class="n">cuando_elimina_enemigo</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span> <span class="o">=</span> <span class="n">grupo_enemigos</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">colisiones</span><span class="o">.</span><span class="n">agregar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span><span class="p">,</span>
                                                 <span class="n">cuando_elimina_enemigo</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">boton</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">frecuencia_de_disparo</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">disparar</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">eliminar_disparos_innecesarios</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">eliminar_disparos_innecesarios</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">esta_fuera_de_la_pantalla</span><span class="p">():</span>
                <span class="n">d</span><span class="o">.</span><span class="n">eliminar</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">disparar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">disparo_nuevo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actor_disparado</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_disparo_x</span><span class="p">,</span>
                                             <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_disparo_y</span><span class="p">)</span>

        <span class="n">disparo_nuevo</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">+</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angulo_salida_disparo</span><span class="p">)</span>

        <span class="n">rotacion_en_radianes</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="n">disparo_nuevo</span><span class="o">.</span><span class="n">rotacion</span><span class="p">)</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rotacion_en_radianes</span><span class="p">)</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rotacion_en_radianes</span><span class="p">)</span>

        <span class="n">disparo_nuevo</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_x</span>
        <span class="n">disparo_nuevo</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_y</span>

        <span class="n">disparo_nuevo</span><span class="o">.</span><span class="n">hacer</span><span class="p">(</span><span class="n">pilas</span><span class="o">.</span><span class="n">comportamientos</span><span class="o">.</span><span class="n">Avanzar</span><span class="p">(</span><span class="n">velocidad</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">disparo_nuevo</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cuando_dispara</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cuando_dispara</span><span class="p">(</span><span class="n">disparo_nuevo</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="Disparar"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Disparar">[docs]</a><span class="k">class</span> <span class="nc">Disparar</span><span class="p">(</span><span class="n">Habilidad</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Establece la habilidad de poder disparar un Actor o un objeto de tipo</span>
<span class="sd">    pilas.municion.Municion.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Disparar.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Disparar.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">,</span> <span class="n">municion</span><span class="p">,</span> <span class="n">grupo_enemigos</span><span class="o">=</span><span class="p">[],</span>
                 <span class="n">cuando_elimina_enemigo</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">frecuencia_de_disparo</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                 <span class="n">angulo_salida_disparo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">offset_disparo</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                 <span class="n">offset_origen_actor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                 <span class="n">cuando_dispara</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">escala</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construye la habilidad.</span>

<span class="sd">        :param municion: Municion o Actor que se disparará.</span>
<span class="sd">        :type municion: int</span>
<span class="sd">        :param grupo_enemigos: Actores que son considerados enemigos y con los que colisionará la munición disparada.</span>
<span class="sd">        :param cuando_elimina_enemigo: Método que será llamado cuando se produzca un impacto con un enemigo.</span>
<span class="sd">        :param frecuencia_de_disparo: El número de disparos por segundo que realizará.</span>
<span class="sd">        :param angulo_salida_disparo: Especifica el angulo por donde saldrá el disparo efectuado por el Actor.</span>
<span class="sd">        :param offset_disparo: Separación en pixeles (x,y) del disparo con respecto al centro del Actor.</span>
<span class="sd">        :param offset_origen_actor: Si el Actor no tiene su origen en el centro, con este parametro podremos colocar correctamente el disparo.</span>
<span class="sd">        :param cuando_dispara: Metodo que será llamado cuando se produzca un disparo.</span>

<span class="sd">        :example:</span>

<span class="sd">        &gt;&gt;&gt; mono = pilas.actores.Mono()</span>
<span class="sd">        &gt;&gt;&gt; mono.aprender(pilas.habilidades.Disparar,</span>
<span class="sd">        &gt;&gt;&gt;               municion=pilas.actores.proyectil.Bala,</span>
<span class="sd">        &gt;&gt;&gt;               grupo_enemigos=enemigos,</span>
<span class="sd">        &gt;&gt;&gt;               cuando_elimina_enemigo=eliminar_enemigo)</span>

<span class="sd">        ..</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Habilidad</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receptor</span> <span class="o">=</span> <span class="n">receptor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">municion</span> <span class="o">=</span> <span class="n">municion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_x</span> <span class="o">=</span> <span class="n">offset_disparo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_y</span> <span class="o">=</span> <span class="n">offset_disparo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_actor_x</span> <span class="o">=</span> <span class="n">offset_origen_actor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_actor_y</span> <span class="o">=</span> <span class="n">offset_origen_actor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">angulo_salida_disparo</span> <span class="o">=</span> <span class="n">angulo_salida_disparo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frecuencia_de_disparo</span> <span class="o">=</span> <span class="n">frecuencia_de_disparo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span> <span class="o">=</span> <span class="n">grupo_enemigos</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">definir_colision</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span><span class="p">,</span> <span class="n">cuando_elimina_enemigo</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cuando_dispara</span> <span class="o">=</span> <span class="n">cuando_dispara</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">escala</span> <span class="o">=</span> <span class="n">escala</span>

</div>
<div class="viewcode-block" id="Disparar.set_frecuencia_de_disparo"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.Disparar.set_frecuencia_de_disparo">[docs]</a>    <span class="k">def</span> <span class="nf">set_frecuencia_de_disparo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valor</span><span class="p">):</span>
        <span class="s">&quot;Defina la frecuencia de disparo.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frecuencia_de_disparo</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">/</span> <span class="n">valor</span>
</div>
    <span class="k">def</span> <span class="nf">get_frecuencia_de_disparo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valor</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frecuencia_de_disparo</span>

    <span class="n">frecuencia_de_disparo</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_frecuencia_de_disparo</span><span class="p">,</span> <span class="n">set_frecuencia_de_disparo</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s">&quot;Frecuencia de disparo&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">definir_colision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grupo_enemigos</span><span class="p">,</span> <span class="n">cuando_elimina_enemigo</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span> <span class="o">=</span> <span class="n">grupo_enemigos</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">colisiones</span><span class="o">.</span><span class="n">agregar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grupo_enemigos</span><span class="p">,</span>
                                                 <span class="n">cuando_elimina_enemigo</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulsa_disparar</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frecuencia_de_disparo</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">contador_frecuencia_disparo</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">disparar</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">eliminar_disparos_innecesarios</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">eliminar_disparos_innecesarios</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">esta_fuera_de_la_pantalla</span><span class="p">():</span>
                <span class="n">d</span><span class="o">.</span><span class="n">eliminar</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">desplazar_proyectil</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proyectil</span><span class="p">,</span> <span class="n">offset_x</span><span class="p">,</span> <span class="n">offset_y</span><span class="p">):</span>
        <span class="n">rotacion_en_radianes</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="n">proyectil</span><span class="o">.</span><span class="n">rotacion</span><span class="p">)</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rotacion_en_radianes</span><span class="p">)</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rotacion_en_radianes</span><span class="p">)</span>

        <span class="n">proyectil</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span> <span class="o">*</span> <span class="n">offset_x</span>
        <span class="n">proyectil</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">offset_y</span>

    <span class="k">def</span> <span class="nf">disparar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">espejado</span><span class="p">):</span>
            <span class="n">offset_origen_actor_x</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_actor_x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">offset_origen_actor_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_actor_x</span>

        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">municion</span><span class="p">,</span> <span class="n">pilas</span><span class="o">.</span><span class="n">municion</span><span class="o">.</span><span class="n">Municion</span><span class="p">):</span>

            <span class="n">objeto_a_disparar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">municion</span><span class="p">()</span>

            <span class="n">objeto_a_disparar</span><span class="o">.</span><span class="n">disparar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">offset_origen_actor_x</span><span class="p">,</span>
                                   <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_actor_y</span><span class="p">,</span>
                                   <span class="n">angulo_de_movimiento</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">+</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angulo_salida_disparo</span><span class="p">),</span>
                                   <span class="n">rotacion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">-</span> <span class="mi">90</span><span class="p">,</span>
                                   <span class="n">offset_disparo_x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_x</span><span class="p">,</span>
                                   <span class="n">offset_disparo_y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_y</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">disparo</span> <span class="ow">in</span> <span class="n">objeto_a_disparar</span><span class="o">.</span><span class="n">proyectiles</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">desplazar_proyectil</span><span class="p">(</span><span class="n">disparo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_y</span><span class="p">)</span>
                <span class="n">disparo</span><span class="o">.</span><span class="n">escala</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">escala</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">disparo</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">municion</span><span class="p">,</span> <span class="n">pilas</span><span class="o">.</span><span class="n">actores</span><span class="o">.</span><span class="n">Actor</span><span class="p">):</span>

            <span class="n">objeto_a_disparar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">municion</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">offset_origen_actor_x</span><span class="p">,</span>
                                              <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">offset_origen_actor_y</span><span class="p">,</span>
                                              <span class="n">rotacion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">-</span> <span class="mi">90</span><span class="p">,</span>
                                              <span class="n">angulo_de_movimiento</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receptor</span><span class="o">.</span><span class="n">rotacion</span> <span class="o">+</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angulo_salida_disparo</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">desplazar_proyectil</span><span class="p">(</span><span class="n">objeto_a_disparar</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset_disparo_y</span><span class="p">)</span>

            <span class="n">objeto_a_disparar</span><span class="o">.</span><span class="n">escala</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">escala</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proyectiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">objeto_a_disparar</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;No se puede disparar este objeto.&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cuando_dispara</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cuando_dispara</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">eliminar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">pulsa_disparar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pilas</span><span class="o">.</span><span class="n">escena_actual</span><span class="p">()</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">boton</span>

</div>
<div class="viewcode-block" id="DispararConClick"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.DispararConClick">[docs]</a><span class="k">class</span> <span class="nc">DispararConClick</span><span class="p">(</span><span class="n">Disparar</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the maximum speed for a fox.</span>

<span class="sd">    :Parameters:</span>
<span class="sd">      size</span>
<span class="sd">        The size of the fox (in meters)</span>
<span class="sd">      weight : float</span>
<span class="sd">        The weight of the fox (in stones)</span>
<span class="sd">      age : int</span>
<span class="sd">        The age of the fox (in years)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="DispararConClick.__init__"><a class="viewcode-back" href="../../referencia-habilidades.html#pilas.habilidades.DispararConClick.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kv</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DispararConClick</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">k</span><span class="p">,</span> <span class="o">**</span><span class="n">kv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boton_pulsado</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">eventos</span><span class="o">.</span><span class="n">click_de_mouse</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cuando_hace_click</span><span class="p">)</span>
        <span class="n">pilas</span><span class="o">.</span><span class="n">eventos</span><span class="o">.</span><span class="n">termina_click</span><span class="o">.</span><span class="n">conectar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cuando_termina_click</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">cuando_hace_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">evento</span><span class="o">.</span><span class="n">boton</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">boton_pulsado</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">cuando_termina_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">evento</span><span class="o">.</span><span class="n">boton</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">boton_pulsado</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">pulsa_disparar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">boton_pulsado</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Búsqueda rápida</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >módulos</a> |</li>
        <li><a href="../../index.html">Documentación de Pilas Engine</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li>
          <li><a href="../pilas.html" >pilas</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Hugo Ruscitti.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>