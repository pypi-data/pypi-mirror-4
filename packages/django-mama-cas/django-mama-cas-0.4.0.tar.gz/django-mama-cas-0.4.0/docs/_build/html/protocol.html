

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CAS protocol &mdash; django-mama-cas 0.3 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="django-mama-cas 0.3 documentation" href="index.html" />
    <link rel="prev" title="Forms" href="forms.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="forms.html" title="Forms"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">django-mama-cas 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="cas-protocol">
<span id="protocol"></span><h1>CAS protocol<a class="headerlink" href="#cas-protocol" title="Permalink to this headline">¶</a></h1>
<p>The official CAS protocol specification can be found at
<a class="reference external" href="http://www.jasig.org/cas/protocol">http://www.jasig.org/cas/protocol</a>. Where appropriate, comments within the
code include numbers in parenthesis (e.g. <tt class="docutils literal"><span class="pre">(2.3)</span></tt>) corresponding to the
section number within the CAS protocol documentation where that functionality
is described. Additionally, views are labeled with a CAS version number in
brackets (e.g. <tt class="docutils literal"><span class="pre">[CAS</span> <span class="pre">2.0]</span></tt>) corresponding to the CAS version that defines
that particular URI.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="http://www.jasig.org/cas/protocol">CAS Protocol</a></li>
<li><a class="reference external" href="https://wiki.jasig.org/display/CASUM/Home">CAS User Manual</a></li>
</ul>
</div>
<div class="section" id="authentication-process">
<h2>Authentication process<a class="headerlink" href="#authentication-process" title="Permalink to this headline">¶</a></h2>
<p>A quick summary of how the authentication process works might be helpful in
understanding how these pieces work together. Obviously, a lot of detail is
skipped here that is necessary for a complete understanding of how the login
process works.</p>
<dl class="docutils">
<dt><strong>CAS 1.0 authentication process</strong></dt>
<dd><p class="first">To begin, an unauthenticated client initiates a login request from a CAS
enabled service. The service redirects the login request to <tt class="docutils literal"><span class="pre">/login</span></tt>,
which is acting as a credential requestor. Along with the login request,
the service URL is passed as a GET parameter. The CAS server finds no
existing session for the client, and therefore displays a login form. The
client enters appropriate credentials and submits the form back to
<tt class="docutils literal"><span class="pre">/login</span></tt>, which is now acting as a credential acceptor. If the credentials
are valid, a service ticket is generated specific to the service URL
provided and the client is redirected back to the service URL with the
service ticket appended to the request.</p>
<p class="last">Now that the service has received a service ticket, it makes an additional
request to <tt class="docutils literal"><span class="pre">/validate</span></tt> to verify the validity of the service ticket that
was received. Whether or not this validation succeeds, the service ticket
is used up and is invalid for any future validation attempts. If the
service ticket validates, the user is now successfully authenticated to the
service.</p>
</dd>
</dl>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="http://www.jasig.org/cas/cas1-architecture">CAS 1 Architecture</a></li>
</ul>
</div>
<dl class="docutils">
<dt><strong>CAS 2.0 authentication process</strong></dt>
<dd><p class="first">When using CAS 2.0, the first step in the authentication process occurs
identically to CAS 1.0. However, once the service receives the service
ticket, it instead makes a request to either <tt class="docutils literal"><span class="pre">/serviceValidate</span></tt> or
<tt class="docutils literal"><span class="pre">/proxyValidate</span></tt> to validate the service ticket.</p>
<p>If the service desires a proxy ticket, it will pass a proxy callback URL
as a parameter to the validator. If the callback URL is valid, a proxy-
granting ticket is returned to the service.</p>
<p class="last">Having obtained a proxy-granting ticket, the service can then issue a
request to <tt class="docutils literal"><span class="pre">/proxy</span></tt> to aquire proxy tickets which can then be validated
through <tt class="docutils literal"><span class="pre">/proxyValidate</span></tt>.</p>
</dd>
</dl>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="http://www.jasig.org/cas/cas2-architecture">CAS 2 Architecture</a></li>
<li><a class="reference external" href="http://www.jasig.org/cas/proxy-authentication">Proxy Authentication</a></li>
</ul>
</div>
</div>
<div class="section" id="protocol-deviations">
<span id="id2"></span><h2>Protocol deviations<a class="headerlink" href="#protocol-deviations" title="Permalink to this headline">¶</a></h2>
<p>There are some areas where django-mama-cas deviates from the official CAS
specification to take advantage of built-in Django functionality.</p>
<dl class="docutils">
<dt><strong>Login ticket</strong></dt>
<dd>This ticket string created for the login form is passed along with the
username and password to prevent the replaying of credentials.
django-mama-cas does not implement login tickets and instead relies on
the built-in CSRF protection for the login form.</dd>
<dt><strong>Ticket-granting ticket</strong></dt>
<dd>This ticket string is stored on the server and keys to a ticket-granting
cookie provided by the client to identify an existing single sign-on
session. django-mama-cas does not implement ticket-granting tickets and
instead uses Django sessions to determine whether or not a single sign-on
session has been established.</dd>
<dt><strong>Custom attributes</strong></dt>
<dd>Custom attributes can be returned along with a CAS 2.0 service or proxy
validation success. This is not part of the official CAS specification, but
is widely used in practice.</dd>
</dl>
<p>These changes do not alter the contract between the client, service and CAS
server.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CAS protocol</a><ul>
<li><a class="reference internal" href="#authentication-process">Authentication process</a></li>
<li><a class="reference internal" href="#protocol-deviations">Protocol deviations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="forms.html"
                        title="previous chapter">Forms</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/protocol.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="forms.html" title="Forms"
             >previous</a> |</li>
        <li><a href="index.html">django-mama-cas 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jason Bittel.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>