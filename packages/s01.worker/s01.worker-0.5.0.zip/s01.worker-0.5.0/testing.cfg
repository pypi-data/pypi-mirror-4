[testenv]
S01_CORE_MONGODB = localhost:45017
S01_WORKER_AUTO_START_PROCESSOR = false
S01_WORKER_AUTO_START_SCHEDULER = false
S01_WORKER_COPY_TO_ZLOG = 1
S01_WORKER_PACKAGE_DIRECTORY = ${buildout:directory}/parts/test-pkgs
S01_WORKER_PYPI_URL = http://pypi.python.org/pypi
S01_WORKER_SERVER_NAME = testing
S01_WORKER_WAIT_TIME = 1


[test-pkgs]
recipe = z3c.recipe.dev:mkdir
path = parts/test-pkgs


[test]
recipe = zc.recipe.testrunner
defaults = ['--tests-pattern', '^f?tests$']
eggs = s01.worker [test]
environment = testenv


[checker]
recipe = lovely.recipe:importchecker
path = src/s01/worker


[coverage-test]
recipe = zc.recipe.testrunner
eggs = s01.worker [test]
defaults = ['--coverage', '../../coverage']
environment = testenv


[coverage-report]
recipe = zc.recipe.egg
eggs = z3c.coverage
scripts = coverage=coverage-report
arguments = ('coverage', 'coverage/report')
