<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

<xi:include href="admin_master.html" />

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
    <title>ACR Administration Section</title>
    <style>
        #upload_form {
            width: 400px;
            padding: 5px;
        }

        #assets_list {
            width: 100%;
        }

        .replace_form {
            display: none;
        }

        .replace_form input {
            width: 300px;
        }

        #tabs-header ul {
            list-style: none;
            padding:0;
            margin:0;
        }

        #tabs-header li {
            float: left;
            border: 1px solid #CCC;
            margin: 0 0.5em 5px 0;
            border-radius: 5px;
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
        }

        #tabs-header li a {
            padding: 0 1em;
            text-decoration: none;
            color: #662625;
            font-weight: bold;
            font-style: italic;
        }

        .selected {
            background: #EEEEEE;
            border: 1px solid #662625 !important;
        }

        #tabs-content {
            clear: both;
        }




    </style>
    <script>
        function show_replace(btn, category) {
            jQuery(btn).hide();
            jQuery(btn).siblings().hide();
            jQuery(btn).siblings('.replace_form').fadeIn();
            jQuery("td .replace_form #category_select").val(category);
            return false;
        }

        function show_table(cat) {
            var buid = "#btn-" + cat;
            var taid = "#cat-" + cat;
            jQuery('.tab-btn').removeClass('selected');
            jQuery(buid).addClass('selected');
            jQuery("#tabs-content div").hide();
            jQuery(taid).show();
        }

        jQuery(document).ready(function(){
            var first_li = jQuery("#tabs-header ul li:first-child");
            first_li.find("a").click();
            first_li.addClass("selected");
        })
    </script>
</head>

<body>
<div class="section_box" id="asset_upload">
    <h1 class="title">Upload</h1>
    <div id="upload_form" class="section_icons">
        ${upload_form(value=values, action=h.acr_url('/admin/assets/upload'))}
    </div>
</div>

<div class="section_box" id="manage_assets">
    <h1 class="title">Assets</h1>
    <div id="tabs-header">
        <ul>
            <li py:for="cat in categories" class="tab-btn" id="btn-${cat}">
                <a href="#" onclick="show_table('${cat}')" title="Category: ${cat.title()}">${cat.title()}</a>
            </li>
        </ul>

    </div>

    <div id="tabs-content">
        <div py:for="i, cat in enumerate(categories)" id="cat-${cat}" style="display: none">
            <table id="assets_list" class="section_icons">
                <tr>
                    <th>Preview</th>
                    <th>Name</th>
                    <th>Content Type</th>
                    <th>Action</th>
                </tr>
                <tr py:for="count, asset in enumerate(assets[i])" class="${count % 2 and 'even' or 'odd'}">
                    <td style="width: 10em;">
                        <a href="${asset.url}" target="_blank">
                            <img src="${asset.thumb_url('small')}"/>
                        </a>
                    </td>
                    <td style="width: 5em;">${asset.name}</td>
                    <td style="width: 5em;">${asset.content_type}</td>
                    <td style="width: 1em;">
                        <div class="replace_form">
                            ${upload_form(value={'uid':asset.uid}, action=h.acr_url('/admin/assets/upload'))}
                        </div>
                        <a href="#" onclick="return show_replace(this, '${asset.category}');"
                           class="objects_list_entry">replace</a>
                        <a href="${h.acr_url('/admin/assets/delete', uid=asset.uid)}"
                           onclick="return confirm('Do you really want to delete this asset?');"
                           class="objects_list_entry">delete</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>

</div>
</body>
</html>
