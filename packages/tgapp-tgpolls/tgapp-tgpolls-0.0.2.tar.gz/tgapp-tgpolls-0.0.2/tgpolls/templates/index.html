<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" py:if="False"/>
  <title>TGPolls pluggable Application</title>
  <link rel="stylesheet" type="text/css" media="screen" href="${tg.url('/_pluggable/tgpolls/css/style.css')}" />
</head>

<body>
    <h1>Polls</h1>
    <br />
    <a href="${h.plug_url('tgpolls', '/new')}" py:if="request.identity" class="btn btn-success pull-right">New poll</a>
    <div py:for="poll in polls" class="tgpolls_poll_container">
        <h6>This poll will end at ${poll.expiry}</h6>
        <div class="tgpolls_poll">${h.call_partial('tgpolls.partials:poll_partial', poll=poll)}</div>
    </div>
    <br/>
    <div  py:if="request.identity">
        <hr/>
        <h1>Expired Polls</h1>
        <div py:for="poll in expired_polls" class="tgpolls_poll_container">
            <h6>This poll ended at ${poll.expiry}</h6>
            <div class="tgpolls_poll">${h.call_partial('tgpolls.partials:poll_partial', poll=poll)}</div>
        </div>
    </div>
</body>
</html>
