#!/bin/sh

test_dir=$(cd $(dirname $0) && pwd)
source "$test_dir/setup.sh"

oneTimeSetUp() {
    rm -rf "$WORKON_HOME"
    mkdir -p "$WORKON_HOME"
    source "$test_dir/../virtualenvwrapper_lazy.sh"
}

oneTimeTearDown() {
    rm -rf "$WORKON_HOME"
}

setUp () {
    echo
    rm -f "$test_dir/catch_output"
}

test_workon_changes_defs() {
    assertFalse "virtualenvwrapper_run_hook is already defined" "type virtualenvwrapper_run_hook"
	# Run workon to get a list of virtualenvs without changing the
	# current setting. This should cause the function definitions
	# to be loaded from the real virtualenvwrapper.sh script.
	workon >/dev/null 2>&1
    assertTrue "virtualenvwrapper_run_hook is already defined" "type virtualenvwrapper_run_hook"
}

. "$test_dir/shunit2"
