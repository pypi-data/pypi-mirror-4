define(["jquery","underscore"],function(e,t){var n,r,i,s;return r=function(t){var n,r,i;r=!1,t=t.not(":disabled"),t.is("input[type=checkbox]")&&t.length>1&&(r=!0),t.is("input[type=radio],input[type=checkbox]")&&(t=t.filter(":checked")),t.is("select[multiple]")?(r=!0,i=t.val()):r||t.length>1?(r=!0,i=function(){var r,i,s;s=[];for(r=0,i=t.length;r<i;r++)n=t[r],s.push(e(n).val());return s}()):i=t.val();if(i==null||i==="")i=r?[]:null;return i},i=function(n,r){var i,s,o,u,a;s=!1,n.is("select[multiple],input[type=radio],input[type=checkbox]")&&(s=!0);if(!s&&n.length>1){t.isArray(r)||(r=[r]);for(i=u=0,a=r.length;u<a;i=++u)o=r[i],e(n[i]).val(o);return}s&&!t.isArray(r)?r=[r]:!s&&t.isArray(r)&&(r=r[0]),n.val(r)},n=function(e,r){var i,s,o,u;if(e==null||e==="")return null;if(t.isArray(e)){i=[];for(o=0,u=e.length;o<u;o++)s=e[o],(s=n(s,r))&&i.push(s);return i.length?i:null}switch(r){case"boolean":switch(e){case!0:case 1:case"true":case"1":return!0;case!1:case 0:case"false":case"0":return!1}break;case"number":return parseFloat(e);case"string":return e.toString();case"date":case"datetime":case"time":return Date.parse(e)}},s=function(e,n){switch(n){case"boolean":return t.isBoolean(e);case"number":return t.isNumber(e);case"string":return t.isString(e);case"date":case"datetime":case"time":return t.isDate(e);default:return!1}},{getInputValue:r,setInputValue:i,coerceValue:n,validateValue:s}});