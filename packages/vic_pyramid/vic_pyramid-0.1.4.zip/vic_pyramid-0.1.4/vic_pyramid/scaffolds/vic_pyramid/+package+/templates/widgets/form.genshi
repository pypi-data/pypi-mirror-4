<!DOCTYPE HTML>
<html xmlns:py="http://genshi.edgewall.org/"
      py:strip="True">
      
<py:def function="form_label(field)">
    <label class="control-label" for="${ field.label.field_id }">${ field.label.text }</label>
</py:def>

<py:def function="field_errors(field)">
    <span class="field_error" py:for="error in field.errors">
        <span class="label label-important">${ error }</span>
    </span>
</py:def>
      
<py:def function="form_field(field)">
    <div class="control-group${ ' error' if field.errors else '' }">
        ${ form_label(field) }
        <div class="controls">
            ${ field() }
            ${ field_errors(field) }
        </div> 
    </div>
</py:def>

<py:def function="standard_form(form, action, submit=_('Submit'), method='POST')">
    <form class="form-horizontal" action="${ action }" method="${ method }">
        <fieldset>
            <py:for each="field in form">
                ${ form_field(field) }
            </py:for>
            
            <div class="form-actions">
                <input name="submit" class="btn" type="submit" value="${ submit }" />
            </div>
        </fieldset>
        <input type="hidden" name="csrf_token" value="${ request.session.get_csrf_token() }" />
    </form>
</py:def>

</html>
