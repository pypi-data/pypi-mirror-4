{% extends "root.html" -%}

{% block head -%}
<script src="//connect.soundcloud.com/sdk.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="{{ url_for('static', filename='stream.js') }}"></script>
{%- endblock head %}

{% block body -%}

<h2>{{ data.track.title }}</h2>
<a href="?destroy={{ data.track.id }}">Destroy</a>

Track: {{ data.track.permalink_url }}

<img
src="http://24.media.tumblr.com/tumblr_ls9dsgn8c81qaqgrmo1_250.gif">
<img src="{{ data.track.artwork_url }}">

<a href="">Next</a>

<div class="player">
    <button type="button" name="play-pause" id="play-pause" class="button">
        Pause
    </button>

    <a href="?like={{ data.track.id }}" id="like" class="button">Like</a>
    <a href="?dislike={{ data.track.id }}" id="dislike" class="button">Dislike</a>
</div>

<script>
    SC.initialize({
        client_id: "{{ data.id }}"
    });

    SC.stream("/tracks/{{ data.track.sc_id }}", {
        onfinish: function() {
            location.reload();
        }
    }, function(sound){
        sc_plugin.init(sound);
        sc_plugin.add_media_listeners(sound);
    });


</script>
{%- endblock body %}
