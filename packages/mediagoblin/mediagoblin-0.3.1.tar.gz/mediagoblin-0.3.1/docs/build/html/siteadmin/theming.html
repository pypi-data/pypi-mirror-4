

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Theming MediaGoblin &mdash; GNU MediaGoblin 0.3.2.dev documentation</title>
    
    <link rel="stylesheet" href="../_static/mg.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.2.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="GNU MediaGoblin 0.3.2.dev documentation" href="../index.html" />
    <link rel="next" title="Plugins" href="plugins.html" />
    <link rel="prev" title="Release Notes" href="relnotes.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plugins.html" title="Plugins"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="relnotes.html" title="Release Notes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">GNU MediaGoblin 0.3.2.dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="theming-mediagoblin">
<span id="theming-chapter"></span><h1>Theming MediaGoblin<a class="headerlink" href="#theming-mediagoblin" title="Permalink to this headline">¶</a></h1>
<p>We try to provide a nice theme for MediaGoblin by default, but of
course, you might want something different!  Maybe you want something
more light and colorful, or maybe you want something specifically
tailored to your organization.  Have no fear&#8212;MediaGoblin has theming
support!  This guide should walk you through installing and making
themes.</p>
<div class="section" id="installing-a-theme">
<h2>Installing a theme<a class="headerlink" href="#installing-a-theme" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing-the-archive">
<span id="theming-installing-section"></span><h3>Installing the archive<a class="headerlink" href="#installing-the-archive" title="Permalink to this headline">¶</a></h3>
<p>Say you have a theme archive such as <tt class="docutils literal"><span class="pre">goblincities.tar.gz</span></tt> and you
want to install this theme!  Don&#8217;t worry, it&#8217;s fairly painless.</p>
<ol class="arabic">
<li><p class="first"><tt class="docutils literal"><span class="pre">cd</span> <span class="pre">./user_dev/themes/</span></tt></p>
</li>
<li><p class="first">Move the theme archive into this directory</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">tar</span> <span class="pre">-xzvf</span> <span class="pre">&lt;tar-archive&gt;</span></tt></p>
</li>
<li><p class="first">Open your configuration file (probably named
<tt class="docutils literal"><span class="pre">mediagoblin_local.ini</span></tt>) and set the theme name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">mediagoblin</span><span class="p">]</span>
<span class="c"># ...</span>
<span class="n">theme</span> <span class="o">=</span> <span class="n">goblincities</span>
</pre></div>
</div>
</li>
<li><p class="first">Link the assets so that they can be served by your web server:</p>
<div class="highlight-python"><pre>$ ./bin/gmg theme assetlink</pre>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you ever change the current theme in your config file, you
should re-run the above command!</p>
</div>
<p>(In the near future this should be even easier ;))</p>
</div>
<div class="section" id="set-up-your-webserver-to-serve-theme-assets">
<h3>Set up your webserver to serve theme assets<a class="headerlink" href="#set-up-your-webserver-to-serve-theme-assets" title="Permalink to this headline">¶</a></h3>
<p>If you followed the nginx setup example in <a class="reference internal" href="deploying.html#webserver-config"><em>Connect the Webserver to MediaGoblin with FastCGI</em></a> you
should already have theme asset setup.  However, if you set up your
server config with an older version of mediagoblin and the mediagoblin
docs, it&#8217;s possible you don&#8217;t have the &#8220;theme static files&#8221; alias, so
double check to make sure that section is there if you are having
problems.</p>
<p>If you are simply using this for local development and serving the
whole thing via paste/lazyserver, assuming you don&#8217;t have a
paste_local.ini, the asset serving should be done for you.</p>
</div>
<div class="section" id="configuring-where-things-go">
<h3>Configuring where things go<a class="headerlink" href="#configuring-where-things-go" title="Permalink to this headline">¶</a></h3>
<p>By default, MediaGoblin&#8217;s install directory for themes is
<tt class="docutils literal"><span class="pre">./user_dev/themes/</span></tt> (relative to the MediaGoblin checkout or base
config file.)  However, you can change this location easily with the
<tt class="docutils literal"><span class="pre">theme_install_dir</span></tt> setting in the <tt class="docutils literal"><span class="pre">[mediagoblin]</span></tt> section.</p>
<p>For example:</p>
<div class="highlight-python"><pre>[mediagoblin]
# ... other parameters go here ...
theme_install_dir = /path/to/themes/</pre>
</div>
<p>Other variables you may consider setting:</p>
<dl class="docutils">
<dt><cite>theme_web_path</cite></dt>
<dd>When theme-specific assets are specified, this is where MediaGoblin
will set the urls.  By default this is <tt class="docutils literal"><span class="pre">&quot;/theme_static/&quot;</span></tt> so in
the case that your theme was trying to access its file
<tt class="docutils literal"><span class="pre">&quot;images/shiny_button.png&quot;</span></tt> MediaGoblin would link
to <tt class="docutils literal"><span class="pre">/theme_static/images/shiny_button.png</span></tt>.</dd>
<dt><cite>theme_linked_assets_dir</cite></dt>
<dd>Your web server needs to serve the theme files out of some directory,
and MediaGoblin will symlink the current theme&#8217;s assets here.  See
the &#8220;Link the assets&#8221; step in <a class="reference internal" href="#theming-installing-section"><em>Installing the archive</em></a>.</dd>
</dl>
</div>
</div>
<div class="section" id="making-a-theme">
<h2>Making a theme<a class="headerlink" href="#making-a-theme" title="Permalink to this headline">¶</a></h2>
<p>Okay, so a theme layout is pretty simple.  Let&#8217;s assume we&#8217;re making a
theme for an instance about hedgehogs!  We&#8217;ll call this the
&#8220;hedgehogified&#8221; theme.</p>
<p>Change to where your <tt class="docutils literal"><span class="pre">theme_install_dir</span></tt> is set to (by default,
<tt class="docutils literal"><span class="pre">./user_dev/themes/</span></tt> ... make those directories or otherwise adjust
if necessary):</p>
<div class="highlight-python"><pre>hedgehogified/
|- theme.cfg                # configuration file for this theme
|- templates/               # override templates
|  '- mediagoblin/
|     |- base.html          # overriding mediagoblin/base.html
|     '- root.html          # overriding mediagoblin/root.html
'- assets/
|  '- images/
|  |  |- im_a_hedgehog.png  # hedgehog-containing image used by theme
|  |  '- custom_logo.png    # your theme's custom logo
|  '- css/
|     '- hedgehog.css       # your site's hedgehog-specific css
|- README.txt               # Optionally, a readme file (not required)
|- AGPLv3.txt               # AGPL license file for your theme. (good practice)
'- CC0_1.0.txt              # CC0 1.0 legalcode for the assets [if appropriate!]</pre>
</div>
<p>The top level directory of your theme should be the symbolic name for
your theme.  This is the name that users will use to refer to activate
your theme.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It&#8217;s important to note that templates based on MediaGoblin&#8217;s code
should be released as AGPLv3 (or later), like MediaGoblin&#8217;s code
itself.  However, all the rest of your assets are up to you.  In this
case, we are waiving our copyright for images and CSS into the public
domain via CC0 (as MediaGoblin does) but do what&#8217;s appropriate to you.</p>
</div>
</div>
<div class="section" id="the-config-file">
<h2>The config file<a class="headerlink" href="#the-config-file" title="Permalink to this headline">¶</a></h2>
<p>The config file is not presently strictly required, though it is nice to have.
Only a few things need to go in here:</p>
<div class="highlight-python"><pre>[theme]
name = Hedgehog-ification
description = For hedgehog lovers ONLY
licensing = AGPLv3 or later templates; assets (images/css) waived under CC0 1.0</pre>
</div>
<p>The name and description fields here are to give users an idea of what
your theme is about.  For the moment, we don&#8217;t have any listing
directories or admin interface, so this probably isn&#8217;t useful, but
feel free to set it in anticipation of a more glorious future.</p>
<p>Licensing field is likewise a textual description of the stuff here;
it&#8217;s recommended that you preserve the &#8220;AGPLv3 or later templates&#8221; and
specify whatever is appropriate to your assets.</p>
<div class="section" id="templates">
<h3>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h3>
<p>Your template directory is where you can put any override and custom
templates for MediaGoblin.</p>
<p>These follow the general MediaGoblin theming layout, which means that
the MediaGoblin core templates are all kept under the <tt class="docutils literal"><span class="pre">./mediagoblin/</span></tt>
prefix directory.</p>
<p>You can copy files right out of MediaGoblin core and modify them in
this matter if you wish.</p>
<p>To fit with best licensing form, you should either preserve the
MediaGoblin copyright header borrowing from a MediaGoblin template, or
you may include one like the following:</p>
<div class="highlight-python"><pre>{#
# [YOUR THEME], a MediaGoblin theme
# Copyright (C) [YEAR] [YOUR NAME]
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
#}</pre>
</div>
</div>
<div class="section" id="assets">
<h3>Assets<a class="headerlink" href="#assets" title="Permalink to this headline">¶</a></h3>
<p>Put any files, such as images, CSS, etc, that are specific to your
theme in here.</p>
<p>You can reference these in your templates like so:</p>
<div class="highlight-python"><pre>&lt;img src="{{ request.staticdirect('/images/im_a_shark.png', 'theme') }}" /&gt;</pre>
</div>
<p>This will tell MediaGoblin to reference this image from the current theme.</p>
</div>
<div class="section" id="licensing-file-s">
<h3>Licensing file(s)<a class="headerlink" href="#licensing-file-s" title="Permalink to this headline">¶</a></h3>
<p>You should include AGPLv3.txt with your theme as this is required for
the assets.  You can copy this from <tt class="docutils literal"><span class="pre">mediagoblin/licenses/</span></tt>.</p>
<p>In the above example, we also use CC0 to waive our copyrights to
images and css, so we also included CC0_1.0.txt</p>
</div>
<div class="section" id="a-readme-txt-file">
<h3>A README.txt file<a class="headerlink" href="#a-readme-txt-file" title="Permalink to this headline">¶</a></h3>
<p>A README file is not strictly required, but probably a good idea.  You
can put whatever in here, but restating the license choice clearly is
probably a good idea.</p>
</div>
<div class="section" id="simple-theming-by-adding-css">
<h3>Simple theming by adding CSS<a class="headerlink" href="#simple-theming-by-adding-css" title="Permalink to this headline">¶</a></h3>
<p>Many themes won&#8217;t require anything other than the ability to override
some of MediaGoblin&#8217;s core css.  Thankfully, doing so is easy if you
combine the above steps!</p>
<p>In your theme, do the following (make sure you make the necessary
directories and cd to your theme&#8217;s directory first):</p>
<div class="highlight-python"><pre>$ cp /path/to/mediagoblin/mediagoblin/templates/mediagoblin/extra_head.html templates/mediagoblin/</pre>
</div>
<p>Great, now open that file and add something like this at the end:</p>
<div class="highlight-python"><pre>&lt;link rel="stylesheet" type="text/css"
      href="{{ request.staticdirect('/css/theme.css', 'theme') }}"/&gt;</pre>
</div>
<p>You can name the css file whatever you like.  Now make the directory
for <tt class="docutils literal"><span class="pre">assets/css/</span></tt> and add the file <tt class="docutils literal"><span class="pre">assets/css/theme.css</span></tt>.</p>
<p>You can now put custom CSS files in here and any CSS you add will
override default MediaGoblin CSS.</p>
</div>
<div class="section" id="packaging-it-up">
<h3>Packaging it up!<a class="headerlink" href="#packaging-it-up" title="Permalink to this headline">¶</a></h3>
<p>Packaging a theme is really easy.  It&#8217;s just a matter of making an archive!</p>
<p>Change to the installed themes directory and run the following:</p>
<div class="highlight-python"><pre>tar -cvfz yourtheme.tar.gz yourtheme</pre>
</div>
<p>Where &#8220;yourtheme&#8221; is replaced with your theme name.</p>
<p>That&#8217;s it!</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_docs.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Theming MediaGoblin</a><ul>
<li><a class="reference internal" href="#installing-a-theme">Installing a theme</a><ul>
<li><a class="reference internal" href="#installing-the-archive">Installing the archive</a></li>
<li><a class="reference internal" href="#set-up-your-webserver-to-serve-theme-assets">Set up your webserver to serve theme assets</a></li>
<li><a class="reference internal" href="#configuring-where-things-go">Configuring where things go</a></li>
</ul>
</li>
<li><a class="reference internal" href="#making-a-theme">Making a theme</a></li>
<li><a class="reference internal" href="#the-config-file">The config file</a><ul>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#assets">Assets</a></li>
<li><a class="reference internal" href="#licensing-file-s">Licensing file(s)</a></li>
<li><a class="reference internal" href="#a-readme-txt-file">A README.txt file</a></li>
<li><a class="reference internal" href="#simple-theming-by-adding-css">Simple theming by adding CSS</a></li>
<li><a class="reference internal" href="#packaging-it-up">Packaging it up!</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="relnotes.html"
                        title="previous chapter">Release Notes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plugins.html"
                        title="next chapter">Plugins</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/siteadmin/theming.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plugins.html" title="Plugins"
             >next</a> |</li>
        <li class="right" >
          <a href="relnotes.html" title="Release Notes"
             >previous</a> |</li>
        <li><a href="../index.html">GNU MediaGoblin 0.3.2.dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <div>

MediaGoblin documentation released into the public domain via <a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
    </div>
  </body>
</html>