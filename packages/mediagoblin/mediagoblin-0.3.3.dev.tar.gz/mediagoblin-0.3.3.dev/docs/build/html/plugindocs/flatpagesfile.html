

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>flatpagesfile plugin &mdash; GNU MediaGoblin 0.3.2.dev documentation</title>
    
    <link rel="stylesheet" href="../_static/mg.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.2.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="GNU MediaGoblin 0.3.2.dev documentation" href="../index.html" />
    <link rel="next" title="sampleplugin" href="sampleplugin.html" />
    <link rel="prev" title="Codebase Documentation" href="../siteadmin/codebase.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sampleplugin.html" title="sampleplugin"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../siteadmin/codebase.html" title="Codebase Documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">GNU MediaGoblin 0.3.2.dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="flatpagesfile-plugin">
<span id="flatpagesfile-chapter"></span><h1>flatpagesfile plugin<a class="headerlink" href="#flatpagesfile-plugin" title="Permalink to this headline">¶</a></h1>
<p>This is the flatpages file plugin. It allows you to add pages to your
MediaGoblin instance which are not generated from user content. For
example, this is useful for these pages:</p>
<ul class="simple">
<li>About this site</li>
<li>Terms of service</li>
<li>Privacy policy</li>
<li>How to get an account here</li>
<li>...</li>
</ul>
<div class="section" id="how-to-configure">
<h2>How to configure<a class="headerlink" href="#how-to-configure" title="Permalink to this headline">¶</a></h2>
<p>Add the following to your MediaGoblin .ini file in the <tt class="docutils literal"><span class="pre">[plugins]</span></tt>
section:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[[</span><span class="n">mediagoblin</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">flatpagesfile</span><span class="p">]]</span>
</pre></div>
</div>
<p>This tells MediaGoblin to load the flatpagesfile plugin. This is the
subsection that you&#8217;ll do all flatpagesfile plugin configuration in.</p>
</div>
<div class="section" id="how-to-add-pages">
<h2>How to add pages<a class="headerlink" href="#how-to-add-pages" title="Permalink to this headline">¶</a></h2>
<p>To add a new page to your site, you need to do two things:</p>
<ol class="arabic simple">
<li>add a route to the MediaGoblin .ini file in the flatpagesfile
subsection</li>
<li>write a template that will get served when that route is requested</li>
</ol>
<div class="section" id="routes">
<h3>Routes<a class="headerlink" href="#routes" title="Permalink to this headline">¶</a></h3>
<p>First, let&#8217;s talk about the route.</p>
<p>A route is a key/value in your configuration file.</p>
<p>The key for the route is the route name You can use this with <cite>url()</cite>
in templates to have MediaGoblin automatically build the urls for
you. It&#8217;s very handy.</p>
<p>It should be &#8220;unique&#8221; and it should be alphanumeric characters and
hyphens. I wouldn&#8217;t put spaces in there.</p>
<p>Examples: <tt class="docutils literal"><span class="pre">flatpages-about</span></tt>, <tt class="docutils literal"><span class="pre">about-view</span></tt>, <tt class="docutils literal"><span class="pre">contact-view</span></tt>, ...</p>
<p>The value has two parts separated by commas:</p>
<ol class="arabic">
<li><p class="first"><strong>route path</strong>: This is the url that this route matches.</p>
<p>Examples: <tt class="docutils literal"><span class="pre">/about</span></tt>, <tt class="docutils literal"><span class="pre">/contact</span></tt>, <tt class="docutils literal"><span class="pre">/pages/about</span></tt>, ...</p>
<p>You can do anything with this that you can do with the routepath
parameter of <cite>routes.Route</cite>. For more details, see <a class="reference external" href="http://routes.readthedocs.org/en/latest/">the routes
documentation</a>.</p>
<p>Example: <tt class="docutils literal"><span class="pre">/siteadmin/{adminname:\w+}</span></tt></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you&#8217;re doing something fancy, enclose the route in single
quotes.</p>
<p class="last">For example: <tt class="docutils literal"><span class="pre">'/siteadmin/{adminname:\w+}'</span></tt></p>
</div>
</li>
<li><p class="first"><strong>template</strong>: The template to use for this url. The template is in
the flatpagesfile template directory, so you just need to specify
the file name.</p>
<p>Like with other templates, if it&#8217;s an HTML file, it&#8217;s good to use
the <tt class="docutils literal"><span class="pre">.html</span></tt> extensions.</p>
<p>Examples: <tt class="docutils literal"><span class="pre">index.html</span></tt>, <tt class="docutils literal"><span class="pre">about.html</span></tt>, <tt class="docutils literal"><span class="pre">contact.html</span></tt>, ...</p>
</li>
</ol>
<p>Here&#8217;s an example configuration that adds two flat pages: one for an
&#8220;About this site&#8221; page and one for a &#8220;Terms of service&#8221; page:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[[</span><span class="n">mediagoblin</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">flatpagesfile</span><span class="p">]]</span>
<span class="n">about</span><span class="o">-</span><span class="n">view</span> <span class="o">=</span> <span class="s">&#39;/about&#39;</span><span class="p">,</span> <span class="n">about</span><span class="o">.</span><span class="n">html</span>
<span class="n">terms</span><span class="o">-</span><span class="n">view</span> <span class="o">=</span> <span class="s">&#39;/terms&#39;</span><span class="p">,</span> <span class="n">terms</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The order in which you define the routes in the config file is the
order in which they&#8217;re checked for incoming requests.</p>
</div>
</div>
<div class="section" id="templates">
<h3>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h3>
<p>To add pages, you must edit template files on the file system in your
<cite>local_templates</cite> directory.</p>
<p>The directory structure looks kind of like this:</p>
<div class="highlight-python"><pre>local_templates
|- flatpagesfile
   |- flatpage1.html
   |- flatpage2.html
   |- ...</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">.html</span></tt> file contains the content of your page. It&#8217;s just a
template like all the other templates you have.</p>
<p>Here&#8217;s an example that extends the <cite>flatpagesfile/base.html</cite>
template:</p>
<div class="highlight-python"><pre>{% extends "flatpagesfile/base.html" %}
{% block mediagoblin_content %}
&lt;h1&gt;About this site&lt;/h1&gt;
&lt;p&gt;
  This site is a MediaGoblin instance set up to host media for
  me, my family and my friends.
&lt;/p&gt;
{% endblock %}</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have a bunch of flatpages that kind of look like one
another, take advantage of Jinja2 template extending and create a
base template that the others extend.</p>
</div>
</div>
</div>
<div class="section" id="recipes">
<h2>Recipes<a class="headerlink" href="#recipes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="url-variables">
<h3>Url variables<a class="headerlink" href="#url-variables" title="Permalink to this headline">¶</a></h3>
<p>You can handle urls like <tt class="docutils literal"><span class="pre">/about/{name}</span></tt> and access the name that&#8217;s
passed in in the template.</p>
<p>Sample route:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">about</span><span class="o">-</span><span class="n">page</span> <span class="o">=</span> <span class="s">&#39;/about/{name}&#39;</span><span class="p">,</span> <span class="n">about</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>Sample template:</p>
<div class="highlight-python"><pre>{% extends "flatpagesfile/base.html" %}
{% block mediagoblin_content %}

&lt;h1&gt;About page for {{ request.matchdict['name'] }}&lt;/h1&gt;

{% endblock %}</pre>
</div>
<p>See the <a class="reference external" href="http://routes.readthedocs.org/en/latest/">the routes documentation</a> for syntax details for
the route. Values will end up in the <tt class="docutils literal"><span class="pre">request.matchdict</span></tt> dict.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_docs.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">flatpagesfile plugin</a><ul>
<li><a class="reference internal" href="#how-to-configure">How to configure</a></li>
<li><a class="reference internal" href="#how-to-add-pages">How to add pages</a><ul>
<li><a class="reference internal" href="#routes">Routes</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recipes">Recipes</a><ul>
<li><a class="reference internal" href="#url-variables">Url variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../siteadmin/codebase.html"
                        title="previous chapter">Codebase Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sampleplugin.html"
                        title="next chapter">sampleplugin</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/plugindocs/flatpagesfile.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sampleplugin.html" title="sampleplugin"
             >next</a> |</li>
        <li class="right" >
          <a href="../siteadmin/codebase.html" title="Codebase Documentation"
             >previous</a> |</li>
        <li><a href="../index.html">GNU MediaGoblin 0.3.2.dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <div>

MediaGoblin documentation released into the public domain via <a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
    </div>
  </body>
</html>