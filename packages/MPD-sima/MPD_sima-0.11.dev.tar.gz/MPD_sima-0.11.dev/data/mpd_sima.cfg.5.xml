<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [

<!--

`xsltproc -''-nonet \
          -''-param man.charmap.use.subset "0" \
          -''-param make.year.ranges "1" \
          -''-param make.single.year.ranges "1" \
          /usr/share/xml/docbook/stylesheet/nwalsh/manpages/docbook.xsl \
          manpage.xml'

A manual page <package>.<section> will be generated. You may view the
manual page with: nroff -man <package>.<section> | less'. A typical entry
in a Makefile or Makefile.am is:

DB2MAN = /usr/share/sgml/docbook/stylesheet/xsl/nwalsh/manpages/docbook.xsl
XP     = xsltproc -''-nonet -''-param man.charmap.use.subset "0"

manpage.1: manpage.xml
        $(XP) $(DB2MAN) $<

The xsltproc binary is found in the xsltproc package. The XSL files are in
docbook-xsl. A description of the parameters you can use can be found in the
docbook-xsl-doc-* packages. Please remember that if you create the nroff
version in one of the debian/rules file targets (such as build), you will need
to include xsltproc and docbook-xsl in your Build-Depends control field.
Alternatively use the xmlto command/package. That will also automatically
pull in xsltproc and docbook-xsl.

Notes for using docbook2x: docbook2x-man does not automatically create the
AUTHOR(S) and COPYRIGHT sections. In this case, please add them manually as
<refsect1> ... </refsect1>.

To disable the automatic creation of the AUTHOR(S) and COPYRIGHT sections
read /usr/share/doc/docbook-xsl/doc/manpages/authors.html. This file can be
found in the docbook-xsl-doc-html package.

Validation can be done using: `xmllint -''-noout -''-valid manpage.xml`

General documentation about man-pages and man-page-formatting:
man(1), man(7), http://www.tldp.org/HOWTO/Man-Page/

-->
  <!ENTITY dhsection   "5">
  <!-- TITLE should be something like "User commands" or similar (see
       http://www.tldp.org/HOWTO/Man-Page/q2.html). -->
  <!ENTITY dhfirstname "Jack">
  <!ENTITY dhsurname   "Kaliko">
  <!ENTITY dhemail     "efrim@azylum.org">
  <!-- username could also be set to "&firstname; &surname;".  -->
  <!ENTITY dhusername  "&dhfirstname; &dhsurname;">

  <!ENTITY dhucpackage "mpd-sima">
  <!ENTITY dhpackage "mpd-sima">
  <!ENTITY dhutils "mpd-sima.cfg">
  <!ENTITY release   "0.10.0">
  <!ENTITY projecturl "http://codingteam.net/project/sima">
  <!ENTITY dhtitle     "&dhpackage; User Manual">
  <!ENTITY dhucpackage "#UCPACKAGE#">

  <!ENTITY header SYSTEM "header.xml">
  <!ENTITY feedback_bugs SYSTEM "feedback_bugs.xml">
  <!ENTITY album SYSTEM "album.cfg">
]>

<refentry>
    &header;
    <refnamediv>
        <refname>&dhutils;</refname> <!-- refname is also used to name the output manual file -->
        <refpurpose>&dhpackage; will try to maintain some titles ahead in your play
            list following different policies. This manual document the
            configuration file for &dhpackage;.</refpurpose>
    </refnamediv>
    <refsect1 id="description">
        <title>DESCRIPTION</title>
        <para>This manual page documents briefly <command>&dhpackage;</command>
            configuration options available in user configuration file
            (see <xref linkend="files"/>).</para>
    </refsect1>
    <refsect1 id="options">
        <title>Configuration file</title>
        <para>The configuration file consists of sections, led by a
            <command>[section]</command> header and followed by <option>name: value</option>
            entries, with continuations in the style of RFC 822 (see section
            3.1.1, “LONG HEADER FIELDS”); <option>name=value</option> is also accepted. Lines
            beginning with <parameter>'#'</parameter> or <parameter>';'</parameter>
            are ignored and may be used to provide comments (<emphasis>Nota
            Bene:</emphasis> inline comment are not possible).</para>
        <title>OPTIONS</title>
        <para>The default values are used in the options lists below.</para>
        <refsect2 id="MPD">
            <title>MPD section</title>
            <para>This section is meant to configure MPD access, MPD host
                address / port and password if necessary.</para>
            <variablelist>
                <!-- Use the variablelist.term.separator and the
                variablelist.term.break.after parameters to
                control the term elements. -->
                <varlistentry> <!-- MPD -->
                    <term><option>[MPD]</option></term>
                    <listitem></listitem>
                </varlistentry>
                <varlistentry> <!-- MPD.host -->
                    <term><option>host=</option><replaceable>localhost</replaceable></term>
                    <listitem>
                        <para>Set MPD host. Use IP or FQDN.</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- MPD.port -->
                    <term><option>port=</option><replaceable>6600</replaceable></term>
                    <listitem>
                        <para>Set host port to access MPD to.</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- MPD.password -->
                    <term><option>password=</option><replaceable>s3cr3t</replaceable></term>
                    <listitem>
                        <para>Set MPD password to use. Do not use this option
                            if you don't have enabled password protected access
                            on your MPD server.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>
        <refsect2 id="log">
            <para>Configure logging.</para>
            <title>log section</title>
            <variablelist>
                <varlistentry> <!-- LOG -->
                    <term><option>[log]</option></term>
                    <listitem><para></para></listitem>
                </varlistentry>
                <varlistentry> <!-- log.verbosity -->
                    <term><option>verbosity=</option><replaceable>info</replaceable></term>
                    <listitem>
                        <para>Logging verbosity among
                            <replaceable>debug</replaceable>,
                            <replaceable>info</replaceable>,
                            <replaceable>warning</replaceable>,
                            <replaceable>error</replaceable>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>
        <refsect2 id="sima">
            <title>sima section</title>
            <para>This section allows you to tweak &dhucpackage; behaviour such
                as how many tracks to add and/or what queue mode you want
                <abbrev>etc.</abbrev>.</para>
            <variablelist>
                <varlistentry> <!-- SIMA -->
                    <term><option>[sima]</option></term>
                    <listitem><para></para></listitem>
                </varlistentry>
                <varlistentry> <!-- sima.queue_mode -->
                    <term><option>queue_mode=</option><replaceable>track</replaceable></term>
                    <listitem>
                        <para>Queue mode to use among
                            <replaceable>track</replaceable>,
                            <replaceable>top</replaceable> and
                            <replaceable>album</replaceable> (see <xref linkend="queue_mode"/> for info about queue modes).</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.similarity -->
                    <term><option>similarity=</option><replaceable>15</replaceable></term>
                    <listitem>
                        <para>Similarity value as a percentage, use to filter similar artists results.<sbr />
                            The value of <option>similarity</option> is used to filter similar artists list from database (last.fm and user db).</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.dynamic -->
                    <term><option>dynamic=</option><replaceable>10</replaceable></term>
                    <listitem>
                        <para>Dynamic value as an integer. Sets how many similar artists to retrieve from local music library.<sbr />
                            &dhpackage; will try to gather at most <option>dynamic</option> artists from local media library at least <option>similarity</option>% similar.<sbr />
                            If <option>dynamic</option> is zero, then &dhpackage; gathers all artists from similar artists list also present in local library and at least <option>similarity</option>% similar.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.user_db -->
                    <term><option>user_db=</option><replaceable>false</replaceable></term>
                    <listitem>
                        <para>Look for user defined similarities in user data base.</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.history_duration -->
                    <term><option>history_duration=</option><replaceable>8</replaceable></term>
                    <listitem>
                        <para>How far to look back in history to avoid to play twice the same track/title (duration in hours).</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.consume -->
                    <term><option>consume=</option><replaceable>0</replaceable></term>
                    <listitem>
                        <para>How many played tracks to keep in the play list.
                            Allow to maintain a fixed length play list.
                            Set to 0 to keep all played tracks.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.single_album -->
                    <term><option>single_album=</option><replaceable>false</replaceable></term>
                    <listitem>
                        <para>Prevent from queueing a track from the same album
                            (it often happens with OST).<sbr />
                            Only relevant in "track" queue mode.</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.check_new_version -->
                    <term><option>check_new_version=</option><replaceable>false</replaceable></term>
                    <listitem>
                        <para>Checks the forge for new version of MPD_sima.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
            <para>The following options are still part of <option>sima</option>
                section but you usually do not need to change them.</para>
            <variablelist>
                <varlistentry> <!-- sima.queue_length -->
                    <term><option>queue_length=</option><replaceable>1</replaceable></term>
                    <listitem>
                        <para>This value triggers queue process if the play
                            list length is less than specified
                            queue_length.</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.track_to_add -->
                    <term><option>track_to_add=</option><replaceable>1</replaceable></term>
                    <listitem>
                        <para>How many track(s) to add. Only relevant in
                            <option>top</option> and <option>track</option>
                            queue modes.</para>
                    </listitem>
                </varlistentry>
                <varlistentry> <!-- sima.album_to_add -->
                    <term><option>album_to_add=</option><replaceable>1</replaceable></term>
                    <listitem>
                        <para>How many album(s) to add. Only relevant in
                            <option>album</option> queue modes.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </refsect2>
    </refsect1>
    <refsect1 id="queue_mode">
        <title>QUEUE MODES</title>
        <para>&dhpackage; offers different queue modes. All of them pick up
            tracks from artists similar to the one currently played.</para>
        <para>&dhpackage; tries preferably to chose among unplayed artists or
            at least not recently played artist. Concerning track and album
            queue modes titles are chosen purely at random among unplayed
            tracks.</para>
        <variablelist>
            <varlistentry>
                <term><option>track</option></term>
                <listitem>
                    <para>Queue a similar track chosen at random from a similar artist.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><option>top</option></term>
                <listitem>
                    <para>Queue a track from a similar artist, chosen among
                        "top tracks" according to last.fm data mining.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><option>album</option></term>
                <listitem>
                    <para>Queue a whole album chosen at random from a similar artist.</para>
                    <para><emphasis>Nota Bene:</emphasis><sbr /> Due to the
                        track point of view of database build upon tracks tags
                        an album lookup for a specific artist will return
                        albums as soon as this artist appears in a single track
                        of the album.<sbr />
                        For instance looking for album from "The Velvet
                        Underground" will fetch "Last Days" and "Juno" OSTs
                        because the band appears on the soundtrack of these two
                        movies.<sbr />
                        A solution is for you to set AlbumArtists tag to
                        something different than the actual artist of the
                        track. For compilations, OSTs etc. a strong convention
                        is to use "Various Artists" for this tag.</para>
                    <para>&dhpackage; is currently looking for AlbumArtists tags
                        and avoid album where this tag is set with "Various
                        Artists". If a single track within an album is found
                        with AlbumArtists:"Various Artists" the complete album
                        is skipped and won't be queued.<sbr />
                        It is planned to allow users to set the values of
                        AlbumArtists tag triggering this behaviour.  cf.
                        feature request #2085 on the tracker.</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </refsect1>
    <refsect1 id="files">
        <title>FILES</title>
        <para>Unless you override it &dhpackage; will try to read the
            configuration file name <filename>mpd_sima.cfg</filename> in the
            standard location within <envar>XDG_CONFIG_HOME</envar>.</para>
        <variablelist>
            <varlistentry>
                <term><filename>${XDG_CONFIG_HOME}/mpd_sima/mpd_sima.cfg</filename></term>
                <listitem>
                    <para>The per-user configuration file. Usually
                        <envar>XDG_CONFIG_HOME</envar> is set to
                        <filename>${HOME}/.config</filename>.</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </refsect1>
    <refsect1 id="examples">
        <title>EXAMPLES</title>
        <!--
        <refsect2 id="track">
            <title>Default queue mode, similar artist.</title>
            <para></para>
            <para></para>
        </refsect2> -->
        <refsect2 id="album">
            <title>Album queue mode.</title>
            <para>Here is an example of album queue configuration.</para>
            <programlisting>&album;</programlisting>
        </refsect2>
    </refsect1>
    &feedback_bugs;
    <refsect1 id="see_also">
        <title>SEE ALSO</title>
        <!-- In alpabetical order. -->
        <para><citerefentry>
                <refentrytitle>mpd-sima</refentrytitle>
                <manvolnum>1</manvolnum>
                </citerefentry>, <citerefentry>
                <refentrytitle>simadb_cli</refentrytitle>
                <manvolnum>1</manvolnum>
        </citerefentry></para>
        <para>
            <filename>/usr/share/doc/mpd-sima/</filename>
        </para>
    </refsect1>
</refentry>

