import gtk

from kiwi.ui.objectlist import Column, ObjectList
from stoqlib.lib.message import marker
from stoqlib.lib.uptime import set_initial

class Fruit:
    def __init__(self, name, price):
        self.name = name
        self.price = price

fruits_list = ObjectList([Column('name', data_type=str),
                     Column('price', data_type=int)])

set_initial()
fruits = []
marker('Creating list')
for i in xrange(50000):
    for name, price in [('Apple', 4),
                        ('Pineapple', 2),
                        ('Kiwi', 8),
                        ('Banana', 3),
                        ('Melon', 5)]:
        fruits.append(Fruit(name, price))
marker('List Created')

fruits_list.add_list(fruits)
marker('List appended')

window = gtk.Window()
window.connect('delete-event', gtk.main_quit)
window.set_title('Fruits')
window.set_size_request(150, 180)

window.add(fruits_list)
window.show_all()

gtk.main()
