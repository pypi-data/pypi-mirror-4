<div class="form" tal:define="title view/title | context/i18n:title | nothing" i18n:domain="ztfy.blog">
	<h1 tal:condition="title"><span class="light">::</span>&nbsp;&nbsp;<span tal:content="title" i18n:translate="" />&nbsp;&nbsp;<span class="light">::</span></h1>
	<fieldset>
		<legend tal:condition="view/legend | nothing" tal:content="view/legend" i18n:translate="" />
		<tal:var content="structure view/renderTable" />
		<div tal:condition="not:view/rows">
			<div class="help" i18n:translate="">This container is empty.</div>
		</div>
	</fieldset>
	<script type="text/javascript">
		// <![CDATA[
		$(document).ready(function() {
			$('TABLE.treeview').treeTable({
				treeColumn: 1,
				initialState: 'expanded'
			});
			$('TABLE.treeview TR.section TD.title, TABLE.treeview TR.topic TD.title').draggable({
				helper: 'clone',
				opacity: .75,
				revert: 'invalid',
				revertDuration: 300,
				scroll: true,
				containment: 'TABLE.treeview'
			});
			$('TABLE.treeview TR.site').droppable({
				accept: 'TR.section TD.title',
				hoverClass: 'accept',
				over: function(event,ui) {
					if(this.id != $(ui.draggable.parents("TR")[0]).id && !$(this).is(".expanded")) {
						$(this).expand();
					}
				},
				drop: $.ZTFY.treeview.changeParent
			});
			$('TABLE.treeview TR.section').droppable({
				accept: 'TR.section TD.title, TR.topic TD.title',
				hoverClass: 'accept',
				over: function(event,ui) {
					if(this.id != $(ui.draggable.parents("TR")[0]).id && !$(this).is(".expanded")) {
						$(this).expand();
					}
				},
				drop: $.ZTFY.treeview.changeParent
			});
		});
		// ]]>
	</script>
</div>