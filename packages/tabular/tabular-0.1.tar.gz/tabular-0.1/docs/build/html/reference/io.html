

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Input and Output &mdash; tabular v0.0.8 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="tabular v0.0.8 documentation" href="../index.html" />
    <link rel="next" title="Manipulating Tabular Arrays" href="operations.html" />
    <link rel="prev" title="Creating Tabular Arrays" href="construction.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="operations.html" title="Manipulating Tabular Arrays"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="construction.html" title="Creating Tabular Arrays"
             accesskey="P">previous</a> |</li>
    
        <li><a href="../index.html">tabular</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="input-and-output">
<span id="io"></span><h1>Input and Output<a class="headerlink" href="#input-and-output" title="Permalink to this headline">¶</a></h1>
<p>The <strong>tabular</strong> package supports reading and writing to three file formats:  delimited text files and numpy binary files.</p>
<p>Delimited text files are a very common format for storing tabular data.  In this format, each record of a tabular dataset is saved as a separate line, and values in each field are separated within lines by some chosen delimiter character(s).   The ubiquitous Comma-Separated Value files (CSVs) are delimited text in which the delimiter is the comma character, &#8216;,&#8217;.    Delimited text files are easy to use, and are essentially human-readable/-writeable,  but may not be especially efficient in terms of memory.</p>
<p>Binary files are more efficient than text files.   However, because the efficiency of binary representations is achieved by using special encodings to compress the data, they are tricky to read and write and are highly  dependent on the details of the data structure being represented.  NumPy has its own binary format for storing record arrays.</p>
<p>Files in each of these formats can be read into a tabarray by using the appropriate keyword to specify the file&#8217;s path to the tabarray constructor: &#8216;SVfile&#8217; for delimited text files and &#8216;binary&#8217; for NumPy binary files.   Tabarrays also come with methods to write out files to each of the formats &#8211; &#8216;saveSV&#8217; and &#8216;savebinary&#8217;.    Details on the use of all these are given below.</p>
<div class="section" id="delimited-text-files">
<span id="text-file-io"></span><h2>Delimited Text Files<a class="headerlink" href="#delimited-text-files" title="Permalink to this headline">¶</a></h2>
<p>To load a delimited text file into a tabarray, give the tabarray constructor the file&#8217;s path as the <cite>SVfile</cite> keyword argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;INPUT_FILE_PATH&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(&#8220;SVfile&#8221; is short for &#8220;separated variable file&#8221;, a synonym for &#8220;delimited text&#8221; by analogy with &#8220;comma separated variable&#8221; file.)    This constructor is wrapping the <a class="reference internal" href="../modules/tabular.io.html#tabular.io.loadSV" title="tabular.io.loadSV"><tt class="xref py py-func docutils literal"><span class="pre">tabular.io.loadSV()</span></tt></a> function, which can be used with NumPy record arrays.</p>
<p>To save a tabarray to a delimited text file, use the &#8216;saveSV&#8217; method with the output file path as the argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="o">.</span><span class="n">saveSV</span><span class="p">(</span><span class="s">&#39;OUTPUT_FILE_PATH&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This method is a wrapper for the <a class="reference internal" href="../modules/tabular.io.html#tabular.io.saveSV" title="tabular.io.saveSV"><tt class="xref py py-func docutils literal"><span class="pre">tabular.io.saveSV()</span></tt></a> function, which can also be used with NumPy record arrays.</p>
<p>Since tabular data files come in many flavors &#8211; with different delimiters, line terminators, escaping conventions, header notation formats, &amp;c &#8211;   <strong>tabarray</strong> provides a variety of additional parameters that can be used to control the loading and writing of delimited text files.     The tabarray constructor also has routines for inferring the formatting parameters from the file, so for many typical delimited text files, setting these parameters may be unnecessary.</p>
<p>Tabular&#8217;s loadSV and saveSV functions are somewhat analogous to NumPy&#8217;s loadtxt and savetxt function, but do not share any code with them.   The two main differences are that (i) the tabarray methods have inference routines to allow users to avoid having to set formatting parameters (though inference can overridden by setting parameters if desired), while the NumPy functions require the user to always be explicit about formatting, and (ii) the tabarray methods use Python&#8217;s built-in highly-optimized CSV reader/writer to do the actual reading/reading, while the NumPy functions do not.</p>
<div class="section" id="basic-examples">
<h3>Basic Examples<a class="headerlink" href="#basic-examples" title="Permalink to this headline">¶</a></h3>
<p>Example 1.1  Copy the five tab-delimited lines below into a text file, <tt class="docutils literal"><span class="pre">example.txt</span></tt>:</p>
<div class="highlight-python"><pre>name    ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Import tabular:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tabular</span> <span class="kn">as</span> <span class="nn">tb</span>
</pre></div>
</div>
<p>To load this data <tt class="docutils literal"><span class="pre">example.tsv</span></tt> into a tabarray:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;example.txt&#39;</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">tabarray([(&#39;bork&#39;, 1212, &#39;blue&#39;, &#39;big&#39;, 45.32, 46.07),</span>
<span class="go">       (&#39;mork&#39;, 4660, &#39;green&#39;, &#39;small&#39;, 32.18, 32.75),</span>
<span class="go">       (&#39;stork&#39;, 2219, &#39;red&#39;, &#39;huge&#39;, 60.93, 61.82),</span>
<span class="go">       (&#39;lork&#39;, 4488, &#39;purple&#39;, &#39;tiny&#39;, 0.44, 0.38)],</span>
<span class="go">      dtype=[(&#39;name&#39;, &#39;|S5&#39;), (&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;color&#39;, &#39;|S6&#39;), (&#39;size&#39;, &#39;|S5&#39;), (&#39;June&#39;, &#39;&lt;f8&#39;), (&#39;July&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>Notice that <strong>the data type of each column and the file delimiter are inferred</strong>, and the first line of the file is treated as a list of column names.</p>
<p>Example 1.2   To save this file to a comma-separated value file, do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">saveSV</span><span class="p">(</span><span class="s">&#39;example_copy.csv&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
<span class="go">Using delimiter  &#39;,&#39;</span>
</pre></div>
</div>
<p>Now read this file in, and compare to the original:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;example_copy.csv&#39;</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;,&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="formatting-parameters">
<h3>Formatting Parameters<a class="headerlink" href="#formatting-parameters" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../modules/tabular.io.html#tabular.io.loadSV" title="tabular.io.loadSV"><tt class="xref py py-func docutils literal"><span class="pre">tabular.io.loadSV()</span></tt></a>  and <a class="reference internal" href="../modules/tabular.io.html#tabular.io.saveSV" title="tabular.io.saveSV"><tt class="xref py py-func docutils literal"><span class="pre">tabular.io.saveSV()</span></tt></a> use the  <a class="reference external" href="http://docs.python.org/library/csv.html">python csv module</a> to do the actual reading/writing of csvs.   This module accepts a number of formatting paramters, and the interface to these parameters is duplicated in tabarray.</p>
<p><strong>delimiter:</strong> The most important formatting parameter is the &#8220;delimiter&#8221; parameter, which can be used both in loading and saving tabarrays.</p>
<p>Example 2.1   Copy the following to a file <tt class="docutils literal"><span class="pre">example2.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">name</span><span class="o">|</span><span class="n">ID</span><span class="o">|</span><span class="n">color</span><span class="o">|</span><span class="n">size</span><span class="o">|</span><span class="n">June</span><span class="o">|</span><span class="n">July</span>
<span class="n">bork</span><span class="o">|</span><span class="mi">1212</span><span class="o">|</span><span class="n">blue</span><span class="o">|</span><span class="n">big</span><span class="o">|</span><span class="mf">45.32</span><span class="o">|</span><span class="mf">46.07</span>
<span class="n">mork</span><span class="o">|</span><span class="mi">4660</span><span class="o">|</span><span class="n">green</span><span class="o">|</span><span class="n">small</span><span class="o">|</span><span class="mf">32.18</span><span class="o">|</span><span class="mf">32.75</span>
<span class="n">stork</span><span class="o">|</span><span class="mi">2219</span><span class="o">|</span><span class="n">red</span><span class="o">|</span><span class="n">huge</span><span class="o">|</span><span class="mf">60.93</span><span class="o">|</span><span class="mf">61.82</span>
<span class="n">lork</span><span class="o">|</span><span class="mi">4488</span><span class="o">|</span><span class="n">purple</span><span class="o">|</span><span class="n">tiny</span><span class="o">|</span><span class="mf">0.44</span><span class="o">|</span><span class="mf">0.38</span>
</pre></div>
</div>
<p>To ensure that the &#8216;|&#8217; is used in loading <tt class="docutils literal"><span class="pre">example2.txt</span></tt>, do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;example2.txt&#39;</span><span class="p">,</span><span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39;|&#39;</span><span class="p">)</span>
<span class="go">Setting dialect attribute delimiter to equal specified valued: |</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">tabarray([(&#39;bork&#39;, 1212, &#39;blue&#39;, &#39;big&#39;, 45.32, 46.07),</span>
<span class="go">       (&#39;mork&#39;, 4660, &#39;green&#39;, &#39;small&#39;, 32.18, 32.75),</span>
<span class="go">       (&#39;stork&#39;, 2219, &#39;red&#39;, &#39;huge&#39;, 60.93, 61.82),</span>
<span class="go">       (&#39;lork&#39;, 4488, &#39;purple&#39;, &#39;tiny&#39;, 0.44, 0.38)],</span>
<span class="go">      dtype=[(&#39;name&#39;, &#39;|S5&#39;), (&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;color&#39;, &#39;|S6&#39;), (&#39;size&#39;, &#39;|S5&#39;), (&#39;June&#39;, &#39;&lt;f8&#39;), (&#39;July&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>Example 2.2   To use, say, the &#8216;&amp;&#8217; character as the delimiter when save out, do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">saveSV</span><span class="p">(</span><span class="s">&#39;example2_copy.txt&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;&amp;&#39;</span><span class="p">)</span>
<span class="go">Using delimiter  &#39;&amp;&#39;</span>
</pre></div>
</div>
<p>NOTE: the delimiter MUST be a one-character string.</p>
<p><strong>lineterminator:</strong> The &#8220;lineterminator&#8221; parameter controls the character used to denote line breaks.   The default setting is &#8220;n&#8221;.   NOTE:  when reading in a file, the loadSV function uses the &#8220;universal&#8221; option to the python open function (read about the &#8216;rU&#8217; option to <a class="reference external" href="http://docs.python.org/library/functions.html#open">open</a>).   Therefore, even if a file has the &#8216;rn&#8217; line break used on Windows platforms, the default &#8220;n&#8221; line terminator still works.</p>
<p><strong>quotechar:</strong>   When the chosen delimiter appears in an entry of a tabular data file, the Python CSV writer appends a quote character at the beginning and end of the entry to avoid ambiguities.   Similarly, the Python CSV module strips these quotes  when reading back in.</p>
<p>Example 2.3   For instance, copy this data to the file <tt class="docutils literal"><span class="pre">example3.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">name</span><span class="p">,</span><span class="n">ID</span><span class="p">,</span><span class="n">color</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">June</span><span class="p">,</span><span class="n">July</span>
<span class="s">&quot;bork,stork&quot;</span><span class="p">,</span><span class="mi">1212</span><span class="p">,</span><span class="n">blue</span><span class="p">,</span><span class="n">big</span><span class="p">,</span><span class="mf">45.32</span><span class="p">,</span><span class="mf">46.07</span>
<span class="n">mork</span><span class="p">,</span><span class="mi">4660</span><span class="p">,</span><span class="n">green</span><span class="p">,</span><span class="s">&quot;small,tiny&quot;</span><span class="p">,</span><span class="mf">32.18</span><span class="p">,</span><span class="mf">32.75</span>
<span class="n">stork</span><span class="p">,</span><span class="mi">2219</span><span class="p">,</span><span class="n">red</span><span class="p">,</span><span class="s">&quot;huge,enormous&quot;</span><span class="p">,</span><span class="mf">60.93</span><span class="p">,</span><span class="mf">61.82</span>
<span class="n">lork</span><span class="p">,</span><span class="mi">4488</span><span class="p">,</span><span class="n">purple</span><span class="p">,</span><span class="s">&quot;small,tiny&quot;</span><span class="p">,</span><span class="mf">0.44</span><span class="p">,</span><span class="mf">0.38</span>
</pre></div>
</div>
<p>This file is read in correctly, and the quotes are stripped:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;example3.txt&#39;</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;,&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="s">&#39;size&#39;</span><span class="p">]</span>
<span class="go">tabarray([&#39;big&#39;, &#39;small,tiny&#39;, &#39;huge,enormous&#39;, &#39;small,tiny&#39;],</span>
<span class="go">      dtype=&#39;|S13&#39;)</span>
</pre></div>
</div>
<p>Example 2.4    When writing out a tabarray that needs quoting, the saveSV function produces a warning, since quoting slows down the writing operation.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">saveSV</span><span class="p">(</span><span class="s">&#39;example3_copy.txt&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
<span class="go">Using delimiter  &#39;,&#39;</span>
<span class="go">WARNING: An entry in the &#39;name&#39; column contains at least one instance of the delimiter &#39;,&#39; and therefore will use the Python csv module quoting convention (see online documentation for Python&#39;s csv module).  You may want to choose another delimiter not appearing in records, for performance reasons.</span>
</pre></div>
</div>
<p>The default value of <cite>quotechar</cite> is the doublequote character, but can be set using the <cite>quotechar</cite> parameter.</p>
<p><strong>doublequote, escapechar,</strong> and <strong>quoting:</strong> Of course, if a file needs quoting, AND the quotechar itself appears in a an entry of the file, there is again an ambiguity.   This ambiguity is handled by the <cite>doublequote</cite> parameter, which when set True doubles all instances of the quotechar that are actually in the data, and the <cite>escapechar</cite> parameter, which can be used in liue of doublequoting to escape real instances of the quotechar.    The <cite>quoting</cite> parameter  sets an overall quoting policy, e.g. whether <cite>all</cite> entries should be quoted, or only the minimal number neccessary to prevent ambiguity &amp;c.   You can read more about these parameters on the <a class="reference external" href="http://docs.python.org/library/csv.html">python csv module site</a>.</p>
<p><strong>skipinitialspace:</strong>  Sometimes, delimited data comes with white space after the delimiter, and this white space should not be included in the data itself.   To strip initial whitespace, set the <cite>skipinitialspace</cite> parameter to True (the default is False).</p>
<p><strong>dialect:</strong> loadSV also accepts a <cite>dialect</cite> keyword argument, which allows you to give a <cite>csv.dialect</cite> object as used in the Python csv module.</p>
</div>
<div class="section" id="delimiter-datatype-and-header-inference">
<h3>Delimiter, Datatype and Header Inference<a class="headerlink" href="#delimiter-datatype-and-header-inference" title="Permalink to this headline">¶</a></h3>
<p>The loadSV function has several inference routines to guess the format of your data.</p>
<p><strong>Delimiter Inference:</strong> Unless the delimiter is explicitly specified (either directly, through the <cite>dialect</cite> parameter, or from file metadata),  loadSV infers the delimiter based on the file contents.   It does this first by trying an improved version of Python&#8217;s  <a class="reference external" href="http://docs.python.org/library/csv.html#csv.Sniffer">csv sniffer</a> algorithm; if that fails to determine a delimiter, the delimiter is set based on the file extension (&#8216;csv&#8217; defaults to comma delimiter, and everything else to tab delimiter).</p>
<p><strong>Datatype Inference:</strong> By default, the loadSV function uses the datatype inference function <tt class="xref py py-func docutils literal"><span class="pre">tabular.io.typeinfer()</span></tt>, just as is used when constructing a tabarray from python lists of columns or records.   Just as you can in that situation, you can override the inference of data types by specifying a NumPy-style &#8220;formats&#8221; argument or  &#8220;dtype&#8221; argument explicitly.</p>
<p><strong>Header Inference:</strong>  Many delimited text files contain metadata about the file in one or more header lines at the top of the file, before the actual data lines begin.   The loadSV function has several mechanisms for specifying and inferring the header lines of a file.</p>
<p>By default, loadSV will assume that the first line of a file contains the column names.  This behavior is controlled bythe <cite>namesinheader</cite> parameter, which can be either True or False (it is True by defulat).</p>
<p>Example 3.1    For example, save this data to the file &#8216;nonames.txt&#8217;:</p>
<div class="highlight-python"><pre>bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;nonames.txt&#39;</span><span class="p">,</span> <span class="n">namesinheader</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">tabarray([(&#39;bork&#39;, 1212, &#39;blue&#39;, &#39;big&#39;, 45.32, 46.07),</span>
<span class="go">       (&#39;mork&#39;, 4660, &#39;green&#39;, &#39;small&#39;, 32.18, 32.75),</span>
<span class="go">       (&#39;stork&#39;, 2219, &#39;red&#39;, &#39;huge&#39;, 60.93, 61.82),</span>
<span class="go">       (&#39;lork&#39;, 4488, &#39;purple&#39;, &#39;tiny&#39;, 0.44, 0.38)],</span>
<span class="go">      dtype=[(&#39;f0&#39;, &#39;|S5&#39;), (&#39;f1&#39;, &#39;&lt;i4&#39;), (&#39;f2&#39;, &#39;|S6&#39;), (&#39;f3&#39;, &#39;|S5&#39;), (&#39;f4&#39;, &#39;&lt;f8&#39;), (&#39;f5&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>Notice that the columns of the tabarray are automatically given names (consistent with the numpy convention).</p>
<p>Multiple header lines can be denoted with a <cite>comments</cite> character.  By default, a hash mark (<tt class="docutils literal"><span class="pre">#</span></tt>) at the begining of the file is automatically recognized as a comments character, indicating the header of the file, and is automatically parsed out.</p>
<p>Example 3.2   Save this data to the file <tt class="docutils literal"><span class="pre">hash.txt</span></tt>:</p>
<div class="highlight-python"><pre>#name   ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;hash.txt&#39;</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
<span class="go">(&#39;name&#39;, &#39;ID&#39;, &#39;color&#39;, &#39;size&#39;, &#39;June&#39;, &#39;July&#39;)</span>
</pre></div>
</div>
<p>You can specify an arbitrary comments character by setting <cite>comments</cite>.</p>
<p>Example 3.3   Save this data <tt class="docutils literal"><span class="pre">comments.txt</span></tt>:</p>
<div class="highlight-python"><pre>@name   ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;comments.txt&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s">&#39;@&#39;</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>When multiple lines beginning the with comments character are present, all header lines are removed and the column names are assumed to be in the last line of the header.</p>
<p>Example 3.4    Save this file to <tt class="docutils literal"><span class="pre">verbose.txt</span></tt>:</p>
<div class="highlight-python"><pre>@this is my file
@these are my verbose notes
@blah blah blah
@name   ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;verbose.txt&#39;</span><span class="p">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&#39;@&#39;</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 4 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">tabarray([(&#39;bork&#39;, 1212, &#39;blue&#39;, &#39;big&#39;, 45.32, 46.07),</span>
<span class="go">       (&#39;mork&#39;, 4660, &#39;green&#39;, &#39;small&#39;, 32.18, 32.75),</span>
<span class="go">       (&#39;stork&#39;, 2219, &#39;red&#39;, &#39;huge&#39;, 60.93, 61.82),</span>
<span class="go">       (&#39;lork&#39;, 4488, &#39;purple&#39;, &#39;tiny&#39;, 0.44, 0.38)],</span>
<span class="go">      dtype=[(&#39;name&#39;, &#39;|S5&#39;), (&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;color&#39;, &#39;|S6&#39;), (&#39;size&#39;, &#39;|S5&#39;), (&#39;June&#39;, &#39;&lt;f8&#39;), (&#39;July&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>If there is no comments character but there are multiple header lines, you can specify the number of header lines.</p>
<p>Example 3.5    Copy these lines to a text file called &#8216;nohash.tsv&#8217;:</p>
<div class="highlight-python"><pre>this is my file
name    ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;nohash.txt&#39;</span><span class="p">,</span> <span class="n">headerlines</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 2 ).</span>
</pre></div>
</div>
</div>
<div class="section" id="structured-metadata">
<h3>Structured Metadata<a class="headerlink" href="#structured-metadata" title="Permalink to this headline">¶</a></h3>
<p>With a little special formatting, you can explicitly indicate lines in the header that provide names, types, and coloring metadata.  You can use the :func:<a class="reference internal" href="../modules/tabular.tab.html#tabular.tab.tabarray.saveSV" title="tabular.tab.tabarray.saveSV"><tt class="xref py py-func docutils literal"><span class="pre">tabular.tab.tabarray.saveSV()</span></tt></a> method to generate this format.  This relies on a special line in the header that begins with &#8216;metametadata=&#8217; followed by a string representation of a dictionary mapping metadata keys to line numbers within the header starting at 0).</p>
<p>At the moment, there are five recognized metadata keys that:</p>
<ul class="simple">
<li>&#8216;names&#8217;:  the column names</li>
<li>&#8216;types&#8217;:  the python names of the datatypes of the columns</li>
<li>&#8216;formats&#8217;: the numpy names of the datatypes of columns</li>
<li>&#8216;dialect&#8217;: a list of csv-module <cite>dialect</cite> formatting parameters</li>
<li>&#8216;coloring&#8217;: the coloring attribute</li>
</ul>
<p>Example 4.1  Explicitly designate that line 1 has column names.  Save this file to &#8220;meta_names.txt&#8217;:</p>
<div class="highlight-python"><pre>metametadata={'names': 1}
name    ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;meta_names.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
<span class="go">(name,ID,color,size,June,July)</span>
</pre></div>
</div>
<p>Example 4.2  Explicitly designate that line 3 contains the column names.    Save these lines to &#8216;meta_nohash.txt&#8217;:</p>
<div class="highlight-python"><pre>metametadata={'names': 3}
these are my verbose notes
blah blah blah
name    ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;meta_nohash.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example 4.3  The <tt class="docutils literal"><span class="pre">metametadata=</span></tt> line can be anywhere in the header if there is a comments character.  Save these lines to &#8216;meta_random.txt&#8217;:</p>
<div class="highlight-python"><pre>#this is my file
#metametadata={'names': 2}
#name   ID      color   size    June    July
#not sure why there are more notes here
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;meta_random.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example 4.4  Include various kinds of metadata.  Save these lines to &#8216;meta_all.txt&#8217;:</p>
<div class="highlight-python"><pre>metametadata={'names': 4, 'types': 3,'coloring':1,'dialect':2}
{'months':['June','July'],'features':['color','size']}
{'delimiter':'\t','skipinitialspace':False}
str     float   str     str     float   float
name    ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;meta_all.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that the &#8216;ID&#8217; column is loaded as a float as opposed to the inferred datatype which would be int.</p>
<p>Example 4.5  You don&#8217;t have to have a <tt class="docutils literal"><span class="pre">metametadata=</span></tt> line in your file to take advantage of special metadata in the file; instead you can supply the <cite>metametadata</cite> directly.  Save these lines to file &#8216;meta_types1.txt&#8221;:</p>
<div class="highlight-python"><pre>str     int     str     str     float   float
name    ID      color   size    June    July
bork    1212    blue    big     45.32   46.07
mork    4660    green   small   32.18   32.75
stork   2219    red     huge    60.93   61.82
lork    4488    purple  tiny    0.44    0.38</pre>
</div>
<p>Load with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;meta_types1.txt&#39;</span><span class="p">,</span> <span class="n">metametadata</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;names&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;types&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
</pre></div>
</div>
<p>When using  saveSV, you can use the &#8220;metadata&#8221; keyword to control how special-format metadata is written out.</p>
<p>Example 4.6   Let&#8217;s go back to the first example from above, form the file &#8220;example.txt&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;example.txt&#39;</span><span class="p">)</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">tabarray([(&#39;bork&#39;, 1212, &#39;blue&#39;, &#39;big&#39;, 45.32, 46.07),</span>
<span class="go">        (&#39;mork&#39;, 4660, &#39;green&#39;, &#39;small&#39;, 32.18, 32.75),</span>
<span class="go">        (&#39;stork&#39;, 2219, &#39;red&#39;, &#39;huge&#39;, 60.93, 61.82),</span>
<span class="go">        (&#39;lork&#39;, 4488, &#39;purple&#39;, &#39;tiny&#39;, 0.44, 0.38)],</span>
<span class="go">        dtype=[(&#39;name&#39;, &#39;|S5&#39;), (&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;color&#39;, &#39;|S6&#39;), (&#39;size&#39;, &#39;|S5&#39;), (&#39;June&#39;, &#39;&lt;f8&#39;), (&#39;July&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>Suppose you wanted to use the <cite>coloring</cite> attribute to group the <tt class="docutils literal"><span class="pre">color</span></tt> and <tt class="docutils literal"><span class="pre">size</span></tt> columns under the coloring name <tt class="docutils literal"><span class="pre">info</span></tt>, and the <tt class="docutils literal"><span class="pre">June</span></tt> and <tt class="docutils literal"><span class="pre">July</span></tt> columns under <tt class="docutils literal"><span class="pre">price</span></tt>.</p>
<img alt="../_images/example.png" src="../_images/example.png" />
<p>Represent the hierarchical structure on the columns, or coloring, by setting the <cite>coloring</cite> attribute to the appropriate dictionary:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">coloring</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;info&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">,</span> <span class="s">&#39;size&#39;</span><span class="p">],</span> <span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;June&#39;</span><span class="p">,</span> <span class="s">&#39;July&#39;</span><span class="p">]}</span>
</pre></div>
</div>
<p>Now save the tabarray to a tab-separated text file, setting the <cite>metadata</cite> argument to <cite>True</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">saveSV</span><span class="p">(</span><span class="s">&#39;example_color.txt&#39;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting file now has coloring and data type information stored in the header.  Here it is viewed in MS Excel:</p>
<img alt="../_images/example_color_xls.png" src="../_images/example_color_xls.png" />
<p>If you now load this file using the <tt class="docutils literal"><span class="pre">SVfile</span></tt> argument, the type information in the header will be used (instead of inferring the data type of each column), and the coloring information will be loaded properly.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;example_color.tsv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">coloring</span>
<span class="go">{&#39;info&#39;: [&#39;color&#39;, &#39;size&#39;], &#39;price&#39;: [&#39;June&#39;, &#39;July&#39;]}</span>
</pre></div>
</div>
<p>The value of the <cite>metadata</cite> argument can also be a list of metadata keys (e.g. [&#8216;names&#8217;,&#8217;formats&#8217;]) if you want to restrict the metadata just to those keys.  Setting <cite>metadata = False</cite> or &#8216;[]&#8217; prints no metadata at all.  The <cite>printmetadict</cite> keyword argument is used to control the printing of the metametadata dictionary; when True, the dictionary is printed, when False it is not.  As we saw above in many situations, the default is to have metadata = [&#8216;names&#8217;], and printmetadict = False.</p>
</div>
<div class="section" id="loading-specific-columns">
<h3>Loading Specific Columns<a class="headerlink" href="#loading-specific-columns" title="Permalink to this headline">¶</a></h3>
<p>The <cite>usecols</cite> parameter allows you to load only desired columns, specified by name or by number.  This is faster than loading all columns because unnecessary columns are not typed or manipulated.</p>
<p>Returning to the original <tt class="docutils literal"><span class="pre">example.txt</span></tt> file, load the first and last columns only:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span> <span class="o">=</span> <span class="s">&#39;example.txt&#39;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">tabarray([(&#39;bork&#39;, 46.07), (&#39;mork&#39;, 32.75), (&#39;stork&#39;, 61.82), (&#39;lork&#39;, 0.38)],</span>
<span class="go">      dtype=[(&#39;name&#39;, &#39;|S5&#39;), (&#39;July&#39;, &#39;&lt;f8&#39;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;example.txt&#39;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">,</span> <span class="s">&#39;size&#39;</span><span class="p">])</span>
<span class="go">Inferring delimiter to be &#39;\t&#39;</span>
<span class="go">Inferring names from the last header line (line 1 ).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">tabarray([(&#39;blue&#39;, &#39;big&#39;), (&#39;green&#39;, &#39;small&#39;), (&#39;red&#39;, &#39;huge&#39;),</span>
<span class="go">           (&#39;purple&#39;, &#39;tiny&#39;)],</span>
<span class="go">          dtype=[(&#39;color&#39;, &#39;|S6&#39;), (&#39;size&#39;, &#39;|S5&#39;)])</span>
</pre></div>
</div>
<p>You can mix names and column numbers.   If the tabarray has a coloring, color names can also be passed, and all columns in that color group will be included.</p>
</div>
<div class="section" id="line-and-value-fixing">
<h3>Line and Value &#8220;Fixing&#8221;<a class="headerlink" href="#line-and-value-fixing" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="numpy-binary-files">
<span id="binary-io"></span><h2>NumPy binary files<a class="headerlink" href="#numpy-binary-files" title="Permalink to this headline">¶</a></h2>
<p>You can load and save a tabarray from/to a NumPy binary file (<tt class="docutils literal"><span class="pre">.npy</span></tt>) or archive (<tt class="docutils literal"><span class="pre">.npz</span></tt>).</p>
<p>Saving the data to a <tt class="docutils literal"><span class="pre">.npy</span></tt> binary file uses the <tt class="docutils literal"><span class="pre">numpy.save</span></tt> function and only saves the data and column names.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">SVfile</span><span class="o">=</span><span class="s">&#39;example.tsv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">savebinary</span><span class="p">(</span><span class="s">&#39;example.npy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can load the data from the <tt class="docutils literal"><span class="pre">.npy</span></tt> binary file back into a tabarray using the <cite>binary</cite> argument of the tabarray constructor, which uses the <tt class="docutils literal"><span class="pre">numpy.load</span></tt> function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="s">&#39;example.npy&#39;</span><span class="p">)</span>
<span class="go">tabarray([(&#39;bork&#39;, 1212, &#39;blue&#39;, &#39;big&#39;, 45.32, 46.07),</span>
<span class="go">       (&#39;mork&#39;, 4660, &#39;green&#39;, &#39;small&#39;, 32.18, 32.75),</span>
<span class="go">       (&#39;stork&#39;, 2219, &#39;red&#39;, &#39;huge&#39;, 60.93, 61.82),</span>
<span class="go">       (&#39;lork&#39;, 4488, &#39;purple&#39;, &#39;tiny&#39;, 0.44, 0.38)],</span>
<span class="go">      dtype=[(&#39;name&#39;, &#39;|S5&#39;), (&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;color&#39;, &#39;|S6&#39;), (&#39;size&#39;, &#39;|S5&#39;), (&#39;June&#39;, &#39;&lt;f8&#39;), (&#39;July&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<p>If you want to also save <cite>coloring</cite> information, use a NumPy binary archive (<tt class="docutils literal"><span class="pre">.npz</span></tt>), which is a zipped archive created using <tt class="docutils literal"><span class="pre">numpy.savez</span></tt> and containing a <tt class="docutils literal"><span class="pre">.npy</span></tt> file corresponding to the data itself, plus (optionally) separate <tt class="docutils literal"><span class="pre">.npy</span></tt> files for the <cite>coloring</cite> information.  Use the <cite>savecoloring</cite> argument to specify whether or not to save these attributes, the default is <cite>True</cite>.</p>
<p>For example,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">coloring</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;info&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">,</span> <span class="s">&#39;size&#39;</span><span class="p">],</span> <span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;June&#39;</span><span class="p">,</span> <span class="s">&#39;July&#39;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">savebinary</span><span class="p">(</span><span class="s">&#39;example.npz&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>saves a NumPy binary archive containing two <tt class="docutils literal"><span class="pre">.npy</span></tt> files:  <tt class="docutils literal"><span class="pre">data.npy</span></tt> and <tt class="docutils literal"><span class="pre">coloring.npy</span></tt>.</p>
<p>Load the <tt class="docutils literal"><span class="pre">.npz</span></tt> archive using the <cite>binary</cite> argument of the tabarray constructor, which will look for and attach <cite>coloring</cite> information.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">tabarray</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="s">&#39;example.npz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">coloring</span>
<span class="go">{&#39;info&#39;: [&#39;color&#39;, &#39;size&#39;], &#39;price&#39;: [&#39;June&#39;, &#39;July&#39;]}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo"><a href="http://web.mit.edu/yamins/www/tabular">
  <img class="logo" src="../_static/tabularclear.png" alt="Logo"/>
</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Input and Output</a><ul>
<li><a class="reference internal" href="#delimited-text-files">Delimited Text Files</a><ul>
<li><a class="reference internal" href="#basic-examples">Basic Examples</a></li>
<li><a class="reference internal" href="#formatting-parameters">Formatting Parameters</a></li>
<li><a class="reference internal" href="#delimiter-datatype-and-header-inference">Delimiter, Datatype and Header Inference</a></li>
<li><a class="reference internal" href="#structured-metadata">Structured Metadata</a></li>
<li><a class="reference internal" href="#loading-specific-columns">Loading Specific Columns</a></li>
<li><a class="reference internal" href="#line-and-value-fixing">Line and Value &#8220;Fixing&#8221;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-binary-files">NumPy binary files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="construction.html"
                        title="previous chapter">Creating Tabular Arrays</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="operations.html"
                        title="next chapter">Manipulating Tabular Arrays</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/reference/io.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="operations.html" title="Manipulating Tabular Arrays"
             >next</a> |</li>
        <li class="right" >
          <a href="construction.html" title="Creating Tabular Arrays"
             >previous</a> |</li>
    
        <li><a href="../index.html">tabular</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Elaine Angelino and Daniel Yamins.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>