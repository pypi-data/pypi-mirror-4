<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="ckeditor_func is None">
<body py:strip="ckeditor_func is None">

<div style="width:300px; border:1px solid #CCC; background:white; padding: 5px;">
    <style>
        .tabs-header ul {
            list-style: none;
            padding:0;
            margin:0;
        }

        .tabs-header li {

            border: 1px solid #CCC;
            margin: 0 0.5em 5px 0;
            border-radius: 5px;
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
        }

        .tabs-header li a {
            padding: 0 1em;
            text-decoration: none;
            color: #662625;
            font-weight: bold;
            font-style: italic;
        }
    </style>
    <script type="text/javascript" src="/toscawidgets/resources/tw.jquery.base/static/javascript/jquery-1.4.2.js"></script>
    <script>
        function show_table(cat) {
            var taid = "#cat-" + cat;
            jQuery(".hideable-tabs").hide();
            jQuery(taid).show();
        }
        function show_cats(){
            jQuery(".assets-tabs").hide();
            jQuery(".hideable-tabs").show();
        }
    </script>
    <div class="tabs-header hideable-tabs">
        <ul>
            <li py:for="cat in categories" class="tab-btn" id="btn-${cat}">
                <a href="#" onclick="show_table('${cat}')" title="Category: ${cat.title()}">${cat.title()}</a>
            </li>
        </ul>
    </div>

    <div py:for="i, cat in enumerate(categories)" id="cat-${cat}" class="assets-tabs" style="display: none">
        <div class="tabs-header">
            <ul>
                <li class="tab-btn">
                    <a href="#" onclick="show_cats()">Back to categories</a>
                </li>
            </ul>
        </div>
        <table style="width:100%;">
            <tr>
                <th>Preview</th>
                <th>Name</th>
            </tr>
        </table>
        <div style="width:300px;overflow:auto;height:200px;">
            <table>
                <tr py:for="count, asset in enumerate(assets[i])" class="${count % 2 and 'even' or 'odd'}">
                    <td style="width: 64px;">
                        <a href="${asset.url}" target="_blank">
                            <img src="${asset.thumb_url('small')}"/>
                        </a>
                    </td>
                    <py:choose test="">
                        <td py:when="ckeditor_func" style="width: 100px;cursor:pointer;"
                            onclick="window.parent.opener.CKEDITOR.tools.callFunction(${ckeditor_func}, '${asset.url}', ''); window.close()">
                            <strong py:strip="not asset.uid==selected_asset_id">
                                ${asset.name}
                            </strong>
                        </td>
                        <td py:otherwise="" style="width: 100px;cursor:pointer;"
                            onclick="acr_asset_use(this, '${tg.request.path_info}', '${asset.uid}', '${asset.name}')">
                            <strong py:strip="not asset.uid==selected_asset_id">
                                ${asset.name}
                            </strong>
                        </td>
                    </py:choose>
                </tr>
            </table>
        </div>
    </div>
</div>
</body>
</html>
