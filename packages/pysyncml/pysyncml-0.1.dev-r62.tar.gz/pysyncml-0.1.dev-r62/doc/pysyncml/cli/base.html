

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Module: pysyncml.cli &mdash; pysyncml 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/theme_extras.js"></script>
    <link rel="top" title="pysyncml 0.1 documentation" href="../../index.html" />
    <link rel="next" title="Module: pysyncml.context" href="../context.html" />
    <link rel="prev" title="Module: pysyncml.change.tracker" href="../change/tracker.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../../index.html">
          <span>pysyncml 0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Module: pysyncml.cli</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="../change/tracker.html">Module: pysyncml.change.tracker</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../context.html">Module: pysyncml.context</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="module-pysyncml.cli.base">
<span id="module-pysyncml-cli"></span><h1>Module: pysyncml.cli<a class="headerlink" href="#module-pysyncml.cli.base" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="docutils literal"><span class="pre">pysyncml.cli.base</span></tt> is a helper module that provides commonly used
functionality when implementing a pysyncml command line interface
synchronization engine.</p>
<dl class="class">
<dt id="pysyncml.cli.base.CommandLineSyncEngine">
<em class="property">class </em><tt class="descclassname">pysyncml.cli.base.</tt><tt class="descname">CommandLineSyncEngine</tt><big>(</big><em>appLabel=None</em>, <em>appDisplay=None</em>, <em>appModelVersion=None</em>, <em>defaultDevID=None</em>, <em>defaultListen=80</em>, <em>devinfoParams={}</em>, <em>storeParams={}</em>, <em>agent=None</em>, <em>hooks=None</em>, <em>*args</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../../_modules/pysyncml/cli/base.html#CommandLineSyncEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysyncml.cli.base.CommandLineSyncEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>CommandLineEngine</cite> class helps ease the burden of creating a command
line sync engine by implementing the following functionality:</p>
<ul class="simple">
<li>Selection and allocation of pysyncml storage repository.</li>
<li>Generation of an extensible sqlalchemy model.</li>
<li>Support for client-side and/or server-side operation.</li>
<li>Configuration of commonly used command line options.</li>
</ul>
<p>There are different subclasses that exist to support different operation
styles:</p>
<ul>
<li><p class="first"><a class="reference internal" href="#pysyncml.cli.base.DirectorySyncEngine" title="pysyncml.cli.base.DirectorySyncEngine"><tt class="xref py py-class docutils literal"><span class="pre">DirectorySyncEngine</span></tt></a>:</p>
<p>A directory-based approach, where the items being synchronized are
stored in a directory, and different directories can have different
application and synchronization profiles.</p>
</li>
<li><p class="first"><tt class="xref py py-class docutils literal"><span class="pre">LocalUserSyncEngine</span></tt>:</p>
<p>A more centralized approach, where the items being synchronized are stored
in some host-local per-user location (for example, in another application&#8217;s
settings). In this case, the user must specifically request a different
configuration in order to choose a different application or synchronization
profile.</p>
</li>
</ul>
<p>The CommandLineClient base constructor accepts the following parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>appLabel</strong> &#8211; <p>A short unique identifier for this application, typically set to
the program&#8217;s name, for example &#8220;sync-notes&#8221;. This label should not
contain any special characters, especially those that are not allowed
as part of a filename. Amongst other things, it is used to:</p>
<ul>
<li>generate the default device ID, if not specified,</li>
<li>create application-specific configuration directory/file names,</li>
<li>default datastore URI,</li>
<li>and much more.</li>
</ul>
</li>
<li><strong>appDisplay</strong> &#8211; The name of the application when displayed to the user, for
example &#8220;Note Synchronizer&#8221;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The CommandLineClient also has the following additional attributes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dataDir</strong> &#8211; The directory that contains all of the database files - this
is usually taken care of by one of the pre-existing subclasses.
It is expected to end with a &#8220;/&#8221;.</td>
</tr>
</tbody>
</table>
<p>TODO: document all options...</p>
<dl class="method">
<dt id="pysyncml.cli.base.CommandLineSyncEngine.addHook">
<tt class="descname">addHook</tt><big>(</big><em>name</em>, <em>callable</em><big>)</big><a class="reference internal" href="../../_modules/pysyncml/cli/base.html#CommandLineSyncEngine.addHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysyncml.cli.base.CommandLineSyncEngine.addHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscribes <cite>callable</cite> to listen to events of <cite>name</cite> type. The
parameters passed to <cite>callable</cite> are dependent on the specific
event being triggered.</p>
</dd></dl>

<dl class="method">
<dt id="pysyncml.cli.base.CommandLineSyncEngine.configure">
<tt class="descname">configure</tt><big>(</big><em>argv=None</em><big>)</big><a class="reference internal" href="../../_modules/pysyncml/cli/base.html#CommandLineSyncEngine.configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysyncml.cli.base.CommandLineSyncEngine.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures this engine based on the options array passed into
<cite>argv</cite>. If <cite>argv</cite> is <tt class="docutils literal"><span class="pre">None</span></tt>, then <tt class="docutils literal"><span class="pre">sys.argv</span></tt> is used instead.
During configuration, the command line options are merged with
previously stored values. Then the logging subsystem and the
database model are initialized, and all storable settings are
serialized to configurations files.</p>
</dd></dl>

<dl class="method">
<dt id="pysyncml.cli.base.CommandLineSyncEngine.run">
<tt class="descname">run</tt><big>(</big><em>stdout=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x40253070&gt;</em>, <em>stderr=&lt;open file '&lt;stderr&gt;'</em>, <em>mode 'w' at 0x402530c0&gt;</em><big>)</big><a class="reference internal" href="../../_modules/pysyncml/cli/base.html#CommandLineSyncEngine.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysyncml.cli.base.CommandLineSyncEngine.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs this SyncEngine by executing one of the following functions
(as controlled by command-line options or stored parameters):</p>
<ul class="simple">
<li>Display local pending changes.</li>
<li>Describe local configuration.</li>
<li>Run an HTTP server and engage server-side mode.</li>
<li>Connect to a remote SyncML peer and engage client-side mode.</li>
</ul>
<p>NOTE: when running in the first two modes, all database interactions
are rolled back in order to keep the SyncEngine idempotent.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pysyncml.cli.base.DirectorySyncEngine">
<em class="property">class </em><tt class="descclassname">pysyncml.cli.base.</tt><tt class="descname">DirectorySyncEngine</tt><big>(</big><em>syncSubdir='.sync'</em>, <em>defaultDir=None</em>, <em>*args</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../../_modules/pysyncml/cli/base.html#DirectorySyncEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysyncml.cli.base.DirectorySyncEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>DirectorySyncEngine</cite> is a helper peer environment where
synchronized items are stored in a directory (or subdirectories thereof). A special
(configurable) <tt class="docutils literal"><span class="pre">.sync</span></tt> subdirectory is created to contain configuration,
state and synchronization data, which must be ignored by the calling
framework. Moving the directory and its contents, as a unit, will not affect
the functionality of the sync.</p>
<p>In addition to the <a class="reference internal" href="#pysyncml.cli.base.CommandLineSyncEngine" title="pysyncml.cli.base.CommandLineSyncEngine"><tt class="xref py py-class docutils literal"><span class="pre">CommandLineSyncEngine</span></tt></a> constructor parameters,
the <cite>DirectorySyncEngine</cite> accepts the following:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>syncSubdir</strong> &#8211; Specifies the name of the immediate subdirectory of the base
directory that should be created to contain configuration, state
and synchronization data. Removal of this directory will reset
all client/server states, and synchronization will need to resume
via a &#8220;slow-sync&#8221;. The application should ignore this directory
when manipulating any data. The default is <tt class="docutils literal"><span class="pre">&quot;.sync&quot;</span></tt>.</li>
<li><strong>defaultDir</strong> &#8211; If specified, will allow the user to invoke the application without
needing to identify the directory to synchronize, and instead will
default to this value. If used, this <cite>CommandLineSyncEngine</cite> begins to
resemble how the <tt class="xref py py-class docutils literal"><span class="pre">LocalUserSyncEngine</span></tt> operates, but diverges in
the fact that the synchronization data is kept in the same directory
as the synchronized items.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>In addition to the <a class="reference internal" href="#pysyncml.cli.base.CommandLineSyncEngine" title="pysyncml.cli.base.CommandLineSyncEngine"><tt class="xref py py-class docutils literal"><span class="pre">CommandLineSyncEngine</span></tt></a> attributes,
the <cite>DirectorySyncEngine</cite> also provides the following:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rootDir</strong> &#8211; The path (potentially either relative or absolute) to the
directory under control by this synchronization engine. The path,
if valid, ends with a slash (&#8220;/&#8221;).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysyncml.cli.base.hook">
<tt class="descclassname">pysyncml.cli.base.</tt><tt class="descname">hook</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="../../_modules/pysyncml/cli/base.html#hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysyncml.cli.base.hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator used to tag a method that should be used as a hook for the
specified <cite>name</cite> hook type.</p>
</dd></dl>

</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="../change/tracker.html">Module: pysyncml.change.tracker</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../context.html">Module: pysyncml.context</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012-2012, UberDev, No Rights Reserved.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>