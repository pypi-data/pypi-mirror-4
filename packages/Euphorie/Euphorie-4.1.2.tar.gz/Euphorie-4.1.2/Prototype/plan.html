<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
      Plan van aanpak
    </title>
    <link rel="stylesheet" type="text/css" media="screen" href="style/main/screen.css" />
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="style/main/screen-osha.css" /> -->
    <!--[if lte IE 6]> <link rel="stylesheet" type="text/css" media="screen" href="style/main/screen-ie6.css" /> <![endif]-->
    <!--[if IE 7]> <link rel="stylesheet" type="text/css" media="screen" href="style/main/screen-ie7.css" /> <![endif]-->
    <!--[if IE 8]> <link rel="stylesheet" type="text/css" media="screen" href="style/main/screen-ie8.css" /> <![endif]-->
    <!--[if lte IE 8]><script src="libraries/excanvas.min.js" type=text/javascript></script><![endif]-->
    <script type="text/javascript" src="libraries/jquery-1.4.4.min.js"> </script>
    <script type="text/javascript" src="libraries/jquery-ui-1.7.3.min.js"> </script>
    <script type="text/javascript" src="libraries/jquery.hoverIntent.js"></script>
    <script type="text/javascript" src="libraries/jquery.bt.js"> </script>
    <script type="text/javascript" src="libraries/css_browser_selector.js"> </script>
    <script type="text/javascript" src="libraries/jquery.bt.js"></script>
    <script type="text/javascript" src="libraries/jquery.numeric.js"> </script>
    <script type="text/javascript" src="libraries/fancybox/jquery.fancybox-1.3.1.pack.js"></script>
    <script type="text/javascript" src="behaviour/markup.js">
</script>
  </head>
  <body>
    <h1>
      Plan van aanpak
    </h1><!-- WTA: This information block is generic and appears in all three phases -->
    <div class="warning span-15 last">
      <img alt="" src="media/Smeg.png" class="floatBefore" />
      <h2>
        The temperature of some fridges is checked daily
      </h2>
      <p>This risk is not present in your organisation, but since the sector organisation considers this one of the top 5 most
      critical risks it must be included in this report.</p>

      <p class="description">
        The temperature in a fridge is critical to storing food. If the temperature is too high or fluctuates too much food can start rotting quickly.
      </p>      
      <fieldset>
        <label>This is a <select>
          <option>
            low priority risk
          </option>
          <option>
            medium priority risk
          </option>
          <option>
            high priority risk
          </option>
        </select> .</label>
      </fieldset>
    </div>
    
    <div class="solutions" id="standardSolutions">
      <p class="info">Select a standard solution. The main fields of this measure will be populated with the chosen solution.</p>
      <ol>
        <li>
          <strong class="title">Standard solution bla</strong>
          <p class="actionPlan">This is the text for action plan</p>
          <p class="preventionPlan">This is the text for prevention plan</p>
          <p class="requirements">This is the text for requirements</p>
        </li>
        <li>
          <strong>Lorem ipsum dolor sit amet consectetuerLorem ipsum dolor sit amet consectetuerLorem ipsum dolor sit amet consectetuerLorem ipsum dolor sit amet consectetuerLorem ipsum dolor sit amet consectetuer</strong>
          <p class="actionPlan">This is the text for action plan</p>
          <p class="preventionPlan">This is the text for prevention plan</p>
          <p class="requirements">This is the text for requirements</p>
        </li>
        <li>
          <strong>Tremendae</strong>
          <p class="actionPlan">This is the text for action plan</p>
          <p class="preventionPlan">This is the text for prevention plan</p>
          <p class="requirements">This is the text for requirements</p>
        </li>
      </ol>
    </div>
    
    <dl class="accordion" id="ActionPlanItemForm">
      <dt class="open">
        Measure 1
        <button class="small">Remove</button>
        <a href="#standardSolutions" class="button small solutions">Standard solutions</a> 
      </dt>
      <dd>
        <a href="#" class="icon info clicktip">How do I use this form?</a>
        <div class="span-7 colborder">
          <fieldset class="condensed">
            <legend>Description of your measure</legend> 
            <label class="superImpose">General approach (to eliminate or reduce the risk)</label>
            <textarea class="actionPlan" name="action_plan" rows="6">
</textarea>
            <hr />
            <label class="superImpose">Specific action(s) required to implement this approach</label>
            <textarea class="preventionPlan" name="prevention_plan" rows="3">
</textarea>
            <hr />
            <label class="superImpose">Level of expertise and/or requirements needed</label>
            <textarea class="requirements" name="requirements" rows="3">
</textarea>
          </fieldset>
        </div>
        <div class="span-7 last">
          <fieldset class="condensed">
            <label i18n:translate="label_action_plan_responsible">Who is responsible? <a href="#" class="icon info clicktip">(More information)</a> <input type="text" name="responsible" /></label> <label i18n:translate="label_action_plan_budget">Budget (in Euro) <a href="#" class="icon info clicktip">(More information)</a> <input type="text" name="budget" /></label>
            <fieldset class="condensed">
              <legend i18n:translate="label_action_plan_start">Planning start</legend>
              <fieldset class="date-eu">
               
                  <label for="planning_start_day" i18n:translate="label_day">Day</label> <input class="day error" type="text" name="planning_start.day:record" id="planning_start_day" maxlength="2" />
               
                  <label for="planning_start_month" i18n:translate="label_month">Month</label> <select class="month error" name="planning_start.month:record" id="planning_start_month">
                    <option value="01" i18n:translate="">
                      January
                    </option>
                    <option value="02" i18n:translate="">
                      February
                    </option>
                    <option value="03" i18n:translate="">
                      March
                    </option>
                    <option value="04" i18n:translate="">
                      April
                    </option>
                    <option value="05" i18n:translate="">
                      May
                    </option>
                    <option value="06" i18n:translate="">
                      June
                    </option>
                    <option value="07" i18n:translate="">
                      July
                    </option>
                    <option value="08" i18n:translate="">
                      August
                    </option>
                    <option value="09" i18n:translate="">
                      September
                    </option>
                    <option value="10" i18n:translate="">
                      October
                    </option>
                    <option value="11" i18n:translate="">
                      November
                    </option>
                    <option value="12" i18n:translate="">
                      December
                    </option>
                  </select>
               
                  <label for="planning_start_year" i18n:translate="label_year">Year</label> <input class="year error" type="text" name="planning_start.year:record" id="planning_start_year" maxlength="4" />
               
              </fieldset>
            </fieldset>
            <fieldset class="condensed">
              <legend i18n:translate="label_action_plan_end">Planning end</legend>
              
              <fieldset class="date-eu">
              
                  <label for="planning_end_day" i18n:translate="label_day">Day</label> <input class="day" type="text" name="planning_end.day:record" id="planning_end_day" maxlength="2" />
              
                  <label for="planning_end_month" i18n:translate="label_month">Month</label> 
                  <select class="month" name="planning_end.month:record" id="planning_end_month">
                    <option value="01" i18n:translate="">
                      January
                    </option>
                    <option value="02" i18n:translate="">
                      February
                    </option>
                    <option value="03" i18n:translate="">
                      March
                    </option>
                    <option value="04" i18n:translate="">
                      April
                    </option>
                    <option value="05" i18n:translate="">
                      May
                    </option>
                    <option value="06" i18n:translate="">
                      June
                    </option>
                    <option value="07" i18n:translate="">
                      July
                    </option>
                    <option value="08" i18n:translate="">
                      August
                    </option>
                    <option value="09" i18n:translate="">
                      September
                    </option>
                    <option value="10" i18n:translate="">
                      October
                    </option>
                    <option value="11" i18n:translate="">
                      November
                    </option>
                    <option value="12" i18n:translate="">
                      December
                    </option>
                  </select>
             
                  <label for="planning_end_year" i18n:translate="label_year">Year</label> 
                  <input class="year" type="text" name="planning_end.year:record" id="planning_end_year" maxlength="4" />
                
              </fieldset>
            </fieldset>
          </fieldset>
        </div>
      </dd>
    </dl>
    <dl style="display: none" id="measureTemplate">
      <dt class="open">
        Measure 2 <button class="small removeButton">Remove</button>
        <a href="#standardSolutions" class="button small solutions">Standard solutions</a> 
      </dt>
      <dd>
        <div class="span-7 colborder">
          <fieldset class="condensed">
            <legend>Description of your measure</legend> 
            <label class="superImpose">General approach (to eliminate or reduce the risk)</label>
            <textarea class="actionPlan" name="action_plan" rows="6">
</textarea>
            <hr />
            <label class="superImpose">Specific action(s) required to implement this approach</label>
            <textarea class="preventionPlan" name="prevention_plan" rows="3">
</textarea>
            <hr />
            <label class="superImpose">Level of expertise and/or requirements needed</label>
            <textarea class="requirements" name="requirements" rows="3">
</textarea>
          </fieldset>
        </div>
        <div class="span-7 last">
          <fieldset class="condensed">
            <label i18n:translate="label_action_plan_responsible">Who is responsible? <input type="text" name="responsible" /></label> <label i18n:translate="label_action_plan_budget">Budget (in Euro) <abbr class="currency">€</abbr> <input type="text" name="budget" /></label>
          </fieldset>
          <fieldset class="condensed">
            <legend i18n:translate="label_action_plan_start">Planning start</legend>
            <fieldset class="date-eu">
                <label for="planning_start_day" i18n:translate="label_day">Day</label> 
                <input class="day" name="planning_start.day:record" id="planning_start_day" maxlength="2" />   
                <label for="planning_start_month" i18n:translate="label_month">Month</label> 
                <select class="month" name="planning_start.month:record" id="planning_start_month">
                  <option value="01" i18n:translate="">
                    January
                  </option>
                  <option value="02" i18n:translate="">
                    February
                  </option>
                  <option value="03" i18n:translate="">
                    March
                  </option>
                  <option value="04" i18n:translate="">
                    April
                  </option>
                  <option value="05" i18n:translate="">
                    May
                  </option>
                  <option value="06" i18n:translate="">
                    June
                  </option>
                  <option value="07" i18n:translate="">
                    July
                  </option>
                  <option value="08" i18n:translate="">
                    August
                  </option>
                  <option value="09" i18n:translate="">
                    September
                  </option>
                  <option value="10" i18n:translate="">
                    October
                  </option>
                  <option value="11" i18n:translate="">
                    November
                  </option>
                  <option value="12" i18n:translate="">
                    December
                  </option>
                </select>

                <label for="planning_start_year" i18n:translate="label_year">Year</label> <input class="year" name="planning_start.year:record" id="planning_start_year" maxlength="4" />
             </fieldset>
          </fieldset>
          <fieldset class="condensed ">
            <legend i18n:translate="label_action_plan_end">Planning end</legend>
            <fieldset class="date-eu">
            
                <label for="planning_end_day" i18n:translate="label_day">Day</label> <input class="day" name="planning_end.day:record" id="planning_end_day" maxlength="2" />
             
                <label for="planning_end_month" i18n:translate="label_month">Month</label> 
                <select name="planning_end.month:record" id="planning_end_month" class="month">
                  <option value="01" i18n:translate="">
                    January
                  </option>
                  <option value="02" i18n:translate="">
                    February
                  </option>
                  <option value="03" i18n:translate="">
                    March
                  </option>
                  <option value="04" i18n:translate="">
                    April
                  </option>
                  <option value="05" i18n:translate="">
                    May
                  </option>
                  <option value="06" i18n:translate="">
                    June
                  </option>
                  <option value="07" i18n:translate="">
                    July
                  </option>
                  <option value="08" i18n:translate="">
                    August
                  </option>
                  <option value="09" i18n:translate="">
                    September
                  </option>
                  <option value="10" i18n:translate="">
                    October
                  </option>
                  <option value="11" i18n:translate="">
                    November
                  </option>
                  <option value="12" i18n:translate="">
                    December
                  </option>
                </select>
             
                <label for="planning_end_year" i18n:translate="label_year">Year</label> <input class="year" name="planning_end.year:record" id="planning_end_year" maxlength="4" />
            </fieldset>
          </fieldset>
        </div>
      </dd>
    </dl>
    <div class="buttonBar">
      <button type="submit" id="addMeasureButton" i18n:translate="label_add">Add another measure</button>
    </div>

<hr/>

    <div class="notice" tal:condition="view/legal_reference">
      <h4 i18n:translate="header_legal_references">
        Legal and policy references
      </h4>
      <p tal:replace="structure view/legal_reference">
        The requirements for fridges are defined in section 13.1 section a of the health code.
      </p>
    </div><!-- WTA: Information block ends here -->

    
    <fieldset class="concise">
      <label i18n:translate="label_comments" class="superImpose">Please leave any comments you may have on the question above in this field</label> 
      <textarea name="comments" cols="70" rows="5" class="span-15">

</textarea>
    </fieldset>
    
    <ol id="steps">
      <li id="step-1" class="complete">
        <a href="#">Voorbereiden</a>
      </li>
      <li id="step-2" class="complete">
        <a href="inventariseren.html">Inventariseren</a>
      </li>
      <li id="step-3" class="complete">
        <a href="#">Evalueren</a>
      </li>
      <li class="current active" id="step-4">
        <a class="complete" href="#">Plan van aanpak</a>
      </li>
      <li id="step-5">Rapporten
      </li>
    </ol>
    
    <ul id="navigation">
      <li id="home">
        <a href="index.html" lang="en-GB" xml:lang="en-GB"><strong>OiRA</strong><br/>
          interaktywne narzędzie<br />
          oceny ryzyka on-line</a>
      </li>
      <li>
        <a href="#">Help</a>
      </li>
      <li>
        <a href="status.html">Status</a>
      </li>
          <li>
            <a href="settings.html">Account settings</a>
          </li>
    </ul>
    
    <p id="appendix">
      <a href="#">Lorem</a> | <a href="#">Ipsum Dolor</a> | <a href="#">Sit</a>
    </p>
    
   <script type="text/javascript">
    var delete_confirm_text = "Are you sure you want to remove this measure? This action can not be reverted.";
    var replace_confirm_text = "The current text in the fields 'Action plan', 'Prevention plan' and 'Requirements' of this measure will be overwritten. This action cannot be reverted Are you sure you want to continue?";

// <![CDATA[
    function findActive(measures) {
        var items = $.map(measures.find("dt"),
            function(a) { return $(a).hasClass("ui-state-active"); });
        var active = $.inArray(true, items);

        return active;
    }


    function EnforceMeasurementStyling() {
        var headers = $("#ActionPlanItemForm dt");
        var measures = $("#ActionPlanItemForm dd");
        var title = $("#measureTemplate dt").clone().find("button").remove().end().text();
        var i;

        for (i=0; i<headers.length; i++) {
//            headers.eq(i).text(title.replace(/[0-9]+/, i+1));
            measures.eq(i).find("fieldset:first *").each(function() {
                var el=$(this);
                var buf = el.attr("id");
                if (buf) {
                    el.attr("id", buf.replace(/[0-9]+/, i+1));
                }
                buf=el.attr("for");
                if (buf) {
                    el.attr("for", buf.replace(/[0-9]+/, i+1));
                }
            });
        }

/*
        headers.find("button").remove();
        if (headers.length>1) {
            var button = $("#measureTemplate dt .removeButton");
            button.clone(true).appendTo(headers);
            setupEvents();
        }
*/
    }


    function removeButtonHandler() {
        var measures = $("#ActionPlanItemForm");
        var measures_count = measures.find("dt").length-1;
        var active = findActive(measures);
        var header = $(this).parents("dt");

        if (!confirm(delete_confirm_text)) {
            return false;
        }

        if (active>=measures_count-1) {
          active-=1;
        }

        $(header).add($(header).next("dd")).remove();

        measures
            .accordion("destroy")
            .accordion({active: active});

        EnforceMeasurementStyling();
    };


    function AddMeasurement() {
        var measures = $("#ActionPlanItemForm");
        var measures_count = measures.find("dt").length;
        var active = findActive(measures);

        $("#measureTemplate")
            .find("> *")
            .clone(true)
            .find(".clicktip")
                .each(function() {
                    var id = assertId(this);
                    $(this)
                        .unbind("click")
                        .bt({trigger: "click",
                                fill: "#8293ab",
                                strokeStyle: "#8293ab",
                                contentSelector: "$('#" + id + "').html()"
                                })
                        .click(function() { return false; });
                }).end()
            .appendTo(measures);

        measures
            .accordion("destroy")
            .accordion({active: active})
            .accordion("activate", measures_count);

        EnforceMeasurementStyling();

        $("label.superImpose", measures).each(setupSuperimpose);
    }


    function MeasureHasData(m) {
        var data = $.map(m.find(":input:not(select)"),
                                   function(i) { return Boolean($(i).val()); });
        return $.inArray(true, data)!=-1;
    }


    $(".button.solutions").live("click", function() {
        var $solutions = $("#solutions");
        $solutions.toggle();
        return false;
    });

    function toggleSolutionDropdown() {
        var $solutions = $("#standardSolutions"),
            position;
        
        if ($solutions.data("euphorie.visible")) {
            $solutions
                .data("euphorie.visible", false)
                .hide();
            $("html").unbind("click.fallback");
            return;
        }

        $solutions.data("euphorie.visible", true);
        position=$(this).offset();
        $solutions
            .css({top: position.top, left: position.left})
            .show();
        $("html").bind("click.fallback", toggleSolutionDropdown);
    }

    function addStandardSolution() {
        toggleSolutionDropdown();

        var measures = $("#ActionPlanItemForm"),
            active = findActive(measures);
            $measure = measures.find("dd").eq(active);

        if (MeasureHasData($measure)) {
            if (!confirm(replace_confirm_text)) {
                return false;
            }
        }

        $measure.find(":input.actionPlan").val(
            $(this).find(".actionPlan").text());
        $measure.find(":input.preventionPlan").val(
            $(this).find(".preventionPlan").text());
        $measure.find(":input.requirements").val(
            $(this).find(".requirements").text());

        $("label.superImpose", $measure).each(setupSuperimpose);
    }

    function setupEvents() {
        $(".button.solutions")
            .unbind(".euphorie")
            .bind("click.euphorie", toggleSolutionDropdown);
        $("#addMeasureButton")
            .unbind(".euphorie")
            .bind("click.euphorie", AddMeasurement);
        $(".removeButton")
            .unbind(".euphorie")
            .bind("click.euphorie", removeButtonHandler);
        $("#standardSolutions li")
            .unbind(".euphorie")
            .bind("click.euphorie", addStandardSolution);
    }


    $(document).ready(function() {
        setupEvents();
        EnforceMeasurementStyling();
    });
// ]]>
    </script>
  </body>
</html>
