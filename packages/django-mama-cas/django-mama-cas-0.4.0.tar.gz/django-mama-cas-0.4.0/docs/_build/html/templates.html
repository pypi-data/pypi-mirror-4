

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Templates &mdash; django-mama-cas 0.3 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="django-mama-cas 0.3 documentation" href="index.html" />
    <link rel="next" title="Management commands" href="management-commands.html" />
    <link rel="prev" title="Changelog" href="changelog.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="management-commands.html" title="Management commands"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">django-mama-cas 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="templates">
<span id="id1"></span><h1>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h1>
<p>django-mama-cas comes with generalized templates to provide a functional
starting point. Most likely you will want to either extend the HTML templates
with your own customizations or replace them entirely.</p>
<div class="section" id="html-templates">
<h2>HTML templates<a class="headerlink" href="#html-templates" title="Permalink to this headline">¶</a></h2>
<p><strong>mama_cas/login.html</strong></p>
<blockquote>
<div>This is the main authentication form template used by <tt class="docutils literal"><span class="pre">LoginView</span></tt>
implementing standard password authentication and is used whenever user
credentials are required. It displays appropriate messages or errors to
indicate success or failure during the login process. When the user logs
out, they are redirected back to this template, with a message indicating
a successful logout.</div></blockquote>
<p><strong>mama_cas/warn.html</strong></p>
<blockquote>
<div>This template is used by <tt class="docutils literal"><span class="pre">LoginView</span></tt> when the warn parameter from
<tt class="docutils literal"><span class="pre">LoginFormWarn</span></tt> is in effect. This causes the login process to not be
transparent to the user. When an authentication attempt occurs, this
template is displayed to provide continue or cancel options for the user.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These template files should not be edited directly, as changes will be overwritten when django-mama-cas is updated.</p>
</div>
</div>
<div class="section" id="xml-templates">
<h2>XML templates<a class="headerlink" href="#xml-templates" title="Permalink to this headline">¶</a></h2>
<p><strong>mama_cas/validate.xml</strong></p>
<blockquote>
<div>This template is used for CAS 2.0 service and proxy validation responses.
In general, this file should not need to be modified as changes will likely
break expected CAS behavior. Within the body of the authentication success
block is the include for adding custom user attributes. This include path
can be changed to one of the following three templates implementing the
conventional attribute formats.</div></blockquote>
<p><strong>mama_cas/attributes-jasig.xml</strong></p>
<blockquote>
<div><p>Includes custom user attributes in JASIG format:</p>
<div class="highlight-python"><pre>&lt;cas:attributes&gt;
    &lt;cas:givenName&gt;Ellen&lt;/cas:givenName&gt;
    &lt;cas:sn&gt;Cohen&lt;/cas:sn&gt;
    &lt;cas:email&gt;ellen@example.com&lt;/cas:email&gt;
&lt;/cas:attributes&gt;</pre>
</div>
<p>django-mama-cas defaults to this custom attributes format.</p>
</div></blockquote>
<p><strong>mama_cas/attributes-rubycas.xml</strong></p>
<blockquote>
<div><p>Includes custom user attributes in RubyCAS format:</p>
<div class="highlight-python"><pre>&lt;cas:givenName&gt;Ellen&lt;/cas:givenName&gt;
&lt;cas:sn&gt;Cohen&lt;/cas:sn&gt;
&lt;cas:email&gt;ellen@example.com&lt;/cas:email&gt;</pre>
</div>
</div></blockquote>
<p><strong>mama_cas/attributes-namevalue.xml</strong></p>
<blockquote>
<div><p>Includes custom user attributes in Name-Value format:</p>
<div class="highlight-python"><pre>&lt;cas:attribute name='givenName' value='Ellen' /&gt;
&lt;cas:attribute name='sn' value='Cohen' /&gt;
&lt;cas:attribute name='email' value='ellen@example.com' /&gt;</pre>
</div>
</div></blockquote>
<p><strong>mama_cas/proxy.xml</strong></p>
<blockquote>
<div>Used for CAS 2.0 proxy-granting ticket validation responses. In general,
this file should not need to be modified as changes will likely break
expected CAS behavior.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These template files should not be edited directly, as changes will be overwritten when django-mama-cas is updated.</p>
</div>
</div>
<div class="section" id="extending-templates">
<h2>Extending templates<a class="headerlink" href="#extending-templates" title="Permalink to this headline">¶</a></h2>
<p>The default template provides a number of unused blocks to make it easy to
insert content. If only minor changes are required, it might be simplest to
extend what is already provided. Here are the basic steps involved:</p>
<ol class="arabic">
<li><p class="first">Create a custom application and add it to INSTALLED_APPS above
django-mama-cas. It should look something like this:</p>
<div class="highlight-python"><pre>INSTALLED_APPS = (
    ...
    'custom_login',
    'mama_cas',
    ...
)</pre>
</div>
</li>
<li><p class="first">Create a new login template file within the templates directory of your
custom application. Assuming an application named <tt class="docutils literal"><span class="pre">custom_login</span></tt>, the
file would be <tt class="docutils literal"><span class="pre">custom_login/templates/custom_login/login.html</span></tt>.  Putting
the template within an application specific subdirectory within
<tt class="docutils literal"><span class="pre">templates</span></tt> helps keep templates distinct. The template does not need to
be named <tt class="docutils literal"><span class="pre">login.html</span></tt>, but it can be helpful to mirror the name of the
template being replaced.</p>
<p>For example, to add a header above the login form with additional styling,
create a template with the following content:</p>
<div class="highlight-python"><pre>{% extends "mama_cas/login.html" %}
{% block extra_head %}{{ block.super }}
&lt;style&gt;#header { font-size:3em; text-align:center; color:#aaa; }&lt;/style&gt;
{% endblock extra_head %}
{% block header %}
&lt;h1&gt;If You Can Believe Your Eyes and Ears&lt;/h1&gt;
{% endblock header %}</pre>
</div>
</li>
<li><p class="first">Tell django-mama-cas to use the new template by specifying it within the
URLconf:</p>
<div class="highlight-python"><pre>urlpatterns = patterns('',
    url(r'^login/?$',
    LoginView.as_view(template_name="custom_login/login.html"),
    name='cas_login'),
    ...</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="replacing-templates">
<h2>Replacing templates<a class="headerlink" href="#replacing-templates" title="Permalink to this headline">¶</a></h2>
<p>If the required changes are substantial, it may be easier to replace the stock
template entirely. Instead of extending the template as described in step two,
replace it entirely.</p>
<p>In addition to a standard form display, there are things you&#8217;ll likely want to
include in a custom login template:</p>
<dl class="docutils">
<dt><strong>Messages</strong></dt>
<dd>The <tt class="docutils literal"><span class="pre">messages</span></tt> framework displays information about the user&#8217;s logon
status. When the message contains HTML, it is passed to the template with
a <tt class="docutils literal"><span class="pre">safe</span></tt> tag so the message is rendered with the HTML intact.</dd>
<dt><strong>Non-field errors</strong></dt>
<dd>The <tt class="docutils literal"><span class="pre">non_field_errors</span></tt> inform the user of authentication failures and
other login problems.</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Templates</a><ul>
<li><a class="reference internal" href="#html-templates">HTML templates</a></li>
<li><a class="reference internal" href="#xml-templates">XML templates</a></li>
<li><a class="reference internal" href="#extending-templates">Extending templates</a></li>
<li><a class="reference internal" href="#replacing-templates">Replacing templates</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="previous chapter">Changelog</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="management-commands.html"
                        title="next chapter">Management commands</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/templates.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="management-commands.html" title="Management commands"
             >next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >previous</a> |</li>
        <li><a href="index.html">django-mama-cas 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jason Bittel.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>