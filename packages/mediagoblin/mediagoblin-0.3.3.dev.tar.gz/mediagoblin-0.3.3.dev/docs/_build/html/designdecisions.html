<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Design Decisions &mdash; GNU MediaGoblin v0.1a1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '0.1a1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="GNU MediaGoblin v0.1a1 documentation" href="index.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">GNU MediaGoblin v0.1a1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="design-decisions">
<span id="design-decisions-chapter"></span><h1>Design Decisions<a class="headerlink" href="#design-decisions" title="Permalink to this headline">¶</a></h1>
<p>This chapter talks a bit about design decisions.</p>
<div class="section" id="why-python">
<h2>Why Python<a class="headerlink" href="#why-python" title="Permalink to this headline">¶</a></h2>
<p>Chris Webber on &#8220;Why Python&#8221;:</p>
<blockquote>
<p>Because I know Python, love Python, am capable of actually making
this thing happen in Python (I&#8217;ve worked on a lot of large free
software web applications before in Python, including <a class="reference external" href="http://mirocommunity.org/">Miro
Community</a>, the <a class="reference external" href="http://miroguide.org/">Miro Guide</a>, a large portion of <a class="reference external" href="http://creativecommons.org/">Creative
Commons</a>, and a whole bunch of things while working at <a class="reference external" href="http://www.imagescape.com/">Imaginary
Landscape</a>).  I know Python, I can make this happen in Python, me
starting a project like this makes sense if it&#8217;s done in Python.</p>
<p>You might say that PHP is way more deployable, that Rails has way
more cool developers riding around on fixie bikes, and all of
those things are true.  But I know Python, like Python, and think
that Python is pretty great.  I do think that deployment in Python
is not as good as with PHP, but I think the days of shared hosting
are (thankfully) coming to an end, and will probably be replaced
by cheap virtual machines spun up on the fly for people who want
that sort of stuff, and Python will be a huge part of that future,
maybe even more than PHP will.  The deployment tools are getting
better.  Maybe we can use something like Silver Lining.  Maybe we
can just distribute as <tt class="docutils literal"><span class="pre">.debs</span></tt> or <tt class="docutils literal"><span class="pre">.rpms</span></tt>.  We&#8217;ll figure it
out when we get there.</p>
<p>Regardless, if I&#8217;m starting this project, which I am, it&#8217;s gonna
be in Python.</p>
</blockquote>
</div>
<div class="section" id="why-wsgi-minimalism">
<h2>Why WSGI Minimalism<a class="headerlink" href="#why-wsgi-minimalism" title="Permalink to this headline">¶</a></h2>
<p>Chris Webber on &#8220;Why WSGI Minimalism&#8221;:</p>
<blockquote>
<p>If you notice in the technology list above, I list a lot of
components that are very <a class="reference external" href="http://www.djangoproject.com/">Django Project</a>, but not actually
Django components.  What can I say, I really like a lot of the
ideas in Django!  Which leads to the question: why not just use
Django?</p>
<p>While I really like Django&#8217;s ideas and a lot of its components, I
also feel that most of the best ideas in Django I want have been
implemented as good or even better outside of Django.  I could
just use Django and replace the templating system with Jinja2, and
the form system with wtforms, and the database with MongoDB and
MongoKit, but at that point, how much of Django is really left?</p>
<p>I also am sometimes saddened and irritated by how coupled all of
Django&#8217;s components are.  Loosely coupled yes, but still coupled.
WSGI has done a good job of providing a base layer for running
applications on and if you know how to do it yourself <a class="footnote-reference" href="#id3" id="id1">[1]</a>, it&#8217;s
not hard or many lines of code at all to bind them together
without any framework at all (not even say <a class="reference external" href="http://pylonshq.com/">Pylons</a>, <a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid/dev/">Pyramid</a>
or <a class="reference external" href="http://flask.pocoo.org/">Flask</a> which I think are still great projects, especially for
people who want this sort of thing but have no idea how to get
started).  And even at this already really early stage of writing
MediaGoblin, that glue work is mostly done.</p>
<p>Not to say I don&#8217;t think Django isn&#8217;t great for a lot of things.
For a lot of stuff, it&#8217;s still the best, but not for MediaGoblin,
I think.</p>
<p>One thing that Django does super well though is documentation.  It
still has some faults, but even with those considered I can hardly
think of any other project in Python that has as nice of
documentation as Django.  It may be worth learning some lessons on
documentation from Django <a class="footnote-reference" href="#id4" id="id2">[2]</a>, on that note.</p>
<p>I&#8217;d really like to have a good, thorough hacking-howto and
deployment-howto, especially in the former making some notes on
how to make it easier for Django hackers to get started.</p>
</blockquote>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="http://pythonpaste.org/webob/do-it-yourself.html">http://pythonpaste.org/webob/do-it-yourself.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://pycon.blip.tv/file/4881071/">http://pycon.blip.tv/file/4881071/</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="why-mongodb">
<h2>Why MongoDB<a class="headerlink" href="#why-mongodb" title="Permalink to this headline">¶</a></h2>
<p>Chris Webber on &#8220;Why MongoDB&#8221;:</p>
<blockquote>
<p>In case you were wondering, I am not a NOSQL fanboy, I do not go
around telling people that MongoDB is web scale.  Actually my
choice for MongoDB isn&#8217;t scalability, though scaling up really
nicely is a pretty good feature and sets us up well in case large
volume sites eventually do use MediaGoblin.  But there&#8217;s another
side of scalability, and that&#8217;s scaling down, which is important
for federation, maybe even more important than scaling up in an
ideal universe where everyone ran servers out of their own
housing.  As a memory-mapped database, MongoDB is pretty hungry,
so actually I spent a lot of time debating whether the inability
to scale down as nicely as something like SQL has with sqlite
meant that it was out.</p>
<p>But I decided in the end that I really want MongoDB, not for
scalability, but for flexibility.  Schema evolution pains in SQL
are almost enough reason for me to want MongoDB, but not quite.
The real reason is because I want the ability to eventually handle
multiple media types through MediaGoblin, and also allow for
plugins, without the rigidity of tables making that difficult.  In
other words, something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="s">&quot;Me talking until you are bored&quot;</span><span class="p">,</span>
 <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="s">&quot;blah blah blah&quot;</span><span class="p">,</span>
 <span class="s">&quot;media_type&quot;</span><span class="p">:</span> <span class="s">&quot;audio&quot;</span><span class="p">,</span>
 <span class="s">&quot;media_data&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s">&quot;length&quot;</span><span class="p">:</span> <span class="s">&quot;2:30&quot;</span><span class="p">,</span>
     <span class="s">&quot;codec&quot;</span><span class="p">:</span> <span class="s">&quot;OGG Vorbis&quot;</span><span class="p">},</span>
 <span class="s">&quot;plugin_data&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s">&quot;licensing&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s">&quot;license&quot;</span><span class="p">:</span> <span class="s">&quot;http://creativecommons.org/licenses/by-sa/3.0/&quot;</span><span class="p">}}}</span>
</pre></div>
</div>
<p>Being able to just dump media-specific information in a media_data
hashtable is pretty great, and even better is having a plugin
system where you can just let plugins have their own entire
key-value space cleanly inside the document that doesn&#8217;t interfere
with anyone else&#8217;s stuff.  If we were to let plugins to deposit
their own information inside the database, either we&#8217;d let plugins
create their own tables which makes SQL migrations even harder
than they already are, or we&#8217;d probably end up creating a table
with a column for key, a column for value, and a column for type
in one huge table called &#8220;plugin_data&#8221; or something similar.  (Yo
dawg, I heard you liked plugins, so I put a database in your
database so you can query while you query.)  Gross.</p>
<p>I also don&#8217;t want things to be too lose so that we forget or lose
the structure of things, and that&#8217;s one reason why I want to use
MongoKit, because we can cleanly define a much structure as we
want and verify that documents match that structure generally
without adding too much bloat or overhead (mongokit is a pretty
lightweight wrapper and doesn&#8217;t inject extra mongokit-specific
stuff into the database, which is nice and nicer than many other
ORMs in that way).</p>
</blockquote>
</div>
<div class="section" id="why-sphinx-for-documentation">
<h2>Why Sphinx for documentation<a class="headerlink" href="#why-sphinx-for-documentation" title="Permalink to this headline">¶</a></h2>
<p>Will Kahn-Greene on &#8220;Why Sphinx&#8221;:</p>
<blockquote>
<p>Sphinx is a fantastic tool for organizing documentation for a
Python-based project that makes it pretty easy to write docs that
are readable in source form and can be &#8220;compiled&#8221; into HTML, LaTeX
and other formats.</p>
<p>There are other doc systems out there, but given that GNU
MediaGoblin is being written in Python, it makes sense to use
Sphinx for now.</p>
</blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Design Decisions</a><ul>
<li><a class="reference external" href="#why-python">Why Python</a></li>
<li><a class="reference external" href="#why-wsgi-minimalism">Why WSGI Minimalism</a></li>
<li><a class="reference external" href="#why-mongodb">Why MongoDB</a></li>
<li><a class="reference external" href="#why-sphinx-for-documentation">Why Sphinx for documentation</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="installation.html"
                                  title="previous chapter">Installation</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/designdecisions.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">GNU MediaGoblin v0.1a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Chris Webber, et al.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>