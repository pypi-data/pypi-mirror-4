<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="admin_master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>ACR Administration Section</title>
  <style>
    #props_form {
        width: 300px;
    }
    
    #props_form form {
        margin: 10px;
    }
    
    #translate_form {
        width: 400px;
    }
    
    #translate_form select {
        margin: 10px;
        margin-left: 2px;
        margin-right: 2px;
    }
    
    #translate_form span {
        margin-left: 10px;
    }
    
    #translate_btn {
        border:1px solid #CCCCCC;
        width:75px;
        background-color: #F5F5F5;
        font-size: 13px;
        cursor: pointer;
        
        padding: 2px;
        padding-left: 10px;
        padding-right: 10px;
        
        margin-right: 10px;
    }
    
    #contents_list {
        width: 95%;
        margin-left: auto;
        margin-right: auto;
        font-size: 13px;
    }
    
    #contents_list th {
        background-color: #EEEEEE;
    }
    
    #contents_list tr {
        background-color: #F5F5F5;
        text-align: center;
    }
    
    #content_form {
        width: 650px;
    }
    
    #content_form form {
        margin: 20px;
    }
    
    #content_form ul {
        list-style: none;
        padding: 0;
    }

    #clone_form {
        position: relative;
    }

    #clone_form form {
        position: absolute;
        display: none;
        border: 1px solid #CCCCCC;
        background-color: #FEFCF5;
        padding: 5px;
        top: 20;
        left: 0;
    }
  </style>
</head>

<body>
    <div class="toolbar">
        <a href="#slice_properties" class="objects_list_entry">Slice Properties</a>
        <a href="#manage_content" class="objects_list_entry">Revisions</a>
        <a py:if="slice.page" href="${h.acr_url('/admin/pages/edit', uid=slice.page.uid)}" 
           class="objects_list_entry">Back to Page Edit</a>
        <span id="clone_form">
            <a href="#" class="objects_list_entry" onclick="jQuery('#clone_form form').toggle(); return false;">Clone</a>
            ${clone_slice_form(value=prop_values, action=h.acr_url('/admin/slices/clone'))}
        </span>
    </div>

    <div class="section_box" id="slice_properties">
        <h1 class="title">Slice Properties</h1>
        <div id="props_form" class="section_icons">
            ${edit_slice_form(value=prop_values, action=h.acr_url('/admin/slices/update'))}
        </div>
    </div>

    <div class="section_box" id="manage_content">    
        <h1 class="title">Versions and Internationalization</h1>

        <table id="contents_list" class="section_icons">
            <tr>
                <th>Action</th>
                <th>Revision</th>
                <th>Date</th>
                <th>Language</th>
                <th>Author</th>
            </tr>
            <tr py:for="c, data in enumerate(slice.content.all_data)" class="${c % 2 and 'even' or 'odd'}">
                <td style="width: 1em;">
                    <a href="${h.acr_url('/admin/slices/edit_content', slice_uid=slice.uid, revision=data.uid)}"
                       class="objects_list_entry">edit</a>
                    <a py:if="slice.content.has_data_for_lang(data.lang) != data.revision"
                       href="${h.acr_url('/admin/slices/revert_content', uid=slice.uid, revision=data.uid)}"
                       onclick="return confirm('Do you really want to revert to this version?');" 
                       class="objects_list_entry">revert</a>
                </td>
                <td style="width: 1em;">${data.revision}</td>
                <td style="width: 1em;">${data.time.strftime('%Y-%m-%d %H:%M')}</td>
                <td style="width: 3em;">${data.lang}</td>
                <td style="width: 1em;">${data.author and data.author.user_name}</td>
            </tr>
        </table>
    </div>
</body>
</html>
