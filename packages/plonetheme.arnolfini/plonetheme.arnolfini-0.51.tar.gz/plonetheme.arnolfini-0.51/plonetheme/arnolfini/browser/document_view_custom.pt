
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>
<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
           tal:define="kssClassesView context/@@kss_field_decorator_view;
                       getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                       templateId template/getId;
                       text here/getText;
		       isAnon context/@@plone_portal_state/anonymous;
		       is_editable context/@@plone_context_state/is_editable;
		       toLocalizedTime nocall:context/@@plone/toLocalizedTime;">

      	<div tal:omit-tag="" id="continuousNav" tal:condition="python: context.portal_type == 'Media Event' or context.portal_type == 'Event'" tal:define="next python:view.getNextEvent();
							      prev python:view.getPrevEvent();">
	    <script tal:condition="python: next is not None" tal:content="python: 'var onSlodeshowSkipNext= %s;' % '\'%s\''%next.getURL()"></script>
	    <script tal:condition="python: prev is not None" tal:content="python: 'var onSlodeshowSkipPrev= %s;' % '\'%s\''%prev.getURL()"></script>
	    
	    <script tal:condition="python: next is None" tal:content="python: 'var onSlodeshowSkipNext= null;'"></script>
	    <script tal:condition="python: prev is None" tal:content="python: 'var onSlodeshowSkipPrev= null;'"></script>
	</div> 
                       
        <div tal:replace="structure provider:plone.abovecontenttitle" />
      
      <div class="hidden" style="display:none;"><tal:image replace="structure python:view.getLeadMediaTag(context, scale='fixwidth')"></tal:image></div>
			
      
      <tal:checkForSlideshowFolder condition="exists: context/slideshow">
          <tal:slideshow replace="structure python:view.slideshow(context['slideshow'])" tal:condition="python:'slideshow' in context and view.containsMedia(context['slideshow'])">
         </tal:slideshow>           
      </tal:checkForSlideshowFolder>
      
      <tal:block define="pressKit python: view.getPressKit(context)" condition="python: not isAnon and pressKit">
                        <a id="presskit_link" href="" tal:attributes="href pressKit/getURL">Press Kit available</a>
      </tal:block>
      
      <header>
            <h1 class="documentFirstHeading"> 
                <metal:field use-macro="python:here.widget('title', mode='view')">
                Title
                </metal:field>
            </h1>
            <div id="eventBooking" tal:condition="python: context.portal_type == 'Event' or context.portal_type == 'Media Event'">  
                  <p class="dates" tal:replace="structure python: view.getFormattedEventDate(context)">
                        Thursday 14 February 2013, 7.30 to 9.30pm
                  </p>
                  <p class="booking" tal:condition="python: context.getBooking() and not view.isEventPast(context)">
                        <span class="price" tal:condition="python: context.getPrice() != ''" tal:content="python: context.getPrice()">Free</span> <span class="arrow" tal:condition="python: context.getLink() != ''">&rarr;</span> <a href="" class="bookLink" tal:condition="python: context.getLink() != ''" tal:attributes="href python:view.getEventBookingLink(context)">Book</a>
                  </p>
            </div>
            
            <div class="addthis_toolbox addthis_default_style"
                        tal:define="item_url context/absolute_url"
			tal:attributes="addthis:url python:(context.portal_type == 'File' or context.portal_type == 'Image') and item_url + '/view' or item_url;
				        addthis:title context/Title;
				        addthis:description python:context.description is not None and context.description or view.trimText(context.text, 200, strip=True);">
                        <a class="addthis_button_facebook addthisButton">
                        </a>
                        <a class="addthis_button_twitter addthisButton">
                        </a>
                        <a class="addthis_button_pinterest addthisButton">
                        </a>
                        <a class="addthis_button_more addthisButton">
                        </a>
                  </div>
      </header>
      
      
      
      <section>
            <div class="pageWrapper">
                  
                  <p class="documentDescription">
                      <metal:field use-macro="python:here.widget('description', mode='view')">
                      Description
                      </metal:field>
                  </p>
                  
                  <div tal:replace="structure provider:plone.abovecontentbody" />
                
                  <div class="newsImageContainer"
                       tal:condition="context/getImage|nothing">
                       <!-- tal:attributes="href string:$here_url/image_large" to add the link -->
                      <a href="#"
                         tal:define="here_url context/@@plone_context_state/object_url;"
                         id="parent-fieldname-image">
                         <img tal:replace="structure python: context.tag(scale='preview', css_class='newsImage')" src="" alt="" />
                      </a>
                      <p class="discreet" tal:condition="context/imageCaption|nothing">
                        <metal:field use-macro="python:context.widget('imageCaption', mode='view')">
                        Image Caption
                        </metal:field>
                      </p>
                  </div>
                  
                  <span class="relatedContentList" tal:condition="python: len(view.getTwoWayRelatedContentOfType(['Media Person', 'Media Organization'])) > 0 and (context.portal_type == 'Media Event' or context.portal_type == 'Event' )">
                      With: <tal:relatedContent replace="structure python: view.getContentAsLinks(view.getTwoWayRelatedContentOfType(['Media Person', 'Media Organization']))">
                            Artist1, artist2, artist3
                      </tal:relatedContent>
                  </span>
                  
                  <p tal:condition="python: not text and is_editable"
                     i18n:translate="no_body_text"
                     class="discreet">
                      This item does not have any body text, click the edit tab to change it.
                  </p>
          
                  <metal:field use-macro="python:here.widget('text', mode='view')">
                  Body text
                  </metal:field>
            </div>
    </section>
    <script type="text/javascript">
	    var addthis_config = {"data_track_clickback":true};
	    var addthis_share = {templates: { twitter: '{{title}}: {{url}}' }}
    </script>
    <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=intk"></script>
    </tal:main-macro>
</metal:main>

</body>
</html>