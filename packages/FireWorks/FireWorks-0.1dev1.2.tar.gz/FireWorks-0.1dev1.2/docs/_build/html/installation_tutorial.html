
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation Tutorial (part 1: the Server) &mdash; FireWorks 0.1dev1.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1dev1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FireWorks 0.1dev1.2 documentation" href="index.html" />
    <link rel="next" title="Installation Tutorial (part 2: the Worker)" href="installation_tutorial_pt2.html" />
    <link rel="prev" title="Features" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_tutorial_pt2.html" title="Installation Tutorial (part 2: the Worker)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Features"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FireWorks 0.1dev1.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-tutorial-part-1-the-server">
<h1>Installation Tutorial (part 1: the Server)<a class="headerlink" href="#installation-tutorial-part-1-the-server" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will guide you through FireWorks installation on the central server. The purpose of this tutorial is to get you set up as quickly as possible; it isn&#8217;t intended to demonstrate the features of FireWorks or explain things in great detail.</p>
<p>This tutorial can be safely completed from the command line, and requires no programming.</p>
<div class="section" id="set-up-the-central-server-fireserver">
<h2>Set up the central server (FireServer)<a class="headerlink" href="#set-up-the-central-server-fireserver" title="Permalink to this headline">¶</a></h2>
<p>The FireWorks central server (FireServer) hosts the FireWorks database. For production, you should choose a central server that has a fixed IP address/hostname so that you can connect to it from other machines reliably. For initially testing the installation, it should be OK to use a laptop or workstation with a dynamic IP. To set up a FireServer:</p>
<ol class="arabic">
<li><p class="first">Follow the instructions listed at <a class="reference internal" href="installation.html"><em>Basic FireWorks Installation</em></a>.</p>
</li>
<li><p class="first">Install <a class="reference external" href="http://www.mongodb.org">MongoDB</a> on the server.</p>
</li>
<li><p class="first">Start MongoDB:</p>
<div class="highlight-python"><pre>mongod &amp;</pre>
</div>
</li>
</ol>
<p>You are now ready to start playing with FireWorks!</p>
<div class="section" id="initialize-the-fireserver">
<h3>Initialize the FireServer<a class="headerlink" href="#initialize-the-fireserver" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Navigate to the FireWorks installation tutorial directory:</p>
<div class="highlight-python"><pre>cd &lt;INSTALL_DIR&gt;/fw_tutorials/installation</pre>
</div>
</li>
</ol>
<p>where &lt;INSTALL_DIR&gt; is your FireWorks installation directory.</p>
<ol class="arabic" start="2">
<li><p class="first">Initialize the FireWorks database:</p>
<div class="highlight-python"><pre>launchpad_run.py initialize &lt;TODAY'S DATE&gt;</pre>
</div>
</li>
</ol>
<p>where &lt;TODAY&#8217;S DATE&gt; is formatted like &#8216;2012-12-31&#8217; (this serves as a safeguard to accidentally overwriting an existing database).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are already curious about the various options that the LaunchPad offers, you can type <tt class="docutils literal"><span class="pre">launchpad_run.py</span> <span class="pre">-h</span></tt>.</p>
</div>
</div>
<div class="section" id="add-a-firework-to-the-fireserver-database">
<h3>Add a FireWork to the FireServer database<a class="headerlink" href="#add-a-firework-to-the-fireserver-database" title="Permalink to this headline">¶</a></h3>
<p>A FireWork is a computing job. For this tutorial, we will use a FireWork that consists of only a single step. We&#8217;ll tackle more complex workflows in other tutorials.</p>
<ol class="arabic">
<li><p class="first">Staying in the tutorial directory, run the following command:</p>
<div class="highlight-python"><pre>launchpad_run.py insert_single_fw fw_test.yaml</pre>
</div>
</li>
<li><p class="first">Confirm that the FireWork got added to the database:</p>
<div class="highlight-python"><pre>launchpad_run.py get_fw 1</pre>
</div>
</li>
</ol>
<p>This prints out the FireWork with <tt class="docutils literal"><span class="pre">fw_id</span></tt> = 1 (the first FireWork entered into the database):</p>
<div class="highlight-python"><pre>{
   "fw_id": 1,
   "launch_data": [],
   "spec": {
       "_tasks": [
           {
               "_fw_name": "Subprocess Task",
               "parameters": {
                   "use_shell": true,
                   "script": "echo \"howdy, your job launched successfully!\" &gt;&gt; howdy.txt"
               }
           }
       ]
   },
   "state": "READY"</pre>
</div>
<p>}</p>
<p>Our <tt class="docutils literal"><span class="pre">fw_test.yaml</span></tt> file had specified a negative <tt class="docutils literal"><span class="pre">fw_id</span></tt> of -1; a negative <tt class="docutils literal"><span class="pre">fw_id</span></tt> means that the database will assign the id for us, starting from <tt class="docutils literal"><span class="pre">fw_id</span></tt> = 1.</p>
<p>Notice the part of the FireWork that reads: <tt class="docutils literal"><span class="pre">echo</span> <span class="pre">&quot;howdy,</span> <span class="pre">your</span> <span class="pre">job</span> <span class="pre">launched</span> <span class="pre">successfully!&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">howdy.txt&quot;</span></tt>. When the job is run, this is the command that will be executed (print some text into a file named <tt class="docutils literal"><span class="pre">howdy.txt</span></tt>). The <tt class="docutils literal"><span class="pre">use_shell</span></tt> parameter indicates that the command will be interpreted through the shell.</p>
<p>You have now stored a FireWork in the database! It is now ready to be launched (state = <tt class="docutils literal"><span class="pre">READY</span></tt>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More details on using the <tt class="docutils literal"><span class="pre">SubProcessTask</span></tt> are presented in the later tutorials.</p>
</div>
</div>
</div>
<div class="section" id="launch-a-rocket-on-the-fireserver">
<h2>Launch a Rocket on the FireServer<a class="headerlink" href="#launch-a-rocket-on-the-fireserver" title="Permalink to this headline">¶</a></h2>
<p>A Rocket fetches a FireWork from the FireServer database and runs it. A Rocket might be run on a separate machine (FireWorker) and through a queuing system. For now, we will run the Rocket on the FireServer itself and without a queue.</p>
<ol class="arabic">
<li><p class="first">Navigate to any clean directory. For example:</p>
<div class="highlight-python"><pre>mkdir ~/fw_tests
cd ~/fw_tests</pre>
</div>
</li>
<li><p class="first">Execute the following command (once):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rocket_run</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
</ol>
<p>The Rocket fetches an available FireWork from the FireServer and runs it.</p>
<ol class="arabic" start="3">
<li><p class="first">Verify that the desired task ran:</p>
<div class="highlight-python"><pre>cat howdy.txt</pre>
</div>
</li>
</ol>
<p>You should see the text: <tt class="docutils literal"><span class="pre">howdy,</span> <span class="pre">your</span> <span class="pre">job</span> <span class="pre">launched</span> <span class="pre">successfully!</span></tt></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In addition to <tt class="docutils literal"><span class="pre">howdy.txt</span></tt>, you should also see a file called <tt class="docutils literal"><span class="pre">fw.json</span></tt>. This contains a JSON representation of the FireWork that the Rocket ran.</p>
</div>
<ol class="arabic" start="4">
<li><p class="first">Check the status of your FireWork:</p>
<div class="highlight-python"><pre>launchpad_run.py get_fw 1</pre>
</div>
</li>
</ol>
<p>You will now see lots of information about your Rocket launch, such as the time and directory of the launch. You should also notice that the state of the FireWork is now <tt class="docutils literal"><span class="pre">COMPLETED</span></tt>.</p>
<ol class="arabic" start="5">
<li><p class="first">Try launching another rocket (you should get an error):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rocket_run</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
</ol>
<p>The error <tt class="docutils literal"><span class="pre">No</span> <span class="pre">FireWorks</span> <span class="pre">are</span> <span class="pre">ready</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">and</span> <span class="pre">match</span> <span class="pre">query!</span></tt> indicates that the Rocket tried to fetch a FireWork from the database, but none could be found. Indeed, we had previously run the only FireWork that was in the database.</p>
</div>
<div class="section" id="launch-many-rockets-loop-mode">
<h2>Launch many Rockets (loop mode)<a class="headerlink" href="#launch-many-rockets-loop-mode" title="Permalink to this headline">¶</a></h2>
<p>If you just want to run lots of Rockets on the central server itself, the simplest way is to run in &#8220;loop mode&#8221;. Let&#8217;s try this feature:</p>
<ol class="arabic">
<li><p class="first">Staying in your working directory from last time, clean up your output files:</p>
<div class="highlight-python"><pre>rm fw.json howdy.txt</pre>
</div>
</li>
<li><p class="first">Let&#8217;s reset the database and insert 3 identical FireWorks:</p>
<div class="highlight-python"><pre>launchpad_run.py initialize &lt;TODAY'S DATE&gt;
launchpad_run.py insert_single_fw fw_test.yaml
launchpad_run.py insert_single_fw fw_test.yaml
launchpad_run.py insert_single_fw fw_test.yaml</pre>
</div>
</li>
<li><p class="first">Confirm that the three FireWorks got added to the database:</p>
<div class="highlight-python"><pre>launchpad_run.py get_fw_ids</pre>
</div>
</li>
<li><p class="first">Let&#8217;s run launch Rockets in &#8220;loop&#8221; mode, which will keep repeating until we run out of FireWorks and get the <tt class="docutils literal"><span class="pre">No</span> <span class="pre">FireWorks</span> <span class="pre">are</span> <span class="pre">ready</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">and</span> <span class="pre">match</span> <span class="pre">query!</span></tt> error:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rocket_run</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">loop</span>
</pre></div>
</div>
</li>
</ol>
<p>You should see three directories starting with the tag <tt class="docutils literal"><span class="pre">launcher_</span></tt>. Inside each of these directories, you&#8217;ll find the results of one of your FireWorks.</p>
<ol class="arabic" start="5">
<li><p class="first">Finally, let&#8217;s check the launch state of your third FireWork:</p>
<div class="highlight-python"><pre>launchpad_run.py get_fw 3</pre>
</div>
</li>
</ol>
<p>You&#8217;ll see the launch information on that FireWork, including the directory where it ran.</p>
</div>
<div class="section" id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>At this point, you&#8217;ve successfully stored a simple job in a database and run it later on command. You even executed multiple jobs with a single command: <tt class="docutils literal"><span class="pre">rocket_run.py</span> <span class="pre">--loop</span></tt>. This should give a basic feeling of how you can automate many jobs with FireWorks. It might be a good time to get a snack!</p>
<p>Your next step depends on your application. If you want to stick with our simple script and automate it on at least one worker node (perhaps through a queuing system), forge on to the next tutorial in the series: <a class="reference internal" href="installation_tutorial_pt2.html"><em>Installation (part 2)</em></a>. This is the path we recommend for most users, except in the simplest of circumstances in which you don&#8217;t expect to ever have any worker nodes.</p>
<p>If you don&#8217;t want to set up worker nodes and instead want to learn how more complex jobs are defined, you can skip ahead to <a class="reference internal" href="firetask_tutorial.html"><em>defining jobs using FireTasks</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation Tutorial (part 1: the Server)</a><ul>
<li><a class="reference internal" href="#set-up-the-central-server-fireserver">Set up the central server (FireServer)</a><ul>
<li><a class="reference internal" href="#initialize-the-fireserver">Initialize the FireServer</a></li>
<li><a class="reference internal" href="#add-a-firework-to-the-fireserver-database">Add a FireWork to the FireServer database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#launch-a-rocket-on-the-fireserver">Launch a Rocket on the FireServer</a></li>
<li><a class="reference internal" href="#launch-many-rockets-loop-mode">Launch many Rockets (loop mode)</a></li>
<li><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Features</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installation_tutorial_pt2.html"
                        title="next chapter">Installation Tutorial (part 2: the Worker)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installation_tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_tutorial_pt2.html" title="Installation Tutorial (part 2: the Worker)"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Features"
             >previous</a> |</li>
        <li><a href="index.html">FireWorks 0.1dev1.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Anubhav Jain.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>