<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="collective.validator.base">
    <body>
        <metal:main fill-slot="main"
               tal:define="plone_view context/@@plone;
                		   toLocalizedTime nocall:plone_view/toLocalizedTime;
						   items view/getResults;
                   		   batch_base_url string:$portal_url/portal_validationtool/folder_report;
                   		   Batch python:modules['Products.CMFPlone'].Batch;
                   		   b_size python:15;
                   		   b_start python:0;
                   		   b_start request/b_start | b_start;">     
        <a href=""
            class="link-parent"
            tal:attributes="href python: here.aq_parent.absolute_url()+'/portal_validationtool'">
            <span i18n:translate="up_to_validationtool_settings">Return to ValidationTool settings</span>
        </a>

        
        <div tal:condition="items"
             tal:define="batch python:Batch(items, b_size, int(b_start), orphan=1);">

        <h1 i18n:translate="report_list">Report List</h1>
        <form action=""
              name="data_report"
              method="post"
              tal:attributes="action string:folder_report">
            <div metal:use-macro="here/batch_macros/macros/navigation" />
                <table class="listing" border="1" width="100%">
                    <thead>
                        <tr>
                            <th colspan=4 class="nosort" tal:condition="view/is_selected_all">
                            <span i18n:translate="deselect_all">Deselect: </span>
                            <a tal:attributes="href python: here.aq_parent.absolute_url()+'/portal_validationtool/folder_report?select=none'">
                            <span i18n:translate="all">all</span></a>
                            </th>

                            <th colspan=4 class="nosort" tal:condition="not:view/is_selected_all">
                            <span i18n:translate="select_all">Select: </span>
                            <a tal:attributes="href python: here.aq_parent.absolute_url()+'/portal_validationtool/folder_report?select=all'">
                            <span i18n:translate="all">all</span></a>
                            </th>
                        </tr>
                        <tr>
                            <th class="nosort"></th>
                            <th i18n:translate="table_title" class="nosort">Title</th>
                            <th i18n:translate="table_date" class="nosort">Date</th>
                            <th i18n:translate="table_valid" class="nosort">Valid</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tal:block tal:repeat="item batch">
                            <tr metal:define-macro="listitem">
                                <td style="text-align:center;">
                                    <input name="del:list" type="checkbox" value="" tal:attributes="value item/getId;
                                                                                                    checked view/is_selected_all"/>
                                </td>
                                <td><a href="" tal:attributes="href item/getPath"><span tal:content="item/Title"></span></a></td>
                                <td><span tal:content="python:toLocalizedTime(item.created) + ' - ' + item.created.Time()"/></td>
                                <td style="text-align:center;"><img tal:attributes="src python:view.getValidityIcon(item)" alt="Report Page"></td>
                            </tr>
                        </tal:block>
                    </tbody>
            </table>
            <input i18n:attributes="value table_delete_button" value="Delete" type="submit" class="context" name="submit"/>
        </form>
        </div>
            
        </metal:main>
    </body>
</html>
