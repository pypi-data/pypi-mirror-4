{% comment %} XXX TODO JMG : never use {{ content.id }} ad css id >> need also some refactoring in comment.js  {% endcomment %}
{% load i18n %}
{% with content.comments.count as comment_count %}
<li
  {% if comment_count > 2 %}
      class="view-all-comments"
  {% else %}
      {% if content.publisher.can_publish and  not comment_count %}
          class="add-comment"
      {% else %}
          class="few-comments"
      {% endif %}
  {% endif %}
    >
    <span class="comment_count">{% blocktrans %}<strong>{{comment_count}}</strong> comments{% endblocktrans %}</span>
    <span class="comment_ui" id="view{{ content.id }}">
        <a  id="{{ content.id }}"
            class="view_comments"
            {% if comment_count > 2 %}
              title="{% blocktrans %}View all {{comment_count}} comments{% endblocktrans %}"
            {% else %}
                {% if content.publisher.can_publish and  not comment_count %}
                    title="{% blocktrans %}Comment{% endblocktrans %}"
                {% endif %}
            {% endif %}
            href="#">&nbsp;</a>
    </span>
</li>
{% endwith %}