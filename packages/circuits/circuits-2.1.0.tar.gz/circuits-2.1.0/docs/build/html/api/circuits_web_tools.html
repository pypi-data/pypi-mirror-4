
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38618352-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>circuits.web.tools – Tools &mdash; circuits 2.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="circuits 2.1.0 documentation" href="../index.html" />
    <link rel="up" title="circuits.web – Web Framework" href="circuits_web.html" />
    <link rel="next" title="circuits.web.utils – Utilities" href="circuits_web_utils.html" />
    <link rel="prev" title="circuits.web.sessions – Sessions" href="circuits_web_sessions.html" />
 
<script type="text/javascript" src="../templatebuiltins.js"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>

  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">circuits 2.1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="circuits_web_sessions.html" title="&lt;tt class=&#34;docutils literal docutils literal docutils literal&#34;&gt;&lt;span class=&#34;pre&#34;&gt;circuits.web.sessions&lt;/span&gt;&lt;/tt&gt; &amp;#8211; Sessions">previous</a> 
     |
    <a href="index.html" title="API Reference" accesskey="U">up</a>
   |
    <a href="circuits_web_utils.html" title="&lt;tt class=&#34;docutils literal&#34;&gt;&lt;span class=&#34;pre&#34;&gt;circuits.web.utils&lt;/span&gt;&lt;/tt&gt; &amp;#8211; Utilities">next</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="api-circuits_web_tools">
            
  <div class="section" id="module-circuits.web.tools">
<span id="circuits-web-tools-tools"></span><h1><a class="reference internal" href="#module-circuits.web.tools" title="circuits.web.tools"><tt class="xref py py-mod docutils literal"><span class="pre">circuits.web.tools</span></tt></a> &#8211; Tools<a class="headerlink" href="#module-circuits.web.tools" title="Permalink to this headline">¶</a></h1>
<p>Tools</p>
<p>This module implements tools used throughout circuits.web.
These tools can also be used within Controlelrs and request handlers.</p>
<div class="section" id="events">
<h2>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h2>
<p><strong>none</strong></p>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<p><strong>none</strong></p>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="circuits.web.tools.basic_auth">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">basic_auth</tt><big>(</big><em>request</em>, <em>response</em>, <em>realm</em>, <em>users</em>, <em>encrypt=None</em><big>)</big><a class="headerlink" href="#circuits.web.tools.basic_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Basic Authentication</p>
<p>If auth fails, returns an Unauthorized error  with a
basic authentication header.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>realm</strong> (<em>str</em>) &#8211; The authentication realm.</li>
<li><strong>users</strong> (<em>dict or callable</em>) &#8211; A dict of the form: {username: password} or a callable
returning a dict.</li>
<li><strong>encrypt</strong> (<em>callable</em>) &#8211; Callable used to encrypt the password returned from
the user-agent. if None it defaults to a md5 encryption.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.check_auth">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">check_auth</tt><big>(</big><em>request</em>, <em>response</em>, <em>realm</em>, <em>users</em>, <em>encrypt=None</em><big>)</big><a class="headerlink" href="#circuits.web.tools.check_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Check Authentication</p>
<p>If an authorization header contains credentials, return True, else False.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>realm</strong> (<em>str</em>) &#8211; The authentication realm.</li>
<li><strong>users</strong> (<em>dict or callable</em>) &#8211; A dict of the form: {username: password} or a callable
returning a dict.</li>
<li><strong>encrypt</strong> (<em>callable</em>) &#8211; Callable used to encrypt the password returned from
the user-agent. if None it defaults to a md5 encryption.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.digest_auth">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">digest_auth</tt><big>(</big><em>request</em>, <em>response</em>, <em>realm</em>, <em>users</em><big>)</big><a class="headerlink" href="#circuits.web.tools.digest_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Digest Authentication</p>
<p>If auth fails, raise 401 with a digest authentication header.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>realm</strong> (<em>str</em>) &#8211; The authentication realm.</li>
<li><strong>users</strong> (<em>dict or callable</em>) &#8211; A dict of the form: {username: password} or a callable
returning a dict.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.expires">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">expires</tt><big>(</big><em>request</em>, <em>response</em>, <em>secs=0</em>, <em>force=False</em><big>)</big><a class="headerlink" href="#circuits.web.tools.expires" title="Permalink to this definition">¶</a></dt>
<dd><p>Tool for influencing cache mechanisms using the &#8216;Expires&#8217; header.</p>
<p>&#8216;secs&#8217; must be either an int or a datetime.timedelta, and indicates the
number of seconds between response.time and when the response should
expire. The &#8216;Expires&#8217; header will be set to (response.time + secs).</p>
<p>If &#8216;secs&#8217; is zero, the &#8216;Expires&#8217; header is set one year in the past, and
the following &#8220;cache prevention&#8221; headers are also set:
- &#8216;Pragma&#8217;: &#8216;no-cache&#8217;
- &#8216;Cache-Control&#8217;: &#8216;no-cache, must-revalidate&#8217;</p>
<p>If &#8216;force&#8217; is False (the default), the following headers are checked:
&#8216;Etag&#8217;, &#8216;Last-Modified&#8217;, &#8216;Age&#8217;, &#8216;Expires&#8217;. If any are already present,
none of the above response headers are set.</p>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.gzip">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">gzip</tt><big>(</big><em>response, level=4, mime_types=['text/html', 'text/plain']</em><big>)</big><a class="headerlink" href="#circuits.web.tools.gzip" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to gzip the response body if Content-Type in mime_types.</p>
<p>response.headers[&#8216;Content-Type&#8217;] must be set to one of the
values in the mime_types arg before calling this function.</p>
<dl class="docutils">
<dt>No compression is performed if any of the following hold:</dt>
<dd><ul class="first last simple">
<li>The client sends no Accept-Encoding request header</li>
<li>No &#8216;gzip&#8217; or &#8216;x-gzip&#8217; is present in the Accept-Encoding header</li>
<li>No &#8216;gzip&#8217; or &#8216;x-gzip&#8217; with a qvalue &gt; 0 is present</li>
<li>The &#8216;identity&#8217; value is given with a qvalue &gt; 0.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.serve_download">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">serve_download</tt><big>(</big><em>request</em>, <em>response</em>, <em>path</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#circuits.web.tools.serve_download" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve &#8216;path&#8217; as an application/x-download attachment.</p>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.serve_file">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">serve_file</tt><big>(</big><em>request</em>, <em>response</em>, <em>path</em>, <em>type=None</em>, <em>disposition=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#circuits.web.tools.serve_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Set status, headers, and body in order to serve the given file.</p>
<p>The Content-Type header will be set to the type arg, if provided.
If not provided, the Content-Type will be guessed by the file extension
of the &#8216;path&#8217; argument.</p>
<p>If disposition is not None, the Content-Disposition header will be set
to &#8220;&lt;disposition&gt;; filename=&lt;name&gt;&#8221;. If name is None, it will be set
to the basename of path. If disposition is None, no Content-Disposition
header will be written.</p>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.validate_etags">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">validate_etags</tt><big>(</big><em>request</em>, <em>response</em>, <em>autotags=False</em><big>)</big><a class="headerlink" href="#circuits.web.tools.validate_etags" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the current ETag against If-Match, If-None-Match headers.</p>
<p>If autotags is True, an ETag response-header value will be provided
from an MD5 hash of the response body (unless some other code has
already provided an ETag header). If False (the default), the ETag
will not be automatic.</p>
<p>WARNING: the autotags feature is not designed for URL&#8217;s which allow
methods other than GET. For example, if a POST to the same URL returns
no content, the automatic ETag will be incorrect, breaking a fundamental
use for entity tags in a possibly destructive fashion. Likewise, if you
raise 304 Not Modified, the response body will be empty, the ETag hash
will be incorrect, and your application will break.
See <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24</a></p>
</dd></dl>

<dl class="function">
<dt id="circuits.web.tools.validate_since">
<tt class="descclassname">circuits.web.tools.</tt><tt class="descname">validate_since</tt><big>(</big><em>request</em>, <em>response</em><big>)</big><a class="headerlink" href="#circuits.web.tools.validate_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the current Last-Modified against If-Modified-Since headers.</p>
<p>If no code has set the Last-Modified response header, then no validation
will be performed.</p>
</dd></dl>

</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">circuits.web.tools</span></tt> &#8211; Tools</a><ul>
<li><a class="reference internal" href="#events">Events</a></li>
<li><a class="reference internal" href="#components">Components</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>

  <h3>Browse</h3>
  <ul>
    
      <li>Prev: <a href="circuits_web_sessions.html"><tt class="docutils literal docutils literal docutils literal"><span class="pre">circuits.web.sessions</span></tt> &#8211; Sessions</a></li>
    
    
      <li>Next: <a href="circuits_web_utils.html"><tt class="docutils literal"><span class="pre">circuits.web.utils</span></tt> &#8211; Utilities</a></li>
    
  </ul>
  <h3>You are here:</h3>
  <ul>
      <li>
        <a href="../index.html">circuits 2.1.0 documentation</a>
        
          <ul><li><a href="index.html">API Reference</a>
        
          <ul><li><a href="circuits_web.html"><tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">circuits.web</span></tt> &#8211; Web Framework</a>
        
        <ul><li><tt class="docutils literal docutils literal"><span class="pre">circuits.web.tools</span></tt> &#8211; Tools</li></ul>
        </li></ul></li></ul>
      </li>
  </ul>  

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/api/circuits_web_tools.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="circuits_web_sessions.html" title="&lt;tt class=&#34;docutils literal docutils literal docutils literal&#34;&gt;&lt;span class=&#34;pre&#34;&gt;circuits.web.sessions&lt;/span&gt;&lt;/tt&gt; &amp;#8211; Sessions">previous</a> 
     |
    <a href="index.html" title="API Reference" accesskey="U">up</a>
   |
    <a href="circuits_web_utils.html" title="&lt;tt class=&#34;docutils literal&#34;&gt;&lt;span class=&#34;pre&#34;&gt;circuits.web.utils&lt;/span&gt;&lt;/tt&gt; &amp;#8211; Utilities">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>