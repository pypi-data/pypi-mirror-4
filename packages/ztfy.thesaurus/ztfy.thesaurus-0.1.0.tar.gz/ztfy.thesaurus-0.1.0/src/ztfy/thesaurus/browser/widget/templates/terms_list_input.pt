<input type="text"
	tal:attributes="id view/id;
					name view/name;
					class view/klass;
					style view/style;
					title view/title;
					value view/value;
					lang view/lang;
					onclick view/onclick;
					ondblclick view/ondblclick;
					onmousedown view/onmousedown;
					onmouseup view/onmouseup;
					onmouseover view/onmouseover;
					onmousemove view/onmousemove;
					onmouseout view/onmouseout;
					onkeypress view/onkeypress;
					onkeydown view/onkeydown;
					onkeyup view/onkeyup;
					disabled view/disabled;
					tabindex view/tabindex;
					onfocus view/onfocus;
					onblur view/onblur;
					onchange view/onchange;
					readonly view/readonly;
					accesskey view/accesskey;
					onselect view/onselect;" />
<input name="field-empty-marker" type="hidden" value="1"
	   tal:attributes="name string:${view/name}-empty-marker" />
<script type="text/javascript" tal:content="string:
	$$().ready(function() {
		$$('INPUT[id=${view/id}]').multiselect({
			input_class: 'directory',
			separator: '|',
			min_query_length: 3,
			on_search: function(query) {
				return $$.ZTFY.thesaurus.findTerms(query, '${view/thesaurus_name}', '${view/extract_name}');
			},
			max_complete_results: 20,
			enable_new_options: false,
			complex_search: false
		});
	});">
</script>