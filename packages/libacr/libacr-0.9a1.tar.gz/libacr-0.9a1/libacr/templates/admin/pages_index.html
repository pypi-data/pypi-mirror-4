<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="admin_master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>ACR Administration Section</title>
  <style>
    #create_form {
        width: 300px;
    }
    
    #create_form form {
        margin: 10px;
    }
    
    #pages_list {
        width: 95%;
        margin-left: auto;
        margin-right: auto;
        font-size: 13px;
    }
    
    #pages_list a {
        text-decoration: none;
    }
    
    #pages_list th {
        background-color: #EEEEEE;
    }
    
    #pages_list tr {
        background-color: #F5F5F5;
        text-align: center;
    }  
  </style>
</head>

<body>
    <div class="toolbar">
        <a href="#new_page" class="objects_list_entry">New Page</a>
        <a href="#manage_pages" class="objects_list_entry">Manage Pages</a>
    </div>

    <div class="section_box" id="new_page">  
        <h1 class="title">Create New Empty Page</h1>
        <div id="create_form" class="section_icons">
            ${create_page_form(value=values, action=h.acr_url('/admin/pages/new'))}
        </div>
    </div>

    <div class="section_box" id="manage_pages">    
        <h1 class="title">Available Pages</h1>
        <table id="pages_list" class="section_icons">
            <tr>
                <th>Action</th>
                <th>Url</th>
                <th>Title</th>
                <th>Slices</th>
                <th>Languages</th>
                <th>Authors</th>
            </tr>
            <tr py:for="count, page in enumerate(pages)" class="${count % 2 and 'even' or 'odd'}">
                <td style="width: 1em;">
                    <a href="${h.acr_url('/admin/pages/edit', uid=page.uid)}" 
                       class="objects_list_entry">edit</a>
                    <a href="${h.acr_url('/admin/pages/delete', page_id=page.uid)}"      
                       onclick="return confirm('Do you really want to delete this page?');" 
                       class="objects_list_entry">delete</a>
                </td>
                <td style="width: 5em;">
                    <a href="${h.acr_url(page.url)}" target='_blank'>
                        ${h.acr_url(page.url)}
                    </a>
                </td>
                <td style="width: 10em;">${page.title}</td>
                <td style="width: 5em;">${', '.join((slice.name for slice in page.slices))}</td>
                <td style="width: 5em;">${', '.join(h.page_languages(page))}</td>
                <td style="width: 3em;">${', '.join(h.page_authors(page))}</td>
            </tr>
        </table>
    </div>
</body>
</html>
