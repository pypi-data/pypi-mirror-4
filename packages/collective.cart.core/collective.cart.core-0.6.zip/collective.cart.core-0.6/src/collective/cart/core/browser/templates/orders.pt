<html
  i18n:domain="collective.cart.core"
  lang="en"
  metal:use-macro="here/main_template/macros/master"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <body>
    <div metal:fill-slot="main">
      <h1 class="documentFirstHeading" i18n:translate="">Orders</h1>
      <div class="documentDescription" id="next-cart-id" i18n:translate="">
        The next cart ID: <span i18n:name="next_cart_id" tal:replace="view/cart_container/next_cart_id" />
      </div>
      <p
        i18n:translate=""
        id="no-orders"
        tal:condition="not: view/carts">
        There are no orders.
      </p>
      <section id="collective-cart-shopping-order-list" tal:condition="view/carts">
        <form
          id="clear-created"
          method="post"
          tal:attributes="action context/@@plone_context_state/current_base_url">
          <button
            i18n:translate=""
            name="form.buttons.ClearCreated"
            value="form.buttons.ClearCreated"
            type="submit">Clear Created</button>
        </form>
        <table class="listing" id="order-list">
          <thead>
            <tr>
              <th i18n:translate="">No.</th>
              <th i18n:translate="">Updated</th>
              <th i18n:translate="">Owner</th>
              <th i18n:translate="">State</th>
              <th i18n:translate="">Change State</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="item view/carts">
              <td class="cart-id">
                <a
                  tal:attributes="href item/url"
                  tal:content="item/id" />
              </td>
              <td class="cart-updated" tal:content="item/modified" />
              <td class="cart-owner" tal:content="item/owner" />
              <td class="cart-state" i18n:translate="" tal:content="item/state_title" />
              <td>
                <form
                  id="transition"
                  method="post"
                  tal:attributes="action context/@@plone_context_state/current_base_url">
                  <input name="cart-id" type="hidden" tal:attributes="value item/id" />
                  <tal:block tal:repeat="transition item/transitions">
                    <button
                      i18n:domain="plone"
                      i18n:translate=""
                      name="form.buttons.ChangeState"
                      tal:attributes="value transition/id"
                      tal:content="transition/name"
                      tal:condition="transition/available"
                      type="submit"></button>
                  </tal:block>
                  <button
                    i18n:domain="plone"
                    i18n:translate=""
                    name="form.buttons.RemoveCart"
                    value="form.buttons.RemoveCart"
                    tal:condition="item/is_canceled"
                    type="submit">Remove</button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
  </body>
</html>
