<tal:menu tal:define="menu_ids context/getMenuIds;">
<tal:page metal:use-macro="here/templates/macros/page2">
<tal:pane metal:fill-slot="contentPane">
<tal:msie define="msie python:'MSIE' in here.REQUEST.HTTP_USER_AGENT">

<tal:block tal:condition="not:msie">
    <script src="/zport/js/MochiKit.js"></script>
</tal:block>

<form method="post"  tal:attributes="action string:${request/URL1}">
<input type="hidden" name="zenScreenName" tal:attributes="value template/id"/>

<tal:block tal:define="props here/propertyMap;
                       tabletitle string:zProperties Configuration;">
<tal:block metal:use-macro="here/zenuimacros/macros/zentable">

<tal:block metal:fill-slot="zentablecontents">

<!-- BEGIN TABLE CONTENTS -->
    <tr>
      <th class="tableheader" align="center">Property</th>
      <th class="tableheader" align="center">Value</th>
      <th class="tableheader" align="center">Type</th>
      <th class="tableheader" align="center">Path</th>
    </tr>
    <tal:block tal:repeat="prop python: filter(lambda x: x['mode'] == 'w', props)"> 
    <tr tal:define="odd repeat/prop/odd;
                    pname prop/id;
                    ptype prop/type;
                    pvalue python:here.zenPropertyString(pname);
                    value python: here.getProperty(pname);
                    popts python:here.zenPropertyOptions(pname);"
        tal:attributes="class python:test(odd, 'odd', 'even')">
      <td class="tablevalues" valign="top" tal:content="pname">
        zPingInterfaceRegex
      </td>
      <td class="tablevalues" valign="top" tal:condition="python: not here.isManager(here)"
        tal:content="python: here.zenPropertyString(pname)"/>
      <td class="tablevalues" valign="top" tal:condition="python: here.isManager(here)">
            <span tal:condition="python: ptype=='boolean'">
                <select class="tablevalues" 
                    tal:attributes="name python:pname">
                    <option tal:repeat="e python:(True,False)" tal:content="e"
                    tal:attributes="value e; selected python:e==pvalue"/>
                </select>
            </span>
            <span tal:condition="python: ptype=='selection'">
                <select class="tablevalues" tal:attributes="name pname">
                    <option tal:define="function python: getattr(context, prop['select_variable'])"
                            tal:repeat="option function"
                            tal:content="option" tal:on-error="string:"
                            tal:attributes="selected python: test(value==option, 1, 0)"/>
                </select>
            </span>
            <span tal:condition="python: ptype=='multiple selection'">
                <select class="tablevalues"  multiple size="4"
                        tal:attributes="name string:${pname}:list">
                    <option tal:define="function python: getattr(context, prop['select_variable'])"
                            tal:repeat="option function"
                            tal:content="option"  tal:on-error="string:"
                            tal:attributes="selected python: test(option in value, 1, 0)"/>
                </select>
            </span>
	    <span tal:condition="python: ptype=='lines'">
		<tal:block tal:condition="python:msie or not popts">
		    <textarea class="tablevalues" rows='3' cols="33"
			tal:attributes="name python:pname+':'+ptype"
			tal:content="pvalue">
		    </textarea>        
		</tal:block>
		<!-- =========== swoopy sortable selector ============ -->
		<tal:block tal:condition="python:not msie and popts"
			   tal:define="ta python:'ta_' + pname;
				       ul python:'ul_' + pname;">
		<a tal:attributes="href string:${request/URL1}/zSortableProperty?prop=${pname}">
		    Edit
                </a>
		</tal:block>
		<!-- =========== swoopy sortable selector =============== -->
	    </span>
            <span tal:condition="python: here.zenPropIsPassword(pname)" >
            <input class="tablevalues" size="40" autocomplete="off" type="password"
                tal:attributes="value pvalue;name pname"/>
            </span>
            <span tal:condition="python: ptype not in ('boolean', 'lines', 'text', 'selection', 'multiple selection') and not here.zenPropIsPassword(pname)">
            <input class="tablevalues" 
	           tal:condition="not:popts"
	    	   type="text" size="40"
                tal:attributes="value pvalue;name pname"/>
            <select tal:condition="popts" 
	            class="tablevalues" 
	    	    tal:attributes="name pname">
		<option tal:repeat="e python:popts" tal:content="e"
		       tal:attributes="value e; selected python:e==pvalue"/>
            </select>
            </span>
      </td>
      <td class="tablevalues"  valign="top" tal:content="ptype">int</td>
      <td class="tablevalues"  valign="top"
        tal:content="python: here.zenPropertyPath(pname)"> 
        /Devices/Servers
      </td>
    </tr>
    </tal:block>
    <tr class="tableheader" tal:condition="python: here.isManager(here)">
    <td colspan="5">
        <input class="tableheader" type="submit" 
            name="saveZenProperties:method" value=" Save " />
    </td>
    </tr>
<!-- END TABLE CONTENTS -->

</tal:block>
</tal:block>
</tal:block>

</form>



</tal:msie>
</tal:pane>
</tal:page>
</tal:menu>
