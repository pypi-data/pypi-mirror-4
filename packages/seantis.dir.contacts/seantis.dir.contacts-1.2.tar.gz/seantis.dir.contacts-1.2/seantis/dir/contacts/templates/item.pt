<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="seantis.dir.contacts">
   
<body>

<metal:block fill-slot="head_slot">
  <metal:use use-macro="context/@@seantis-dir-macros/macros/openlayers"></metal:use>
</metal:block>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">
        <div tal:replace="structure provider:plone.abovecontenttitle" />
        <a tal:attributes="href python: context.get_parent().absolute_url() + '?reset=true'"><h1 class="documentFirstHeading" tal:content="python: context.get_parent().title" /></a>
        <div tal:replace="structure provider:plone.belowcontenttitle" />
        <div tal:replace="structure provider:plone.abovecontentbody" />
        
        <div id="directoryDetails">

            <div class="directoryTypes" tal:condition="context/cat1" tal:content="python: ', '.join(context.cat1)"></div>

            <h2>
                <tal:block content="context/title" />
            </h2>
            
            <div id="directoryResultList">
             <div class="directoryInfoText">
                <div class="directoryInfoImage" tal:condition="context/image">
                    <img tal:replace="structure context/@@images/image/thumb" />
                </div>
                <div class="documentDescription">
                    <div><div tal:content="structure context/html_description"></div></div>
                </div>
                <div class="categoryTypes" content="python: ', '.join(context.cat1)"></div>
                <div class="directoryDates">
                    <p>
                        <span tal:content="context/street" /><br />
                        <span tal:content="context/zipcode" /> <span tal:content="context/city" />
                    </p>
                    <p>
                        <span i18n:translate="Phone" tal:condition="context/phone">Phone</span> <span tal:content="context/phone" /><br />
                        <span i18n:translate="Fax" tal:condition="context/fax">Fax</span> <span tal:content="context/fax" />
                    </p>  
                    <p>
                        <a tal:condition="python: hasattr(context, 'email')" tal:attributes="href python: 'mailto:' + (context.email or '')">
                            <span tal:replace="context/email" />
                        </a><br />
                        <a tal:condition="python: hasattr(context, 'url')" tal:attributes="href context/url">
                            <span tal:replace="context/url" />
                        </a>
                    </p>                    
                    <p tal:condition="context/opening_hours"><span i18n:translate="Opening Hours" />: <span tal:content="structure view/html_opening_hours" /></p>
                    <div tal:condition="python: hasattr(context, 'information') and context.information">
                        <p tal:content="structure context/information"></p>
                    </div>
                </div>
              </div>
            </div>

            <metal:use use-macro="context/@@seantis-dir-macros/macros/map"></metal:use>

        </div>

        <div id="directoryInfoPage" tal:condition="view/contacts">
            <h2 i18n:translate="Contact persons"></h2>
            <div class="directoryDetailsBlock" tal:repeat="contact view/contacts">
                <div class="directoryInfoText">
                    <div class="documentDescription">
                            <p>
                                <span tal:replace="contact/first_name" /> <span tal:replace="contact/last_name" /><br />
                                <span tal:condition="contact/function" tal:replace="contact/function" />
                            </p>
                            <div tal:condition="contact/image"><img tal:replace="structure contact/@@images/image/thumb" /></div>
                            
                     </div>

                    <p>
                        <span tal:condition="python: hasattr(contact, 'street')" tal:content="contact/street" /><br />
                        <span tal:condition="python: hasattr(contact, 'zipcode')" tal:content="contact/zipcode" /> <span tal:condition="python: hasattr(contact, 'town')" tal:content="contact/town" /><br />
                        <span i18n:translate="Phone" tal:condition="contact/phone">Phone</span> <span tal:condition="python: hasattr(contact, 'phone')" tal:content="contact/phone" /><br />
                        <span i18n:translate="Fax" tal:condition="contact/fax">Fax</span> <span tal:content="contact/fax" tal:condition="python: hasattr(contact, 'fax')"/><br />
                        <a tal:condition="python: hasattr(contact, 'email')" tal:attributes="href python: 'mailto:' + (contact.email or '')"><span tal:replace="contact/email" /></a><br />
                    </p>
                </div>
            </div>
        </div>

        <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>
</html>