<div metal:define-macro="portlet" tal:omit-tag="">

    <tal:block>

        <dl id="category-selector" class="portlet">

            <dd class="portletItemSingle odd" tal:define="selectedCategories request/Subject | nothing;
                                                          portal context/@@plone_portal_state/portal;">
                <div tal:condition="view/vtcExists">
                    <ul>
                         <li tal:repeat="vtcCat python:view.getVTCategories('/')">
                            <tal:block tal:condition="python: vtcCat.title == view.rootCategory">
                                 <div class="cn-category-title" tal:content="python: view.Title()">
                                     Title
                                 </div>
                                 
                                 <div class="cn-category-description" tal:content="python: view.Description()">
                                     description
                                 </div>
                                 
                                 <div class="mapNavigator" style="position:relative">
                                    <!-- img class="mapNavigatorPortletMap" src="++resource++collective.contentMapper.images/NoordHollandMap.png" / -->
                                    <img class="mapNavigatorPortletMap" src="NoordHollandMap.png" />
                                    <tal:block repeat="cat python:view.getAllKeywordsBelow('/'+vtcCat.id)">
                                        <tal:sizeDefinition define="markerImage python:view.getMarkerImage(view.howManyResults(cat))"> <!-- use getNumberOfResults(cat) for cached values -->
                                        <div class="marker" tal:attributes="style python: view.getPositionCSSFor(cat, markerImage)" tal:condition="python: markerImage != '0'">
                                            <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and view.generateQueryString([], subtracting=cat) or portal.absolute_url() + view.generateQueryString([], adding=cat);">
                                                <img src="" alt="" title=""
                                                     tal:attributes="alt cat;
                                                                    title cat;
                                                                    src markerImage;" />
                                            </a>
                                            <div style="position:relative">
                                                <!-- span class="tooltip" tal:content="cat" tal:attributes="style python:view.getTooltipPositionCSS(markerImage)">
                                                        Name
                                                </span -->
                                            </div>
                                        </div>
                                        </tal:sizeDefinition>
                                    </tal:block>
                                 </div>
                                 
                                 <!--ul>
                                     <li class="nc-category"
                                        tal:repeat="cat python:view.getAllKeywordsBelow('/'+vtcCat.id)"
                                        tal:attributes="class python:selectedCategories is not None and cat in selectedCategories and 'nc-category nc-category_selected' or 'nc-category'"
                                    >
                                         
                                         <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and portal.absolute_url() + view.generateQueryString([], subtracting=cat) or portal.absolute_url() + view.generateQueryString([], adding=cat)">
                                             <span tal:condition="python:selectedCategories is not None and cat in selectedCategories" tal:omit-tag="">
                                                 &gt;
                                             </span>
                                             <span tal:condition="python:selectedCategories is None or cat not in selectedCategories" tal:omit-tag="">
                                                    +
                                             </span>
                                             <span tal:content="cat">
                                                 category 
                                             </span> - <span tal:content="python: view.getXPosition(cat)"></span> x <span tal:content="python: view.getYPosition(cat)"></span> (<span tal:content="python: view.getMarkerImage(view.howManyResults(cat))"></span>) (<span tal:content="python: view.howManyResults(cat)"></span>)
                                         </a>
                                         
                                     </li>
                                 </ul -->
                            </tal:block>
                            
                         </li>
                    </ul>
                </div>
                
            </dd>

        </dl>

    </tal:block>

</div>