

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example 3: Staged Optimization &mdash; SWMM5-EA 0.9.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="SWMM5-EA 0.9.1.0 documentation" href="index.html" />
    <link rel="prev" title="Example 2: Calibration of Networks" href="Calibration of Networks.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Calibration of Networks.html" title="Example 2: Calibration of Networks"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">SWMM5-EA 0.9.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="example-3-staged-optimization">
<h1>Example 3: Staged Optimization<a class="headerlink" href="#example-3-staged-optimization" title="Permalink to this headline">Â¶</a></h1>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/stage_network.png"><img alt="Staged detention storage planning example." src="_images/stage_network.png" style="width: 347.2px; height: 270.2px;" /></a>
<p class="caption">Staged detention storage planning example.</p>
</div>
<p>This example demonstrates the use of SWMM5-EA in staged-optimization problems. The problem goes like this: In order to mitigate flooding in a drainage network
five detention storages are planned (The network and detention storage locations are exactly
same as <a class="reference internal" href="Simple Optimization.html#simple-example-label"><em>Example 1</em></a>. The planning horizon in 30 years and planning should be done to be implemented in 3 stages (Stage 0: start of the project, Stage 1: 10 years into the future and Stage 2: 20 years into the future). The design goal is the least cost detention storage with no flooding for the design rainstorm given. It is estimated that the impervious fraction in each watershed will increase by 10% during each 10 year stage. For simplicity it is assumed that all other parameters remain same (e.g. no climate change!) <a class="footnote-reference" href="#id2" id="id1">[1]</a>.</p>
<p>In staging problems, SWMM5-EA handles swmm input files in a very different way from other applications (e.g. Simple Optimization, Calibration). It duplicates the SWMM input file to <img class="math" src="_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/> copies (where <img class="math" src="_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/> is the number of stages). When the Insert Slots button is pressed (to edit place-holders), this process happens automatically and the place-holder dialog is filled with a compound file containing all these copies. Each swmm input file is separated by an entry similar to</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">;;;;;;;;</span>&nbsp; <span class="pre">STAGE</span> <span class="pre">2</span>&nbsp; <span class="pre">;;;;;;;;</span>&nbsp; <span class="pre">NOTE:</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">alter</span> <span class="pre">this</span> <span class="pre">line</span> <span class="pre">in</span> <span class="pre">anyway!</span> <span class="pre">;;;;;;;;;;;;;;;;;;;;</span></tt></div></blockquote>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/stage_place_holder.png"><img alt="Place Holders in SWMM5 input file." src="_images/stage_place_holder.png" style="width: 662.2px; height: 460.6px;" /></a>
<p class="caption">Place Holders in SWMM5 input file. This dialog presents a compound text file containing <img class="math" src="_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/> (<img class="math" src="_images/math/d5eb8726a34932d28103ce7ce17456421222603f.png" alt="="/> number of stages) SWMM input files. SWMM input files are separated by a special entry: <tt class="docutils literal"><span class="pre">;;;;;;;;</span>&nbsp; <span class="pre">STAGE</span> <span class="pre">2</span>&nbsp; <span class="pre">;;;;;;;;</span>&nbsp; <span class="pre">NOTE:</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">...</span></tt></p>
</div>
<p>In the parameters pane, in addition to the usual ones, three new parameters are exposed: The number of stages, size of a stage and the discount rate.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/stage_project_parameters.png"><img alt="Project parameters." src="_images/stage_project_parameters.png" style="width: 493.5px; height: 427.0px;" /></a>
<p class="caption">Project parameters used.</p>
</div>
<p>Note that it is the responsibility of the user to introduce the <cite>time value</cite> concept
when writing the cost function 1 (<img class="math" src="_images/math/00322295674c54c5413520f7493470ff32ae3cec.png" alt="c_1"/>). The user can use any of the variables used in the left
hand pane of the dialog when writing the equations. In this example, we have used the discount
rate and stage size like this. Our cost formula is</p>
<div class="math">
<p><img src="_images/math/cdd3a068b48ff679501f79df4ebbda0e418f1167.png" alt="\begin{array}{rl}
    c_1=&amp;1000*(v1**.8+v2**.8+v3**.8+v4**.8+v5**.8) \\
        &amp;+1000*(v6**.8+v7**.8+v8**.8+v9**.8+v10**.8)/(1+\mbox {discount\_rate} /100)**(1*\mbox{stage\_size}) \\
            &amp;+1000*(v11**.8+v12**.8+v13**.8+v14**.8+v15**.8)/(1+\mbox{discount\_rate}/100)**(2*\mbox{stage\_size})
\end{array}"/></p>
</div><p>The cost function 2 (<img class="math" src="_images/math/a6d4142d351ef99cc26a94e44c1912d904dd4a0c.png" alt="c_2"/>) remains simple. It is interpreted as <cite>annual flood cost</cite>.
The SWMM5-EA system will calculate flood cost at each year using this user-provided formula,
bring it to the present value and sums it all to calculate the net present cost of flooding.</p>
<p>However, in this example (similar to <a class="reference internal" href="Simple Optimization.html#simple-example-label"><em>Example 1</em></a>,) we do no consider flood as a real cost
but as a penalty.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/stage_converge.png"><img alt="After 100 generations." src="_images/stage_converge.png" style="width: 659.4px; height: 515.9px;" /></a>
<p class="caption">After 100 generations.</p>
</div>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The SWMM5-EA software allows implementing more complex problems where a number of parameters change. However, for this example we use a simple scenario.</td></tr>
</tbody>
</table>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="Calibration of Networks.html"
                        title="previous chapter">Example 2: Calibration of Networks</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/Staged Optimization.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Calibration of Networks.html" title="Example 2: Calibration of Networks"
             >previous</a> |</li>
        <li><a href="index.html">SWMM5-EA 0.9.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Assela Pathirana.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>