{% extends 'base_site.html' %}

{% block content %}
<h1>Details about {{object.name}}</h1>
<a href="{% url 'friendslist-friend-update' object.id %}">Update {{object.name}}</a>

{% if object.comments.all %}
<h4>Comments so far:</h4>
        {% for comment in object.comments.all %}
        <p>
        "{{ comment.text }}"
        <br><i>{{ comment.author }}</i>
        </p>
        {% endfor %}
{% endif %}
<P>
<h3>Add a comment about {{ object.name }}</h3>
<form action="{% url 'friendslist-friend-add-comment' %}" method="POST">
    {% csrf_token %}
    <input type="hidden" name="friend_id" value="{{object.id}}">
    <textarea name="text"></textarea>
    <br>
    You are:<br>
    <input type="text" name="author">
    <br>
    <input type="submit" value="Add comment">
</form>

<button onclick="friendApi.update({{object.id}}, {'name': 'foo'});">Set name of friend to foo</button>
<button onclick="friendApi.update({{object.id}}, {'name': 'spam', 'email': 'test'});">Update friend to be called spam will fail</button>
<button onclick="friendApi.update({{object.id}}, {'name': 'spam', 'email': 'test@com.com'});">Update friend to be called spam will succeed</button>
<button onclick="friendApi.delete({{object.id}});">Delete friend</button>

{% endblock %}