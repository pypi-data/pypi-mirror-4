var __bind=function(e,t){return function(){return e.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define(["environ","mediator","jquery","underscore","backbone","views/charts"],function(e,t,n,r,i,s){var o,u;return u=r.template('<button class=btn title="Add Chart"><i class=icon-signal alt="Add Chart"></i></button>'),o=function(e){function r(){return this.updateCharts=__bind(this.updateCharts,this),r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r.prototype.id="analysis-area",r.prototype.deferred={updateCharts:!0},r.prototype.initialize=function(){var e,r=this;return this.charts=[],this.$toolbar=n("<ul>").addClass("nav pull-right").hide().appendTo("#subnav .container-fluid"),this.$el.hide().appendTo("#main-area .inner").addClass("row-fluid").sortable({items:"> .area-container",handle:".heading",update:function(e,t){var n,i,s,o,u,a,f;n=r.$el.children(".chart-container"),a=r.charts,f=[];for(o=0,u=a.length;o<u;o++)s=a[o],i=n.index(s.el),f.push(s.model.set({order:i}));return f}}),e=n(u()).on("click",function(e){return r.addChart()}),this.$toolbar.append(e),this.defer(function(){var e,t,n,i,s;i=App.Distribution.models,s=[];for(t=0,n=i.length;t<n;t++)e=i[t],s.push(r.addChart(e));return s}),t.subscribe("datacontext/synced",this.updateCharts)},r.prototype.updateCharts=function(){var e,t,n,r;r=this.charts;for(t=0,n=r.length;t<n;t++)e=r[t],e.updateChart()},r.prototype.load=function(){return this.$el.fadeIn(100),this.$toolbar.fadeIn(100)},r.prototype.unload=function(){return this.$el.hide(),this.$toolbar.hide()},r.prototype.addChart=function(e){var t,n;return!e instanceof App.Distribution.model?t=e:t=App.Distribution.create(e),n=new s.Distribution({model:t,collection:App.DataField}),this.charts.push(n),this.$el.append(n.$el),n.updateChart()},r}(i.View)})