<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9: http://docutils.sourceforge.net/" />
<title>Use GraphTerm as a remote terminal (like screen or tmux)</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="use-graphterm-as-a-remote-terminal-like-screen-or-tmux">
<h1 class="title">Use GraphTerm as a remote terminal (like screen or tmux)</h1>

<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#introduction" id="id2">1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference internal" href="#accessing-graphterm-features-across-ssh-logins" id="id3">2&nbsp;&nbsp;&nbsp;Accessing GraphTerm features across SSH logins</a></li>
<li><a class="reference internal" href="#accessing-graphterm-server-from-a-remote-computer-using-ssh" id="id4">3&nbsp;&nbsp;&nbsp;Accessing GraphTerm server from a remote computer using SSH</a></li>
<li><a class="reference internal" href="#connecting-multiple-hosts-to-gtermserver" id="id5">4&nbsp;&nbsp;&nbsp;Connecting multiple hosts to gtermserver</a></li>
<li><a class="reference internal" href="#wildcard-sessions" id="id6">5&nbsp;&nbsp;&nbsp;Wildcard sessions</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id2">1&nbsp;&nbsp;&nbsp;Introduction</a></h1>
<p>GraphTerm provides the basic capabilities of <em>detached terminal</em> programs like
<tt class="docutils literal">screen</tt> and <tt class="docutils literal">tmux</tt>. The GraphTerm terminal window is just a web page,
served by <tt class="docutils literal">gtermserver</tt>. Therefore, it can be accessed from any computer
with access to the server, either locally or remotely. All you need to do
is to load the URL for the terminal session on a new computer, and you can
continue working from the point where you stopped previously.</p>
<p>A typical use of GraphTerm would be to run
<tt class="docutils literal">gtermserver</tt> on your work computer, and access it locally at work
and remotely from home. For security, it would be best to run the server
as <tt class="docutils literal">localhost</tt> on the work computer, and use SSH port forwarding to
connect to it from other computers.</p>
<p>Another use of GraphTerm would be to run the server on managing host of a computer
cluster, or a group of cloud instances. Other hosts can connect to the managing
host using the <tt class="docutils literal">gtermhost</tt> command. <em>In this case, the hosts should
connect via a private network, not the the public internet.</em> The state of the terminal is
stored on the host machine, not on <tt class="docutils literal">gtermserver</tt>. You can restart <tt class="docutils literal">gtermserver</tt>
and the hosts will automatically reconnect.</p>
<p>See the <a class="reference external" href="http://info.mindmeldr.com/code/graphterm/graphterm-readme">README</a>
file for basic instructions on installing and starting up GraphTerm.</p>
</div>
<div class="section" id="accessing-graphterm-features-across-ssh-logins">
<h1><a class="toc-backref" href="#id3">2&nbsp;&nbsp;&nbsp;Accessing GraphTerm features across SSH logins</a></h1>
<p>If you login to a remote computer using SSH, you can use the
<em>Action -&gt; Export Environment</em>  menu option to set the Bash shell
environment variables on the remote computer. This will allow
some, but not all, of GraphTerm's features to work on the remote
session. If you wish to use more features, set the <tt class="docutils literal">PATH</tt> environment
variable on the remote machine to allow access to <tt class="docutils literal">gls</tt> and other
commands, and also use reverse port forwarding to forward your
local port(s) to the remote computer. For example, if you wish
to connect remote hosts to the GraphTerm server, use:</p>
<pre class="literal-block">
ssh -R 8899:localhost:8899 user&#64;remote-computer
</pre>
</div>
<div class="section" id="accessing-graphterm-server-from-a-remote-computer-using-ssh">
<h1><a class="toc-backref" href="#id4">3&nbsp;&nbsp;&nbsp;Accessing GraphTerm server from a remote computer using SSH</a></h1>
<p>Assume that you will be running <tt class="docutils literal">gtermserver</tt> on your <tt class="docutils literal"><span class="pre">work-computer</span></tt> as
<tt class="docutils literal">localhost</tt> listening on the default port 8900 using the command:</p>
<pre class="literal-block">
gtermserver --auth_code=none
</pre>
<p>At work, you will use the URL <tt class="docutils literal"><span class="pre">http://localhost:8900/local/tty1</span></tt> to access
your terminal session <tt class="docutils literal">tty1</tt>.</p>
<p>To access your work terminal from home, connect to your work computer using SSH:</p>
<pre class="literal-block">
ssh -L 8901:localhost:8900 user&#64;work-computer
</pre>
<p>The above command maps your work computer port 8900 to your home computer port 8901.
(There is also a <tt class="docutils literal"><span class="pre">-R</span></tt> option that provides a reverse port mapping, which can be useful if
you can log into your desktop from your laptop, and wish to access
your laptop files using the desktop browser, by mapping laptop port 8900 to
desktop port 8901.)</p>
<p>After establishing the SSH connection, you can access your work terminal session from
home using the URL:</p>
<pre class="literal-block">
http://localhost:8901/local/tty1
</pre>
<p>(If you forgot to detach your work terminal before leaving, use the
<em>Action-&gt;Steal session</em> menu option to steal control of the session.)</p>
<p>If you have multiple terminals open, use the URL <tt class="docutils literal"><span class="pre">http://localhost:8901/local</span></tt> to
see a list of all the available terminal sessions.</p>
</div>
<div class="section" id="connecting-multiple-hosts-to-gtermserver">
<h1><a class="toc-backref" href="#id5">4&nbsp;&nbsp;&nbsp;Connecting multiple hosts to gtermserver</a></h1>
<p>The <tt class="docutils literal">gtermhost</tt> command can be used to connect from any computer to
<tt class="docutils literal">gtermserver</tt> running on a management cmputer as follows:</p>
<pre class="literal-block">
gtermhost --server_addr=&lt;serveraddr&gt; &lt;hostname&gt;
</pre>
<p>where <tt class="docutils literal">serveraddr</tt> is the address or name of the computer where
<tt class="docutils literal">gtermserver</tt> is running (which defaults to localhost).
By default, the server listens for host
connections on port 8899. You can use SSH tunneling to
access <tt class="docutils literal">gtermserver</tt> on the management computer, and thus access the
hosts, which should be on a secure private network.</p>
<p>NOTE: Unlike the <tt class="docutils literal">sshd</tt> server, the <tt class="docutils literal">gtermhost</tt> command is designed to
be run by a normal user, not a privileged user. So different users can
connect to <tt class="docutils literal">gtermserver</tt> pretending to be different &quot;hosts&quot;
on the same computer.</p>
</div>
<div class="section" id="wildcard-sessions">
<h1><a class="toc-backref" href="#id6">5&nbsp;&nbsp;&nbsp;Wildcard sessions</a></h1>
<p>A session path is of the form <tt class="docutils literal">session_host/session_name</tt>. You can
use the shell wildcard patterns <tt class="docutils literal">*, <span class="pre">?,</span> []</tt> in the session path. For
example, you can open a wildcard session for multiple hosts using the URL:</p>
<pre class="literal-block">
http://localhost:8900/*/tty1
</pre>
<p>For normal shell terminals, a wildcard session will open a &quot;blank&quot; window,
but any input you type in it will be broadcast to all sessions
matching the pattern. (To receive visual feedback,
you will need to view one or more of the matching sessions at the
same time.)</p>
<p>For <tt class="docutils literal">otrace</tt> debugging sessions of the form <tt class="docutils literal">*/osh</tt>, GraphTerm
will multiplex the input and output in wildcard terminals. Your input
will be echoed and broadcast, and output from each of the matching
sessions will be displayed, preceded by an identifying header
(with the special string <tt class="docutils literal">ditto</tt> used to indicate repeated output).
See the <em>otrace</em> integration section in the
<a class="reference external" href="http://info.mindmeldr.com/code/graphterm/graphterm-readme">README</a>
file for more information.</p>
<p>NOTE: Multiplexed input/output display cannot be easily implemented for
regular shell terminals.</p>
</div>
</div>
</body>
</html>
