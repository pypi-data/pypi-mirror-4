

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation Tutorial &mdash; FireWorks 0.1dev1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1dev1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FireWorks 0.1dev1 documentation" href="index.html" />
    <link rel="prev" title="Features" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Features"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FireWorks 0.1dev1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-tutorial">
<h1>Installation Tutorial<a class="headerlink" href="#installation-tutorial" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will guide you through FireWorks installation on worker nodes, test communication with the queue, and submit some placeholder jobs.</p>
<div class="section" id="set-up-worker-nodes">
<h2>Set up worker nodes<a class="headerlink" href="#set-up-worker-nodes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-fireworks-on-the-worker">
<h3>Install FireWorks on the worker<a class="headerlink" href="#install-fireworks-on-the-worker" title="Permalink to this headline">¶</a></h3>
<p>To install FireWorks on the worker, please follow the instructions listed at <a class="reference internal" href="installation.html"><em>Installation on a machine</em></a>.</p>
</div>
<div class="section" id="start-playing-with-the-rocket-launcher">
<h3>Start playing with the rocket launcher<a class="headerlink" href="#start-playing-with-the-rocket-launcher" title="Permalink to this headline">¶</a></h3>
<p>After installation, the script rocket_launcher_run.py should have been added to your system path. The rocket launcher creates directories on your file system to contain your runs, and also submits jobs to the queue.</p>
<p>You should now be able to run the rocket launcher command as an executable. Type this command into your command prompt (from any directory) to ensure that the script is found:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rocket_launcher_run</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
<p>This command should print out more detailed help about the rocket launcher. Take a minute to read it over; it might not all be clear, but we&#8217;ll step through some of the rocket launcher features next.</p>
</div>
<div class="section" id="run-the-rocket-launcher-in-single-shot-mode">
<h3>Run the rocket launcher in single-shot mode<a class="headerlink" href="#run-the-rocket-launcher-in-single-shot-mode" title="Permalink to this headline">¶</a></h3>
<p>We now want to test interaction of our worker computer with the queue.</p>
<ol class="arabic simple">
<li>Navigate to a clean testing directory on your worker node.</li>
<li>Take a look in the <a class="reference internal" href="fireworks.user_objects.queue_adapters.html"><em>queue_adapters</em></a> package to see if an appropriate <a class="reference internal" href="fireworks.core.html"><em>QueueAdapterBase</em></a> already exists for your queueing system. For example, the implementation <a class="reference internal" href="fireworks.user_objects.queue_adapters.html"><em>PBSAdapterNERSC</em></a> is documented to work with the PBS queueing system, so if you are using PBS you might want to try this module first.</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If your queuing system does not have built-in support, do not despair! You might try to use <a class="reference internal" href="fireworks.user_objects.queue_adapters.html"><em>PBSAdapterNERSC</em></a> as a reference for coding your own PBS adapter. You can also look at the docs for <a class="reference internal" href="fireworks.core.html"><em>QueueAdapterBase</em></a> to get an idea for what needs to be implemented. In most cases, adding a new QueueAdapterBase implementation should not be difficult. If you encounter trouble, you can contact us for help (see <a class="reference internal" href="index.html#contributing-label"><em>Contributing</em></a>).</p>
</div>
<ol class="arabic simple" start="3">
<li>The <a class="reference internal" href="fireworks.core.html"><em>QueueAdapterBase</em></a> serves as a template for interacting with the queue, but requires a JobParameters file to fill in specific values like walltime, desired queue name, and other application-specific parameters. An example of a very simple JobParameters file is given as job_params_pbs_nersc.yaml in the fireworks/user_objects/queue_adapters directory.</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The specific format of the JobParameters file might vary with the <a class="reference internal" href="fireworks.core.html"><em>QueueAdapterBase</em></a>, as each queuing system might require slightly different parameters. Refer to the documentation of your <a class="reference internal" href="fireworks.core.html"><em>QueueAdapterBase</em></a> implementation to see how to correctly structure a JobParameters file. For example, the <a class="reference internal" href="fireworks.user_objects.queue_adapters.html"><em>PBSAdapterNERSC</em></a> accepts many more parameters than those listed in the testing JobParameters file.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For more about the JobParameters file, look at the <a class="reference internal" href="fireworks.core.html"><em>JobParameters</em></a> class.</p>
</div>
<ol class="arabic simple" start="4">
<li>Copy an appropriate JobParameters file to your current directory</li>
<li>Modify the JobParameters file as needed to suit your cluster.</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Ensure that the &#8216;exe&#8217; parameter in the JobParameters file reads: &#8220;echo &#8216;howdy, your job launched successfully!&#8217; &gt;&gt; howdy.txt&#8221;</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Make sure the qa_name parameter in the JobParameters file indicates the name of your desired queue adapter.</p>
</div>
<ol class="arabic" start="6">
<li><p class="first">Try submitting a job using the command:</p>
<div class="highlight-python"><pre>rocket_launcher_run.py &lt;JOB_PARAMETERS_FILE&gt;</pre>
</div>
</li>
</ol>
<p>where the &lt;JOB_PARAMETERS_FILE&gt; points to your JobParameters file, e.g. job_params_pbs_nersc.yaml.</p>
<ol class="arabic simple" start="7">
<li>Ideally, this should have submitted a job to the queue in the current directory. You can read the log files to get more information on what occurred. The log file location was specified in the JobParameters file.</li>
<li>After your queue manager runs your job, you should see the file howdy.txt in the current directory. This indicates that the exe you specified ran correctly.</li>
</ol>
<p>If you finished this part of the tutorial successfully, congratulations! You&#8217;ve successfully set up a worker node to run FireWorks. You can now continue to test launching jobs in a &#8220;rapid-fire&#8221; mode.</p>
</div>
<div class="section" id="run-the-rocket-launcher-in-rapid-fire-mode">
<h3>Run the rocket launcher in rapid-fire mode<a class="headerlink" href="#run-the-rocket-launcher-in-rapid-fire-mode" title="Permalink to this headline">¶</a></h3>
<p>While launching a single job is nice, a more useful functionality is to maintain a certain number of jobs in the queue. The rocket launcher provides a &#8220;rapid-fire&#8221; mode that automatically provides this functionality. This mode requires another part of the <a class="reference internal" href="fireworks.core.html"><em>QueueAdapterBase</em></a> to be functioning properly, namely the part of the code that determines how many jobs are currently in the queue by the current user.</p>
<p>To test rapid-fire mode, try the following:</p>
<ol class="arabic simple">
<li>Navigate to a clean testing directory on your worker node.</li>
<li>Copy the same JobParameters file to this testing directory as you used for single-shot mode.</li>
</ol>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You don&#8217;t always have to copy over the JobParameters file. If you&#8217;d like, you can keep a single JobParameters file in some known location and just provide the full path to that file when running the rocket_launcher_run.py executable.</p>
</div>
<ol class="arabic" start="3">
<li><p class="first">Try submitting several jobs using the command:</p>
<div class="highlight-python"><pre>rocket_launcher_run.py --rapidfire -q 3 &lt;JOB_PARAMETERS_FILE&gt;</pre>
</div>
</li>
</ol>
<p>where the &lt;JOB_PARAMETERS_FILE&gt; points to your JobParameters file, e.g. job_params_pbs_nersc.yaml.</p>
<ol class="arabic" start="4">
<li><p class="first">This method should have submitted 3 jobs to the queue at once, all inside of a directory beginning with the tag &#8216;<a href="#id1"><span class="problematic" id="id2">block_</span></a>&#8216;.</p>
</li>
<li><p class="first">You can maintain a certain number of jobs in the queue indefinitely by specifying the number of loops parameter to be much greater than 1 (e.g., the example below sets 100 loops):</p>
<div class="highlight-python"><pre>rocket_launcher_run.py --rapidfire -q 3 -n 100 &lt;JOB_PARAMETERS_FILE&gt;</pre>
</div>
</li>
<li><p class="first">The script above should maintain 3 jobs in the queue for 100 loops of the rocket launcher. The rocket launcher will sleep for a user-adjustable time after each loop.</p>
</li>
</ol>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">the documentation of the rocket launcher contains additional details, as well as the built-in help file obtained by running the rocket launcher with the -h option.</p>
</div>
</div>
<div class="section" id="next-steps">
<h3>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h3>
<p>If you&#8217;ve completed this tutorial, you&#8217;ve successfully set up a worker node that can communicate with the queueing system and submit either a single job or maintain multiple jobs in the queue.</p>
<p>However, so far the jobs have not been very dynamic. The same executable (the one specified in the JobParameters file) has been run for every single job. This is not very useful.</p>
<p>In the next part of the tutorial, we&#8217;ll set up a central workflow server and add some jobs to it. Then, we&#8217;ll come back to the workers and walk through how to dynamically run the jobs specified by the workflow server.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation Tutorial</a><ul>
<li><a class="reference internal" href="#set-up-worker-nodes">Set up worker nodes</a><ul>
<li><a class="reference internal" href="#install-fireworks-on-the-worker">Install FireWorks on the worker</a></li>
<li><a class="reference internal" href="#start-playing-with-the-rocket-launcher">Start playing with the rocket launcher</a></li>
<li><a class="reference internal" href="#run-the-rocket-launcher-in-single-shot-mode">Run the rocket launcher in single-shot mode</a></li>
<li><a class="reference internal" href="#run-the-rocket-launcher-in-rapid-fire-mode">Run the rocket launcher in rapid-fire mode</a></li>
<li><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Features</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installation_tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Features"
             >previous</a> |</li>
        <li><a href="index.html">FireWorks 0.1dev1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Anubhav Jain.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>